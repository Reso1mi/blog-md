---
title: 
   DPï¼šèƒŒåŒ…æ¨¡å‹
tags: 
  [ç®—æ³•]
categories:
    [ç®—æ³•]
date: 2021/3/2
---
> ç›¸å…³æ–‡ç«  [LeetCodeèƒŒåŒ…é—®é¢˜](http://imlgw.top/2019/11/29/leetcode-bei-bao-wen-ti/) 

## [423. é‡‡è¯](https://www.acwing.com/problem/content/425/)

è¾°è¾°æ˜¯ä¸ªå¤©èµ„èªé¢–çš„å­©å­ï¼Œä»–çš„æ¢¦æƒ³æ˜¯æˆä¸ºä¸–ç•Œä¸Šæœ€ä¼Ÿå¤§çš„åŒ»å¸ˆã€‚ä¸ºæ­¤ï¼Œä»–æƒ³æ‹œé™„è¿‘æœ€æœ‰å¨æœ›çš„åŒ»å¸ˆä¸ºå¸ˆã€‚

åŒ»å¸ˆä¸ºäº†åˆ¤æ–­ä»–çš„èµ„è´¨ï¼Œç»™ä»–å‡ºäº†ä¸€ä¸ªéš¾é¢˜ã€‚

åŒ»å¸ˆæŠŠä»–å¸¦åˆ°ä¸€ä¸ªåˆ°å¤„éƒ½æ˜¯è‰è¯çš„å±±æ´é‡Œå¯¹ä»–è¯´ï¼šâ€œå­©å­ï¼Œè¿™ä¸ªå±±æ´é‡Œæœ‰ä¸€äº›ä¸åŒçš„è‰è¯ï¼Œé‡‡æ¯ä¸€æ ªéƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼Œæ¯ä¸€æ ªä¹Ÿæœ‰å®ƒè‡ªèº«çš„ä»·å€¼ã€‚æˆ‘ä¼šç»™ä½ ä¸€æ®µæ—¶é—´ï¼Œåœ¨è¿™æ®µæ—¶é—´é‡Œï¼Œä½ å¯ä»¥é‡‡åˆ°ä¸€äº›è‰è¯ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ªèªæ˜çš„å­©å­ï¼Œä½ åº”è¯¥å¯ä»¥è®©é‡‡åˆ°çš„è‰è¯çš„æ€»ä»·å€¼æœ€å¤§ã€‚â€

å¦‚æœä½ æ˜¯è¾°è¾°ï¼Œä½ èƒ½å®Œæˆè¿™ä¸ªä»»åŠ¡å—ï¼Ÿ

**è¾“å…¥æ ¼å¼**

è¾“å…¥æ–‡ä»¶çš„ç¬¬ä¸€è¡Œæœ‰ä¸¤ä¸ªæ•´æ•°Tå’ŒMï¼Œç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼ŒTä»£è¡¨æ€»å…±èƒ½å¤Ÿç”¨æ¥é‡‡è¯çš„æ—¶é—´ï¼ŒMä»£è¡¨å±±æ´é‡Œçš„è‰è¯çš„æ•°ç›®ã€‚

æ¥ä¸‹æ¥çš„Mè¡Œæ¯è¡ŒåŒ…æ‹¬ä¸¤ä¸ªåœ¨1åˆ°100ä¹‹é—´ï¼ˆåŒ…æ‹¬1å’Œ100ï¼‰çš„æ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºé‡‡æ‘˜æŸæ ªè‰è¯çš„æ—¶é—´å’Œè¿™æ ªè‰è¯çš„ä»·å€¼ã€‚

**è¾“å‡ºæ ¼å¼**

è¾“å‡ºæ–‡ä»¶åŒ…æ‹¬ä¸€è¡Œï¼Œè¿™ä¸€è¡ŒåªåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºåœ¨è§„å®šçš„æ—¶é—´å†…ï¼Œå¯ä»¥é‡‡åˆ°çš„è‰è¯çš„æœ€å¤§æ€»ä»·å€¼ã€‚

**æ•°æ®èŒƒå›´**

1â‰¤Tâ‰¤1000, 1â‰¤Mâ‰¤100

**è¾“å…¥æ ·ä¾‹ï¼š**
```c
70 3
71 100
69 1
1 2
```
**è¾“å‡ºæ ·ä¾‹ï¼š**
```c
3
```

### è§£æ³•ä¸€

æ²¡å•¥å¥½è¯´çš„ï¼Œè£¸çš„01èƒŒåŒ…ï¼Œè€ƒè™‘æ¯ä¸ªç‰©å“è£…æˆ–è€…ä¸è£…
```java
//è£¸01èƒŒåŒ…
public static int solve(int T, int M, int[] v, int[] cost) {
    //è€ƒè™‘å‰iä»¶è¯ï¼ŒèƒŒåŒ…å¤§å°ä¸ºjï¼Œèƒ½è£…çš„æœ€å¤§æ”¶ç›Š
    int[][] dp = new int[M+1][T+1];
    //dp[i][j] = Math.max(dp[i-1][j], dp[i-1][j-w[i]] + v[i])
    for (int i = 1; i <= M; i++) {
        for (int j = T; j >= 0; j--) {
            dp[i][j] = Math.max(dp[i-1][j], j >= cost[i-1] ? dp[i-1][j-cost[i-1]] + v[i-1] : -1);
        }
    }
    return dp[M][T];
}

//ç©ºé—´ä¼˜åŒ–
public static int solveOpt(int T, int M, int[] v, int[] cost) {
    //è€ƒè™‘å‰iä»¶è¯ï¼ŒèƒŒåŒ…å¤§å°ä¸ºjï¼Œèƒ½è£…çš„æœ€å¤§æ”¶ç›Š
    //dp[i][j] = Math.max(dp[i-1][j], dp[i-1][j-w[i]] + v[i])
    int[] dp = new int[T+1];
    for (int i = 0; i < M; i++) {
        for (int j = T; j >= cost[i]; j--) {
            //j > cost[i] dp[j] = dp[j](old)
            dp[j] = Math.max(dp[j], dp[j-cost[i]] + v[i]);
        }
    }
    return dp[T];
}
```
[1024. è£…ç®±é—®é¢˜](https://www.acwing.com/problem/content/1026/)å’Œ[278. æ•°å­—ç»„åˆ](https://www.acwing.com/problem/content/280/)å’Œè¿™ä¸ªå·®ä¸å¤šï¼Œä¸å¤šå†™äº†

## [8. äºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜](https://www.acwing.com/problem/content/8/)
æœ‰ N ä»¶ç‰©å“å’Œä¸€ä¸ªå®¹é‡æ˜¯ V çš„èƒŒåŒ…ï¼ŒèƒŒåŒ…èƒ½æ‰¿å—çš„æœ€å¤§é‡é‡æ˜¯ Mã€‚

æ¯ä»¶ç‰©å“åªèƒ½ç”¨ä¸€æ¬¡ã€‚ä½“ç§¯æ˜¯ viï¼Œé‡é‡æ˜¯ miï¼Œä»·å€¼æ˜¯ wiã€‚

æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä½¿ç‰©å“æ€»ä½“ç§¯ä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œæ€»é‡é‡ä¸è¶…è¿‡èƒŒåŒ…å¯æ‰¿å—çš„æœ€å¤§é‡é‡ï¼Œä¸”ä»·å€¼æ€»å’Œæœ€å¤§ã€‚
è¾“å‡ºæœ€å¤§ä»·å€¼ã€‚

**è¾“å…¥æ ¼å¼**

ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°ï¼ŒNï¼ŒV,Mï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç‰©å“ä»¶æ•°ã€èƒŒåŒ…å®¹ç§¯å’ŒèƒŒåŒ…å¯æ‰¿å—çš„æœ€å¤§é‡é‡ã€‚

æ¥ä¸‹æ¥æœ‰ N è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•° vi,mi,wiï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬ i ä»¶ç‰©å“çš„ä½“ç§¯ã€é‡é‡å’Œä»·å€¼ã€‚

**è¾“å‡ºæ ¼å¼**

è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§ä»·å€¼ã€‚

**æ•°æ®èŒƒå›´**ï¼š0<Nâ‰¤1000ï¼Œ0<V,Mâ‰¤100ï¼Œ0<vi,miâ‰¤100ï¼Œ0<wiâ‰¤1000

**è¾“å…¥æ ·ä¾‹**
```c
4 5 6
1 2 3
2 4 4
3 4 5
4 5 6
```
**è¾“å‡ºæ ·ä¾‹ï¼š**
```c
8
```

### è§£æ³•ä¸€
å¤šç»´è´¹ç”¨èƒŒåŒ…æ¨¡æ¿é¢˜
```java
import java.io.*;
import java.util.*;

class Main {
    public static void main(String[] args) throws Exception {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        int[] in = read(br);
        int N = in[0], V = in[1], M = in[2];
        int[][] dp = new int[V+1][M+1];
        for (int i = 1; i <= N; i++) {
            int[] vmw = read(br);
            int vi = vmw[0], mi = vmw[1], wi = vmw[2];
            for (int j = V; j >= vi; j--) {
                for (int k = M; k >= mi; k--) {
                    dp[j][k] = Math.max(dp[j][k], dp[j-vi][k-mi]+wi);
                }
            }
        }
        System.out.println(dp[V][M]);
    }

    public static int[] read(BufferedReader br) throws Exception {
        return Arrays.stream(br.readLine().split(" ")).mapToInt(Integer::parseInt).toArray();
    }
}
```
## [1020. æ½œæ°´å‘˜](https://www.acwing.com/problem/content/1022/)
æ½œæ°´å‘˜ä¸ºäº†æ½œæ°´è¦ä½¿ç”¨ç‰¹æ®Šçš„è£…å¤‡ã€‚

ä»–æœ‰ä¸€ä¸ªå¸¦2ç§æ°”ä½“çš„æ°”ç¼¸ï¼šä¸€ä¸ªä¸ºæ°§æ°”ï¼Œä¸€ä¸ªä¸ºæ°®æ°”ã€‚

è®©æ½œæ°´å‘˜ä¸‹æ½œçš„æ·±åº¦éœ€è¦å„ç§æ•°é‡çš„æ°§å’Œæ°®ã€‚

æ½œæ°´å‘˜æœ‰ä¸€å®šæ•°é‡çš„æ°”ç¼¸ã€‚

æ¯ä¸ªæ°”ç¼¸éƒ½æœ‰é‡é‡å’Œæ°”ä½“å®¹é‡ã€‚

æ½œæ°´å‘˜ä¸ºäº†å®Œæˆä»–çš„å·¥ä½œéœ€è¦ç‰¹å®šæ•°é‡çš„æ°§å’Œæ°®ã€‚

ä»–å®Œæˆå·¥ä½œæ‰€éœ€æ°”ç¼¸çš„æ€»é‡çš„æœ€ä½é™åº¦çš„æ˜¯å¤šå°‘ï¼Ÿ


**è¾“å…¥æ ¼å¼**

ç¬¬ä¸€è¡Œæœ‰2ä¸ªæ•´æ•° mï¼Œnã€‚å®ƒä»¬è¡¨ç¤ºæ°§ï¼Œæ°®å„è‡ªéœ€è¦çš„é‡ã€‚

ç¬¬äºŒè¡Œä¸ºæ•´æ•° k è¡¨ç¤ºæ°”ç¼¸çš„ä¸ªæ•°ã€‚

æ­¤åçš„ k è¡Œï¼Œæ¯è¡ŒåŒ…æ‹¬aiï¼Œbiï¼Œciï¼Œ3ä¸ªæ•´æ•°ã€‚è¿™äº›å„è‡ªæ˜¯ï¼šç¬¬ i ä¸ªæ°”ç¼¸é‡Œçš„æ°§å’Œæ°®çš„å®¹é‡åŠæ°”ç¼¸é‡é‡ã€‚

**è¾“å‡ºæ ¼å¼**

ä»…ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œä¸ºæ½œæ°´å‘˜å®Œæˆå·¥ä½œæ‰€éœ€çš„æ°”ç¼¸çš„é‡é‡æ€»å’Œçš„æœ€ä½å€¼ã€‚

**æ•°æ®èŒƒå›´**ï¼š1â‰¤mâ‰¤21, 1â‰¤nâ‰¤79, 1â‰¤kâ‰¤1000, 1â‰¤aiâ‰¤21, 1â‰¤biâ‰¤79, 1â‰¤ciâ‰¤800

**è¾“å…¥æ ·ä¾‹ï¼š**
```c
5 60
5
3 36 120
10 25 129
5 50 250
1 45 130
4 20 119
```
**è¾“å‡ºæ ·ä¾‹ï¼š**
```c
249
```

### è§£æ³•ä¸€
ä¸€å¼€å§‹å†™äº†ä¸ªè®°å¿†åŒ–é€’å½’ï¼Œè´Ÿæ•°çŠ¶æ€ä¸ä¿å­˜ï¼Œç»“æœTäº†ã€‚

è¿™é¢˜ä¹Ÿæ˜¯äºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜ï¼Œä½†æ˜¯è¿™é‡Œæ˜¯æ±‚èƒ½è¦†ç›–è´¹ç”¨çš„æœ€å°é‡é‡ï¼Œæ±‚çš„æ˜¯**è‡³å°‘**ï¼Œä¸Šé¢çš„æ±‚çš„æ˜¯ **æœ€å¤š**ï¼Œæ–¹ç¨‹å…¶å®å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯ç»†èŠ‚è¿˜æ˜¯ä¸ä¸€æ ·ï¼Œé¦–å…ˆåˆå§‹çŠ¶æ€ä¸ä¸€æ ·ï¼Œè¿™é‡Œæ±‚æœ€å°å€¼ï¼Œæ‰€ä»¥åˆå§‹çŠ¶æ€åº”è¯¥éƒ½èµ‹å€¼æˆ+âˆï¼Œ`dp[i][j][k]`ä»£è¡¨å‰iä¸ªæ°§æ°”ç½ï¼Œæ°§æ°”è‡³å°‘ä¸ºjï¼Œæ°®æ°”è‡³å°‘ä¸ºkçš„æ—¶å€™ï¼Œæ°”ç¼¸æœ€å°çš„é‡é‡

æ ¸å¿ƒçš„é€’æ¨æ–¹ç¨‹ä»ç„¶æ˜¯è¿™ä¸ªï¼Œä½†æ˜¯çŠ¶æ€çš„å«ä¹‰å˜äº†
```java
//çœç•¥ä¸€ç»´ï¼Œy,d,wä»£è¡¨æ°§æ°”ï¼Œæ°®æ°”ï¼Œè´¨é‡
dp[j][k] = Math.min(dp[j][k], dp[j-y][k-d]+w);
```
è¿™é‡ŒäºŒä¸ªç»´åº¦çš„çŠ¶æ€è¯´çš„éƒ½æ˜¯**è‡³å°‘**ï¼Œé‚£ä¹ˆæ„å‘³ç€`j-y < 0` æˆ–è€… `k-d < 0` ä¹Ÿæ˜¯åˆæ³•çš„ï¼Œè€Œè´Ÿæ•°çŠ¶æ€å’Œ`0çŠ¶æ€(è‡³å°‘æ˜¯0)`æ˜¯ç­‰ä»·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä»`0çŠ¶æ€`åˆæ³•çš„è½¬ç§»è¿‡æ¥ï¼Œä½¿å¾—çŠ¶æ€è®¡ç®—å®Œæ•´ä¸é—æ¼ã€‚ä¸€å¼€å§‹è‡ªå·±æ€è€ƒçš„æ—¶å€™æƒ³åˆ°äº†è¿™ç§æƒ…å†µï¼Œä½†æ˜¯è€ƒè™‘çš„ä¸å¤Ÿå®Œå…¨

```java
import java.util.*;
import java.io.*;

public class AcWing1020_æ½œæ°´å‘˜ {
    public static void main(String[] args) throws Exception {
        new Main().main();
    }
}

class Main {
    
    //dp[i][j] = Math.min(dp[i][j], dp[i-y][j-d]+w);
    public static void main(String... args) throws Exception {
        // BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("./input.txt")));
        int INF = 0x3f3f3f3f;
        int[] in = read(br);
        int Y = in[0], D = in[1], N = Integer.parseInt(br.readLine());
        //dp[i][j]: æ°§æ°”è‡³å°‘iï¼Œæ°®æ°”è‡³å°‘jï¼Œéœ€è¦çš„æœ€å°é‡é‡
        int[][] dp = new int[Y+1][D+1];
        for (int i = 0; i <= Y; i++) {
            Arrays.fill(dp[i], INF);
        }
        dp[0][0] = 0;
        for (int i = 0; i < N; i++) {
            int[] ydw = read(br);
            int yi = ydw[0], di = ydw[1], wi = ydw[2];
            for (int j = Y; j >= 0; j--) {
                for (int k = D; k >= 0; k--) {
                    // if (j < yi || k < di) {
                    //     dp[j][k] = Math.min(dp[j][k], wi);
                    // } else {
                    //     dp[j][k] = Math.min(dp[j][k], dp[j-yi][k-di] + wi);
                    // }
                    // ä¸Šé¢çš„é€’æ¨ç¼ºä¹è€ƒè™‘ï¼Œå¦‚æœæ°§æ°”å’Œæ°®æ°”åªæœ‰ä¸€ç§è¶…å‡ºäº†èŒƒå›´ï¼Œå¦ä¸€ç»´çš„çŠ¶æ€ä¸åº”è¯¥è·Ÿç€æŒ‰ç…§0ç®—
                    dp[j][k] = Math.min(dp[j][k], dp[Math.max(j-yi, 0)][Math.max(k-di, 0)] + wi);
                }
            }
        }
        System.out.println(dp[Y][D]);
    }

    public static int[] read(BufferedReader br) throws Exception {
        return Arrays.stream(br.readLine().split(" ")).mapToInt(Integer::parseInt).toArray();
    }
}
```

## [1022. å® ç‰©å°ç²¾çµä¹‹æ”¶æœ](https://www.acwing.com/problem/content/1024/)

å® ç‰©å°ç²¾çµæ˜¯ä¸€éƒ¨è®²è¿°å°æ™ºå’Œä»–çš„æ­æ¡£çš®å¡ä¸˜ä¸€èµ·å†’é™©çš„æ•…äº‹ã€‚

ä¸€å¤©ï¼Œå°æ™ºå’Œçš®å¡ä¸˜æ¥åˆ°äº†å°ç²¾çµç‹©çŒåœºï¼Œé‡Œé¢æœ‰å¾ˆå¤šçè´µçš„é‡ç”Ÿå® ç‰©å°ç²¾çµã€‚

å°æ™ºä¹Ÿæƒ³æ”¶æœå…¶ä¸­çš„ä¸€äº›å°ç²¾çµã€‚

ç„¶è€Œï¼Œé‡ç”Ÿçš„å°ç²¾çµå¹¶ä¸é‚£ä¹ˆå®¹æ˜“è¢«æ”¶æœã€‚

å¯¹äºæ¯ä¸€ä¸ªé‡ç”Ÿå°ç²¾çµè€Œè¨€ï¼Œå°æ™ºå¯èƒ½éœ€è¦ä½¿ç”¨å¾ˆå¤šä¸ªç²¾çµçƒæ‰èƒ½æ”¶æœå®ƒï¼Œè€Œåœ¨æ”¶æœè¿‡ç¨‹ä¸­ï¼Œé‡ç”Ÿå°ç²¾çµä¹Ÿä¼šå¯¹çš®å¡ä¸˜é€ æˆä¸€å®šçš„ä¼¤å®³ï¼ˆä»è€Œå‡å°‘çš®å¡ä¸˜çš„ä½“åŠ›ï¼‰ã€‚

å½“çš®å¡ä¸˜çš„ä½“åŠ›å°äºç­‰äº0æ—¶ï¼Œå°æ™ºå°±å¿…é¡»ç»“æŸç‹©çŒï¼ˆå› ä¸ºä»–éœ€è¦ç»™çš®å¡ä¸˜ç–—ä¼¤ï¼‰ï¼Œè€Œä½¿å¾—çš®å¡ä¸˜ä½“åŠ›å°äºç­‰äº0çš„é‡ç”Ÿå°ç²¾çµä¹Ÿä¸ä¼šè¢«å°æ™ºæ”¶æœã€‚

å½“å°æ™ºçš„ç²¾çµçƒç”¨å®Œæ—¶ï¼Œç‹©çŒä¹Ÿå®£å‘Šç»“æŸã€‚

æˆ‘ä»¬å‡è®¾å°æ™ºé‡åˆ°é‡ç”Ÿå°ç²¾çµæ—¶æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼šæ”¶æœå®ƒï¼Œæˆ–è€…ç¦»å¼€å®ƒã€‚

å¦‚æœå°æ™ºé€‰æ‹©äº†æ”¶æœï¼Œé‚£ä¹ˆä¸€å®šä¼šæ‰”å‡ºèƒ½å¤Ÿæ”¶æœè¯¥å°ç²¾çµçš„ç²¾çµçƒï¼Œè€Œçš®å¡ä¸˜ä¹Ÿä¸€å®šä¼šå—åˆ°ç›¸åº”çš„ä¼¤å®³ï¼›å¦‚æœé€‰æ‹©ç¦»å¼€å®ƒï¼Œé‚£ä¹ˆå°æ™ºä¸ä¼šæŸå¤±ç²¾çµçƒï¼Œçš®å¡ä¸˜ä¹Ÿä¸ä¼šæŸå¤±ä½“åŠ›ã€‚

å°æ™ºçš„ç›®æ ‡æœ‰ä¸¤ä¸ªï¼šä¸»è¦ç›®æ ‡æ˜¯æ”¶æœå°½å¯èƒ½å¤šçš„é‡ç”Ÿå°ç²¾çµï¼›å¦‚æœå¯ä»¥æ”¶æœçš„å°ç²¾çµæ•°é‡ä¸€æ ·ï¼Œå°æ™ºå¸Œæœ›çš®å¡ä¸˜å—åˆ°çš„ä¼¤å®³è¶Šå°ï¼ˆå‰©ä½™ä½“åŠ›è¶Šå¤§ï¼‰ï¼Œå› ä¸ºä»–ä»¬è¿˜è¦ç»§ç»­å†’é™©ã€‚

ç°åœ¨å·²çŸ¥å°æ™ºçš„ç²¾çµçƒæ•°é‡å’Œçš®å¡ä¸˜çš„åˆå§‹ä½“åŠ›ï¼Œå·²çŸ¥æ¯ä¸€ä¸ªå°ç²¾çµéœ€è¦çš„ç”¨äºæ”¶æœçš„ç²¾çµçƒæ•°ç›®å’Œå®ƒåœ¨è¢«æ”¶æœè¿‡ç¨‹ä¸­ä¼šå¯¹çš®å¡ä¸˜é€ æˆçš„ä¼¤å®³æ•°ç›®ã€‚

è¯·é—®ï¼Œå°æ™ºè¯¥å¦‚ä½•é€‰æ‹©æ”¶æœå“ªäº›å°ç²¾çµä»¥è¾¾åˆ°ä»–çš„ç›®æ ‡å‘¢ï¼Ÿ

è¾“å…¥æ ¼å¼
è¾“å…¥æ•°æ®çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸‰ä¸ªæ•´æ•°ï¼šNï¼ŒMï¼ŒKï¼Œåˆ†åˆ«ä»£è¡¨å°æ™ºçš„ç²¾çµçƒæ•°é‡ã€çš®å¡ä¸˜åˆå§‹çš„ä½“åŠ›å€¼ã€é‡ç”Ÿå°ç²¾çµçš„æ•°é‡ã€‚

ä¹‹åçš„Kè¡Œï¼Œæ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªé‡ç”Ÿå°ç²¾çµï¼ŒåŒ…æ‹¬ä¸¤ä¸ªæ•´æ•°ï¼šæ”¶æœè¯¥å°ç²¾çµéœ€è¦çš„ç²¾çµçƒçš„æ•°é‡ï¼Œä»¥åŠæ”¶æœè¿‡ç¨‹ä¸­å¯¹çš®å¡ä¸˜é€ æˆçš„ä¼¤å®³ã€‚

è¾“å‡ºæ ¼å¼
è¾“å‡ºä¸ºä¸€è¡Œï¼ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°ï¼šCï¼ŒRï¼Œåˆ†åˆ«è¡¨ç¤ºæœ€å¤šæ”¶æœCä¸ªå°ç²¾çµï¼Œä»¥åŠæ”¶æœCä¸ªå°ç²¾çµæ—¶çš®å¡ä¸˜çš„å‰©ä½™ä½“åŠ›å€¼æœ€å¤šä¸ºRã€‚

**æ•°æ®èŒƒå›´**

0<Nâ‰¤1000, 0<Mâ‰¤500, 0<Kâ‰¤100

**è¾“å…¥æ ·ä¾‹1ï¼š**
```c
10 100 5
7 10
2 40
2 50
1 20
4 20
```
**è¾“å‡ºæ ·ä¾‹1ï¼š**
```c
3 30
```
**è¾“å…¥æ ·ä¾‹2ï¼š**
```c
10 100 5
8 110
12 10
20 10
5 200
1 110
```
**è¾“å‡ºæ ·ä¾‹2ï¼š**
```c
0 100
```

### è§£æ³•ä¸€
`dp[i][j][k]`ï¼š è€ƒè™‘å‰iä¸ªå® ç‰©ï¼Œæ¶ˆè€—jä¸ªç²¾çµçƒå’Œkç‚¹ç”Ÿå‘½å€¼ï¼Œèƒ½æ•è·çš„æœ€å¤šçš„ç²¾çµæ•°é‡ï¼Œè¿™é‡Œç›´æ¥å°†ä¸€ç»´æ¶ˆæ‰ï¼Œå°±æ˜¯ä¸ªå¤šç»´çš„01èƒŒåŒ…ï¼Œæ—¶é—´å¤æ‚åº¦`O(N*M*K)`å¤§çº¦5*10^7ï¼Œå·²ç»åœ¨Tçš„è¾¹ç¼˜äº†
```java
//å¤šç»´01èƒŒåŒ… O(N*M*K) 5 x 10^7
public static int[] solve(int N, int M, int K, int[] costN, int[] costM) {
    //dp[i][j]: æ¶ˆè€—æœ€å¤šiä¸ªç²¾çµçƒå’Œæœ€å¤šjç‚¹ç”Ÿå‘½å€¼ï¼Œèƒ½æ•æ‰çš„æœ€å¤šç²¾çµæ•°é‡
    int[][] dp = new int[N+1][M+1];
    for (int i = 0; i < K; i++) {
        for (int j = N; j >= costN[i]; j--) {
            for (int k = M; k >= costM[i]; k--) {
                //æ³¨æ„è¿™é‡ŒNå’ŒMçš„costéƒ½æ»¡è¶³æ‰èƒ½è®¡ç®—
                dp[j][k] = Math.max(dp[j][k], dp[j-costN[i]][k-costM[i]] + 1);
            }
        }
    }
    int maxCnt = dp[N][M], minCost = 0;
    //æšä¸¾å‡ºæ•è·maxCntä¸ªç²¾çµçƒï¼Œæ¶ˆè€—çš„æœ€å°ç”Ÿå‘½å€¼
    for (int i = 0; i <= M; i++) {
        if (dp[N][i] == maxCnt) {
            minCost = i;
            break;
        }
    }
    //æœ€å+1ï¼ŒæŠŠä¹‹å‰çš„åŠ å›æ¥
    return new int[]{maxCnt, M+1-minCost};
}
```

### è§£æ³•äºŒ

èƒŒåŒ…ç»´åº¦çš„è½¬æ¢ï¼Œé€‰æ‹©èŒƒå›´è¾ƒå°çš„ä½œä¸ºçŠ¶æ€å€¼ï¼Œè®¾ç½®`dp[i][j][k]`ä¸ºï¼šè€ƒè™‘å‰iä¸ªå® ç‰©ï¼Œæ•è·jä¸ªç²¾çµæ¶ˆè€—kä¸ªç²¾çµçƒï¼Œæ¶ˆè€—çš„æœ€å°‘çš„ç”Ÿå‘½å€¼ï¼Œè¿™æ ·æ—¶é—´å¤æ‚åº¦å°±å˜æˆäº†`O(K*K*N)` å¤§æ¦‚10^7ï¼Œä¹Ÿæ˜¯å¾ˆå¤§çš„ä¸€æ­¥ä¼˜åŒ–äº†ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–æˆ`O(K*K*M)`ä¸è¿‡ç¨å¾®éš¾å¤„ç†ç‚¹ï¼Œå°±ä¸å¤šå†™äº†

```java
//äº¤æ¢ç»´åº¦ï¼Œé™ä½å¤æ‚åº¦ï¼ŒO(K^2*N) = 10^7 è¿˜å¯ä»¥ä¼˜åŒ–æˆ k^2*m
public static int[] solveOpt(int N, int M, int K, int[] costN, int[] costM) {
    //dp[i][j]: æ•æ‰iä¸ªç²¾çµï¼Œæ¶ˆè€—jä¸ªç²¾çµçƒï¼Œæ¶ˆè€—çš„æœ€å°‘çš„ä½“åŠ›å€¼
    int[][] dp = new int[K+1][N+1];
    for (int i = 1; i <= K; i++) {
        for (int j = 0; j <= N; j++) {
            dp[i][j] = 0x3f3f3f3f; 
        }
    }
    for (int i = 0; i < K; i++) {
        for (int j = K; j >= 1; j--) {
            for (int k = N; k >= costN[i]; k--) {
                if (dp[j-1][k-costN[i]] + costM[i] <= M) {
                    dp[j][k] = Math.min(dp[j][k], dp[j-1][k-costN[i]]+costM[i]);
                }
            }
        }
    }
    int maxCnt = 0;
    for (int i = K; i >= 0; i--) {
        if (dp[i][N] <= M) {
            maxCnt = i;
            break;
        }
    }
    //æœ€å+1ï¼ŒæŠŠä¹‹å‰çš„åŠ å›æ¥
    return new int[]{maxCnt, M+1-dp[maxCnt][N]};
}
```

## [HUD4501.å°æ˜ç³»åˆ—æ•…äº‹â€”â€”ä¹°å¹´è´§ï¼ˆHUDOJï¼‰](http://acm.hdu.edu.cn/showproblem.php?pid=4501)

**Problem Description**

æ˜¥èŠ‚å°†è‡³ï¼Œå°æ˜è¦å»è¶…å¸‚è´­ç½®å¹´è´§ï¼Œäºæ˜¯å°æ˜å»äº†è‡ªå·±ç»å¸¸å»çš„éƒ½å°šè¶…å¸‚ã€‚

åˆšåˆ°è¶…å¸‚ï¼Œå°æ˜å°±å‘ç°è¶…å¸‚é—¨å£èšé›†ä¸€å †äººã€‚ç”¨ç™½äº‘å¥³å£«çš„è¯è¯´å°±æ˜¯ï¼šâ€œé‚£å®¶ä¼™ï¼Œé‚£åœºé¢ï¼ŒçœŸæ˜¯äººå±±äººæµ·ï¼Œé”£é¼“å–§å¤©ï¼Œé­ç‚®é½å‘¤ï¼Œçº¢æ——æ‹›å±•ã€‚é‚£å¯çœŸæ˜¯ç›¸å½“çš„å£®è§‚å•Šï¼â€ã€‚å¥½å¥‡çš„å°æ˜èµ°è¿‡å»ï¼Œå¥‹åŠ›æŒ¤è¿‡äººç¾¤ï¼Œå‘ç°è¶…å¸‚é—¨å£è´´äº†ä¸€å¼ é€šçŸ¥ï¼Œå†…å®¹å¦‚ä¸‹

å€¼æ­¤æ–°æ˜¥ä½³èŠ‚æ¥ä¸´ä¹‹é™…ï¼Œä¸ºäº†å›é¦ˆå¹¿å¤§é¡¾å®¢çš„æ”¯æŒå’Œåšçˆ±ï¼Œç‰¹ä¸¾è¡Œæ˜¥èŠ‚å¤§é…¬å®¾ã€ä¼˜æƒ å¤§æ”¾é€æ´»åŠ¨ã€‚å‡¡æ˜¯éƒ½å°šä¼šå‘˜éƒ½å¯ç”¨ä¼šå‘˜ç§¯åˆ†å…‘æ¢å•†å“ï¼Œå‡¡æ˜¯éƒ½å°šä¼šå‘˜éƒ½å¯**å…è´¹æ‹¿kä»¶å•†å“**ï¼Œå‡¡æ˜¯è´­ç‰©é¡¾å®¢å‡æœ‰å¥½ç¤¼ç›¸é€ã€‚æ»¡100å…ƒé€bla bla bla blaï¼Œæ»¡200å…ƒé€bla bla bla bla bla...blablabla....

è¿˜æ²¡çœ‹å®Œé€šçŸ¥ï¼Œå°æ˜å°±é«˜å…´çš„è¦æ­»ï¼Œå› ä¸ºä»–å°±æ˜¯éƒ½å°šçš„ä¼šå‘˜å•Šã€‚è¿«ä¸åŠå¾…çš„å°æ˜åœ¨è¶…å¸‚é€›äº†ä¸€åœˆå‘ç°è¶…å¸‚é‡Œæœ‰**nä»¶ä»–æƒ³è¦çš„å•†å“**ã€‚å°æ˜é¡ºä¾¿å¯¹è¿™nä»¶å•†å“æ‰“äº†åˆ†ï¼Œè¡¨ç¤ºå•†å“çš„å®é™…ä»·å€¼ã€‚å°æ˜å‘ç°èº«ä¸Šå¸¦äº†**v1çš„äººæ°‘å¸**ï¼Œä¼šå‘˜å¡é‡Œé¢æœ‰**v2çš„ç§¯åˆ†**ã€‚ä»–æƒ³çŸ¥é“ä»–æœ€å¤šèƒ½ä¹°å¤šå¤§ä»·å€¼çš„å•†å“ã€‚

ç”±äºå°æ˜æƒ³è¦çš„å•†å“å®åœ¨å¤ªå¤šäº†ï¼Œä»–ç®—äº†åŠå¤©å¤´éƒ½ç–¼äº†ä¹Ÿæ²¡ç®—å‡ºæ¥ï¼Œæ‰€ä»¥è¯·ä½ è¿™ä½èªæ˜çš„ç¨‹åºå‘˜æ¥å¸®å¸®ä»–å§ã€‚
 

**Input**
```go
è¾“å…¥åŒ…å«å¤šç»„æµ‹è¯•ç”¨ä¾‹ã€‚
æ¯ç»„æ•°æ®çš„ç¬¬ä¸€è¡Œæ˜¯å››ä¸ªæ•´æ•°nï¼Œv1ï¼Œv2ï¼Œkï¼›
ç„¶åæ˜¯nè¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•°aï¼Œbï¼Œvalï¼Œåˆ†åˆ«è¡¨ç¤ºæ¯ä¸ªå•†å“çš„ä»·é’±ï¼Œå…‘æ¢æ‰€éœ€ç§¯åˆ†ï¼Œå®é™…ä»·å€¼ã€‚
[Technical Specification]
1 <= n <= 100
0 <= v1, v2 <= 100
0 <= k <= 5
0 <= a, b, val <= 100

Ps. åªè¦é’±æˆ–è€…ç§¯åˆ†æ»¡è¶³è´­ä¹°ä¸€ä»¶å•†å“çš„è¦æ±‚ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¹°ä¸‹è¿™ä»¶å•†å“ã€‚
```

**Output**
```go
å¯¹äºæ¯ç»„æ•°æ®ï¼Œè¾“å‡ºèƒ½ä¹°çš„æœ€å¤§ä»·å€¼ã€‚
è¯¦ç»†ä¿¡æ¯è§Sampleã€‚
```
**Sample Input**

```go
5 1 6 1
4 3 3
0 3 2
2 3 3
3 3 2
1 0 2
4 2 5 0
0 1 0
4 4 1
3 3 4
3 4 4
```

**Sample Output**

```go
12
4
```
Source
2013è…¾è®¯ç¼–ç¨‹é©¬æ‹‰æ¾åˆèµ›ç¬¬ã€‡åœºï¼ˆ3æœˆ20æ—¥ï¼‰

### è§£æ³•ä¸€
> å¾ˆä¹…ä¹‹å‰åšè¿‡çš„é¢˜ï¼Œæ‹¿å‡ºæ¥å¯¹æ¯”ä¸‹

ä¸‰ç»´è´¹ç”¨çš„èƒŒåŒ…ï¼Œä½†æ˜¯å’Œå‰é¢çš„é¢˜æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œä¸‰ä¸ªç»´åº¦çš„è´¹ç”¨æ˜¯æ— å…³çš„ï¼Œä¸Šé¢çš„å°ç²¾çµï¼Œæ¶ˆè€—çš„ç²¾çµçƒå’Œç”Ÿå‘½å€¼æ˜¯ç›¸å…³çš„ï¼Œæ‰€ä»¥ä¸¤ä¸ªç»´åº¦çš„è´¹ç”¨éœ€è¦åŒæ—¶æ»¡è¶³æ‰èƒ½åšåˆæ³•çš„è®¡ç®—ï¼Œè€Œè¿™é‡Œå¹¶ä¸éœ€è¦å…¨éƒ¨æ»¡è¶³ï¼Œè€Œæ˜¯åˆ†åˆ«è®¡ç®—
```java
import java.util.*;
import java.io.*;// petrçš„è¾“å…¥æ¨¡æ¿
import java.math.*; // ä¸æ˜¯å¤§æ•°é¢˜å¯ä»¥ä¸è¦è¿™ä¸ª

public class Solve_HDOJ_4501 {

    public static PrintWriter out = new PrintWriter(new OutputStreamWriter(System.out));

    public static void main(String[] args) throws Exception{
        InputReader in = new InputReader(System.in);
        //InputReader in = new InputReader(new FileInputStream("./input.txt"));
        while(!in.EOF()) {
            int n = in.nextInt();
            int v1 = in.nextInt();
            int v2 = in.nextInt();
            int k = in.nextInt();
            int[][] cost = new int[n][3];
            for (int i = 0; i < n; i++) {
                cost[i][0] = in.nextInt();
                cost[i][1] = in.nextInt();
                cost[i][2] = in.nextInt();
            }
            solve(n, v1, v2, k, cost);
        }
        //åˆ«å¿˜äº†flush
        out.flush();
        out.close();
    }

    //å› ä¸ºæ•°æ®é‡ä¸å¤§ï¼Œå°±ç›´æ¥Scanneräº†
    public static void solve(int n, int v1, int v2, int k, int[][] cost) {
        int[][][] dp = new int[k+1][v1+1][v2+1];
        for (int i = 0; i < n; i++) {
            for (int j = k; j >= 0; j--) {
                for (int u = v1; u >= 0; u--) {
                    for (int w = v2; w >= 0; w--) {
                        //è¿™é‡Œä¸èƒ½ç›´æ¥u>=cost[i][0] w >= cost[i][1]ï¼Œå› ä¸ºç§¯åˆ†å’Œé’±å’Œå…è´¹æ‹¿æ˜¯åˆ†å¼€çš„ï¼Œæ²¡æœ‰å…³è”çš„
                        //å³ä½¿æˆ‘ä¸èƒ½å…è´¹æ‹¿ï¼Œä½†æ˜¯æˆ‘èƒ½ç”¨ç§¯åˆ†æ‹¿ï¼Œå³ä½¿ä¸èƒ½ç”¨ç§¯åˆ†æ‹¿ï¼Œæˆ‘å¯ä»¥ç”¨é’±ä¹°
                        //dp[j][u][w] = Math.max(dp[j][u][w], dp[j-1][u-cost[i][0]][w-cost[i][1]] + cost[i][2]);
                        int ans = 0;
                        if (j >= 1) { //å…è´¹æ‹¿
                            ans = Math.max(ans, dp[j-1][u][w] + cost[i][2]);
                        }
                        if (u >= cost[i][0]) { //é’±
                            ans = Math.max(ans, dp[j][u-cost[i][0]][w] + cost[i][2]);
                        }
                        if (w >= cost[i][1]) { //ç§¯åˆ†
                            ans = Math.max(ans, dp[j][u][w-cost[i][1]] + cost[i][2]);
                        }
                        dp[j][u][w] = Math.max(ans, dp[j][u][w]);
                    }
                }
            }
        }
        out.println(dp[k][v1][v2]);
    }
}


class InputReader {

    public BufferedReader reader;
    
    public StringTokenizer tokenizer;

    public InputReader(InputStream stream) {
        //char[32768]
        reader = new BufferedReader(new InputStreamReader(stream), 32768);
        tokenizer = null;
    }

    //é»˜è®¤ä»¥" "ä½œä¸ºåˆ†éš”ç¬¦ï¼Œè¯»ä¸€ä¸ª
    public String next() {
        while (tokenizer == null || !tokenizer.hasMoreTokens()) {
            try {
                tokenizer = new StringTokenizer(reader.readLine());
            } catch (IOException e) {
                throw new RuntimeException(e);
            }
        }
        return tokenizer.nextToken();
    }

    //æœ‰çš„é¢˜ç›®ä¸ç»™æœ‰å¤šå°‘ç»„æµ‹è¯•ç”¨ä¾‹ï¼Œåªèƒ½ä¸€ç›´è¯»ï¼Œè¯»åˆ°ç»“å°¾ï¼Œéœ€è¦è‡ªå·±åˆ¤æ–­ç»“æŸ
    //è¯¥å‡½æ•°ä¹Ÿä¼šè¯»å–ä¸€è¡Œï¼Œå¹¶åˆå§‹åŒ–tokenizerï¼Œååºç›´æ¥nextInt..ç­‰å°±å¯ä»¥è¯»åˆ°è¯¥è¡Œ
    public boolean EOF() {
        String str = null;
        try {
            str = reader.readLine();
            if (str == null) {
                return true;
            }
            //åˆ›å»ºtokenizer
            tokenizer = new StringTokenizer(str);
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
        return false;
    }

    int nextInt(){
        return Integer.parseInt(next());
    }
    
    long nextLong(){
        return Long.parseLong(next());
    }
    
    double nextDouble(){
        return Double.parseDouble(next());
    }
    
    BigInteger nextBigInteger(){
        return new BigInteger(next());
    }

    BigDecimal nextBigDecimal(){
        return new BigDecimal(next());
    }
}
```

## [1023. ä¹°ä¹¦](https://www.acwing.com/problem/content/1025/)

å°æ˜æ‰‹é‡Œæœ‰nå…ƒé’±å…¨éƒ¨ç”¨æ¥ä¹°ä¹¦ï¼Œä¹¦çš„ä»·æ ¼ä¸º10å…ƒï¼Œ20å…ƒï¼Œ50å…ƒï¼Œ100å…ƒã€‚

é—®å°æ˜æœ‰å¤šå°‘ç§ä¹°ä¹¦æ–¹æ¡ˆï¼Ÿï¼ˆæ¯ç§ä¹¦å¯è´­ä¹°å¤šæœ¬ï¼‰ 0 â‰¤ n â‰¤ 1000

### è§£æ³•ä¸€

å®Œå…¨èƒŒåŒ…ï¼Œä»å¤´è‡ªå·±æ¨äº†ä¸‹é€’æ¨å…¬å¼ï¼Œç†è§£æ›´æ·±äº†ä¸€ç‚¹
![](https://i.loli.net/2020/12/15/ljZW8eI4NkV6bCB.png)
```java
//å®Œå…¨èƒŒåŒ…
public static int solve(int N) {
    //dp[i][j]: è€ƒè™‘å‰iæœ¬ä¹¦ï¼Œå‡‘é½jä»·å€¼çš„ç§ç±»æ•°
    int[][] dp = new int[5][N+1];
    //dp[i][j] = dp[i-1][j] + dp[i-1][j-c[i]] + dp[i-1][j-2*c[i]] + ... + dp[i-1][k*c[i]]
    //dp[i][j-c[i]] = dp[i-1][j-c[i]] + dp[i-1][j-2*c[i]] + ... + dp[i-1][k*c[i]]
    //dp[i][j] = dp[i-1][j] + dp[i][j-c[i]]
    dp[0][0] = 1;
    for (int i = 1; i <= 4; i++) {
        for (int j = 0; j <= N; j++) {
            dp[i][j] = dp[i-1][j];
            if (j >= price[i-1]) {
                dp[i][j] += dp[i][j-price[i-1]];
            }
        }
    }
    return dp[4][N];
}
```
é™ç»´
```java
//ç©ºé—´ä¼˜åŒ–
public static int solveOpt(int N) {
    //dp[i][j]: è€ƒè™‘å‰iæœ¬ä¹¦ï¼Œå‡‘é½jä»·å€¼çš„ç§ç±»æ•°
    int[] dp = new int[N+1];
    dp[0] = 1;
    for (int i = 1; i <= 4; i++) {
        for (int j = price[i-1]; j <= N; j++) {
            dp[j] += dp[j-price[i-1]];
        }
    }
    return dp[N];
}
```
[1021. è´§å¸ç³»ç»Ÿ](https://www.acwing.com/problem/content/1023/)å’Œè¿™ä¸ªä¸€æ ·ï¼Œä¸å¤šå†™

## [532. è´§å¸ç³»ç»Ÿï¼ˆNOIP2018ï¼‰](https://www.acwing.com/problem/content/534/)

åœ¨ç½‘å‹çš„å›½åº¦ä¸­å…±æœ‰â€‚nâ€‚ç§ä¸åŒé¢é¢çš„è´§å¸ï¼Œç¬¬â€‚iâ€‚ç§è´§å¸çš„é¢é¢ä¸ºâ€‚a[i]ï¼Œä½ å¯ä»¥å‡è®¾æ¯ä¸€ç§è´§å¸éƒ½æœ‰æ— ç©·å¤šå¼ ã€‚

ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬æŠŠè´§å¸ç§æ•°ä¸ºâ€‚nã€é¢é¢æ•°ç»„ä¸ºâ€‚a[1..n]â€‚çš„è´§å¸ç³»ç»Ÿè®°ä½œâ€‚(n,a)ã€‚â€‚

åœ¨ä¸€ä¸ªå®Œå–„çš„è´§å¸ç³»ç»Ÿä¸­ï¼Œæ¯ä¸€ä¸ªéè´Ÿæ•´æ•°çš„é‡‘é¢â€‚xâ€‚éƒ½åº”è¯¥å¯ä»¥è¢«è¡¨ç¤ºå‡ºï¼Œå³å¯¹æ¯ä¸€ä¸ªéè´Ÿæ•´æ•°â€‚xï¼Œéƒ½å­˜åœ¨â€‚nâ€‚ä¸ªéè´Ÿæ•´æ•°â€‚t[i]â€‚æ»¡è¶³â€‚a[i]Ã—â€‚t[i]â€‚çš„å’Œä¸ºâ€‚xã€‚

ç„¶è€Œï¼Œåœ¨ç½‘å‹çš„å›½åº¦ä¸­ï¼Œè´§å¸ç³»ç»Ÿå¯èƒ½æ˜¯ä¸å®Œå–„çš„ï¼Œå³å¯èƒ½å­˜åœ¨é‡‘é¢â€‚xâ€‚ä¸èƒ½è¢«è¯¥è´§å¸ç³»ç»Ÿè¡¨ç¤ºå‡ºã€‚

ä¾‹å¦‚åœ¨è´§å¸ç³»ç»Ÿâ€‚n=3,â€‚a=[2,5,9]â€‚ä¸­ï¼Œé‡‘é¢â€‚1,3â€‚å°±æ— æ³•è¢«è¡¨ç¤ºå‡ºæ¥ã€‚â€‚

ä¸¤ä¸ªè´§å¸ç³»ç»Ÿâ€‚(n,a)â€‚å’Œâ€‚(m,b)â€‚æ˜¯ç­‰ä»·çš„ï¼Œå½“ä¸”ä»…å½“å¯¹äºä»»æ„éè´Ÿæ•´æ•°â€‚xï¼Œå®ƒè¦ä¹ˆå‡å¯ä»¥è¢«ä¸¤ä¸ªè´§å¸ç³»ç»Ÿè¡¨å‡ºï¼Œè¦ä¹ˆä¸èƒ½è¢«å…¶ä¸­ä»»ä½•ä¸€ä¸ªè¡¨å‡ºã€‚â€‚

ç°åœ¨ç½‘å‹ä»¬æ‰“ç®—ç®€åŒ–ä¸€ä¸‹è´§å¸ç³»ç»Ÿã€‚

ä»–ä»¬å¸Œæœ›æ‰¾åˆ°ä¸€ä¸ªè´§å¸ç³»ç»Ÿâ€‚(m,b)ï¼Œæ»¡è¶³â€‚(m,b)â€‚ä¸åŸæ¥çš„è´§å¸ç³»ç»Ÿâ€‚(n,a)â€‚ç­‰ä»·ï¼Œä¸”â€‚mâ€‚å°½å¯èƒ½çš„å°ã€‚

ä»–ä»¬å¸Œæœ›ä½ æ¥ååŠ©å®Œæˆè¿™ä¸ªè‰°å·¨çš„ä»»åŠ¡ï¼šæ‰¾åˆ°æœ€å°çš„â€‚mã€‚

**è¾“å…¥æ ¼å¼**

è¾“å…¥æ–‡ä»¶çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°â€‚Tï¼Œè¡¨ç¤ºæ•°æ®çš„ç»„æ•°ã€‚

æ¥ä¸‹æ¥æŒ‰ç…§å¦‚ä¸‹æ ¼å¼åˆ†åˆ«ç»™å‡ºTç»„æ•°æ®ã€‚â€‚

æ¯ç»„æ•°æ®çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ­£æ•´æ•°â€‚nã€‚

æ¥ä¸‹æ¥ä¸€è¡ŒåŒ…å«â€‚nâ€‚ä¸ªç”±ç©ºæ ¼éš”å¼€çš„æ­£æ•´æ•°â€‚a[i]ã€‚

**è¾“å‡ºæ ¼å¼**

è¾“å‡ºæ–‡ä»¶å…±æœ‰Tè¡Œï¼Œå¯¹äºæ¯ç»„æ•°æ®ï¼Œè¾“å‡ºä¸€è¡Œä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºæ‰€æœ‰ä¸â€‚(n,a)â€‚ç­‰ä»·çš„è´§å¸ç³»ç»Ÿâ€‚(m,b)â€‚ä¸­ï¼Œæœ€å°çš„â€‚mã€‚

**æ•°æ®èŒƒå›´** : 1â‰¤nâ‰¤100, 1â‰¤a[i]â‰¤25000, 1â‰¤Tâ‰¤20

**è¾“å…¥æ ·ä¾‹ï¼š**
```c
2 
4 
3 19 10 6 
5 
11 29 13 19 17 
```
**è¾“å‡ºæ ·ä¾‹ï¼š**
```c
2
5
```

### è§£æ³•ä¸€
è¿™é‡Œç”¨äº†ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆæ˜¾ç„¶çš„ç»“è®ºï¼šç®€åŒ–åçš„è´§å¸ç³»ç»Ÿ`(m,b)`ï¼Œå°±æ˜¯åœ¨åŸè´§å¸ç³»ç»Ÿ`(m,a)`ä¸­ï¼Œå‰”é™¤æ‰€æœ‰èƒ½è¢«è‡ªåˆ†è§£çš„æ•°å¾—åˆ°çš„ã€‚åˆ¤æ–­é›†åˆä¸­ä¸€ä¸ªæ•°èƒ½å¦è¢«å…¶ä»–çš„æ•°æ„æˆï¼Œå…¶å®é—®é¢˜å°±å˜æˆäº†å®Œå…¨èƒŒåŒ…æ±‚æ–¹æ¡ˆæ•°ï¼Œæœ€åæ±‚å¾—æ–¹æ¡ˆæ•°ä¸º1çš„å°±æ˜¯ä¸èƒ½è¢«åˆ†è§£çš„æ•°ï¼Œç»Ÿè®¡ä¸‹ç»“æœå°±okäº†
```java
public static int solve(int[] w) {
    int n = w.length;
    int max = 0;
    for (int i = 0; i < n; i++) {
        max = Math.max(max, w[i]);
    }
    int[] dp = new int[25001];
    dp[0] = 1;
    //å®Œå…¨èƒŒåŒ…æ±‚æ„æˆæ¯ä¸ªå€¼çš„æ–¹æ¡ˆæ•°
    for (int i = 0; i < n; i++) {
        for (int j = w[i]; j <= max; j++) {
            dp[j] += dp[j-w[i]];
        }
    }
    int res = 0;
    //æ–¹æ¡ˆæ•°ä¸º1çš„å°±è¯´æ˜æ˜¯ä¸èƒ½ä¸¢æ‰çš„ï¼Œç»Ÿè®¡ä¸€ä¸‹å°±ok
    for (int i = 0; i < n; i++) {
        if (dp[w[i]] == 1) {
            res++;
        }
    }
    return res;
}
```
çœ‹èµ·æ¥å¾ˆæ˜¾ç„¶çš„ç»“è®ºçš„[è¯æ˜](https://www.cnblogs.com/UntitledCpp/p/14083854.html#day1-t2-%E8%B4%A7%E5%B8%81%E7%B3%BB%E7%BB%9F)

## [6. å¤šé‡èƒŒåŒ…é—®é¢˜ III](https://www.acwing.com/problem/content/6/)
æœ‰ N ç§ç‰©å“å’Œä¸€ä¸ªå®¹é‡æ˜¯ V çš„èƒŒåŒ…ã€‚

ç¬¬ i ç§ç‰©å“æœ€å¤šæœ‰ si ä»¶ï¼Œæ¯ä»¶ä½“ç§¯æ˜¯ viï¼Œä»·å€¼æ˜¯ wiã€‚

æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä½¿ç‰©å“ä½“ç§¯æ€»å’Œä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”ä»·å€¼æ€»å’Œæœ€å¤§ã€‚
è¾“å‡ºæœ€å¤§ä»·å€¼ã€‚

**è¾“å…¥æ ¼å¼**

ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°ï¼ŒNï¼ŒV (0<Nâ‰¤1000, 0<Vâ‰¤20000) ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç‰©å“ç§æ•°å’ŒèƒŒåŒ…å®¹ç§¯ã€‚

æ¥ä¸‹æ¥æœ‰ N è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•° vi,wi,siï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬ i ç§ç‰©å“çš„ä½“ç§¯ã€ä»·å€¼å’Œæ•°é‡ã€‚

**è¾“å‡ºæ ¼å¼**

è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§ä»·å€¼ã€‚

**æ•°æ®èŒƒå›´** : 0<Nâ‰¤1000, 0<Vâ‰¤20000, 0<vi,wi,siâ‰¤20000

**è¾“å…¥æ ·ä¾‹**
```c
4 5
1 2 3
2 4 1
3 4 3
4 5 2
```

**è¾“å‡ºæ ·ä¾‹ï¼š**
```c
10
```
### è§£æ³•ä¸€
æš´åŠ›çš„åšæ³•ï¼Œæ—¶é—´å¤æ‚åº¦`O(NVS)`ï¼Œ4e11äº†ï¼Œæ‰€ä»¥å¿…ç„¶æ˜¯è¿‡ä¸äº†OJçš„
```java
import java.util.*;
import java.io.*;
class Main {

    //dp[i][j]=Max(dp[i-1][j], dp[i-1][j-v]+w, dp[i-1][j-2*v]+2*w,... dp[i-1][j-s*v]+s*w)
    public static void main(String[] args) throws Exception {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        int[] in = read(br);
        int N = in[0];
        int M = in[1];
        int[][] dp = new int[N+1][M+1];
        LinkedList<Integer> queue = new LinkedList<>();
        for (int i = 1; i <= N; i++) {
            int[] temp = read(br);
            int v = temp[0], w = temp[1], s = temp[2];
            for (int j = 0; j <= M; j++) {
                for (int k = 0; k <= s && k*v <= j; k++) {
                    dp[i][j] = Math.max(dp[i][j], dp[i-1][j-k*v]+k*w);
                }
            }
        }
        System.out.println(dp[N][M]);
    }

    private static int[] read(BufferedReader br) throws IOException {
        return Arrays.stream(br.readLine().split(" ")).mapToInt(Integer::parseInt).toArray();
    }
}
```
### è§£æ³•äºŒ
äºŒè¿›åˆ¶ä¼˜åŒ–çš„æ–¹æ³•ï¼Œæ˜å¤©å†çœ‹ğŸ˜
### è§£æ³•ä¸‰

å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–DPï¼Œæœ‰ç‚¹éš¾åº¦ï¼Œçœ‹é¢˜è§£éƒ½çœ‹äº†å¥½ä¹…æ‰ç†è§£ã€‚ã€‚ã€‚

é¦–å…ˆæˆ‘ä»¬å¾ˆå®¹æ˜“å¾—åˆ°æ•´ä½“çš„é€’æ¨å…¬å¼: `dp[i][j]`ä»£è¡¨å‰iä¸ªç‰©å“ï¼ŒèƒŒåŒ…ä½“ç§¯ä¸ºjæ—¶ï¼Œèƒ½è£…çš„æœ€å¤§ä»·å€¼

$$dp[i][j]=\max(dp[iâˆ’1][j], dp[iâˆ’1][jâˆ’v]+w, dp[iâˆ’1][jâˆ’2âˆ—v]+2âˆ—w,â€¦ dp[iâˆ’1][jâˆ’sâˆ—v]+sâˆ—w)$$

å…¶å®å’Œå‰é¢å®Œå…¨èƒŒåŒ…å·®ä¸å¤šï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªç‰©å“æ•°é‡sçš„é™åˆ¶ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°`dp[i][j]`åªå’Œj-v, j-2v, j-3vè¿™äº›çŠ¶æ€æœ‰å…³ï¼Œè€Œè¿™äº›çŠ¶æ€é™¤ä»¥véƒ½æ˜¯åŒä½™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†è¿™äº›çŠ¶æ€æŒ‰ä½™æ•°åˆ’åˆ†ä¸ºä¸åŒçš„ç»„ï¼Œä½™æ•°`r`çš„èŒƒå›´æ˜¯`[0, v)`

è½¬ç§»æ–¹ç¨‹å˜ä¸º
```java
// 0 <= r < v
dp[i][r]    =     dp[i-1][r]
dp[i][r+v]  = max(dp[i-1][r] +  w,  dp[i-1][r+v])
dp[i][r+2v] = max(dp[i-1][r] + 2w,  dp[i-1][r+v] +  w, dp[i-1][r+2v])
dp[i][r+3v] = max(dp[i-1][r] + 3w,  dp[i-1][r+v] + 2w, dp[i-1][r+2v] + w, dp[i-1][r+3v])
```
è¿™ä¸ªæ—¶å€™å…¶å®æˆ‘ä»¬å·²ç»å¯ä»¥å‘ç°ä¸€äº›ç«¯å€ªäº†ï¼Œåä¸€é¡¹éƒ½æ˜¯å‰ä¸€é¡¹åŠ ä¸Šä¸€ä¸ªå€¼å†åŠ ä¸Šä¸€äº›åç§»é‡å†å–Maxçš„å€¼ï¼Œæˆ‘ä»¬å†å°†å…¶å˜å½¢ä¸€ä¸‹
```java
// 0 <= r < v
dp[i][r]    =     dp[i-1][r]
dp[i][r+v]  = max(dp[i-1][r],  dp[i-1][r+v] - w) + w
dp[i][r+2v] = max(dp[i-1][r],  dp[i-1][r+v] - w, dp[i-1][r+2v] - 2w) + 2w
dp[i][r+3v] = max(dp[i-1][r],  dp[i-1][r+v] - w, dp[i-1][r+2v] - 2w, dp[i-1][r+3v] - 3w) + 3w
```
ç°åœ¨å…¶å®å°±å¾ˆæ˜æ˜¾äº†ï¼Œmaxå†…å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ»‘çª—ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å•è°ƒé˜Ÿåˆ—å»ç»´æŠ¤æ»‘çª—çš„æœ€å¤§å€¼ï¼ˆ[æ¨¡æ¿](http://imlgw.top/2019/07/20/leetcode-hua-dong-chuang-kou/#239-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%9C%80%E5%A4%A7%E5%80%BC)ï¼‰

å…·ä½“ä»£ç å¦‚ä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦`O(NM)`ï¼Œè¿˜å¯ä»¥ç”¨æ»šåŠ¨æ•°ç»„å»ä¼˜åŒ–ç©ºé—´ï¼Œè¿™é‡Œå°±ä¸å†™äº†ï¼Œä¸ç„¶ä»£ç å˜å¾—æ›´åŠ éš¾æ‡‚äº†
```java
import java.util.*;
import java.io.*;
class Main {

    //dp[i][j]   = Max(dp[i-1][j], dp[i-1][j-v]+w, dp[i-1][j-2*v]+2*w,... dp[i-1][j-s*v]+s*w)
    public static void main(String[] args) throws Exception {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        int[] in = read(br);
        int N = in[0];
        int M = in[1];
        int[][] dp = new int[N+1][M+1];
        //å•è°ƒé˜Ÿåˆ—æ±‚æœ€å¤§å€¼
        LinkedList<int[]> queue = new LinkedList<>();
        for (int i = 1; i <= N; i++) {
            int[] temp = read(br);
            int v = temp[0], w = temp[1], s = temp[2];
            //æšä¸¾ä½™æ•°[0, v)
            for (int r = 0; r < v; r++) {
                queue.clear();
                //æšä¸¾åŒä½™æ‰€æœ‰çŠ¶æ€dp[j] dp[j+v] dp[j+2v]....
                for (int k = 0; r+k*v <= M; k++) {
                    int val = dp[i-1][r+k*v] - k*w;
                    while (!queue.isEmpty() && queue.getLast()[0] < val) {
                        queue.removeLast();
                    }
                    //åŒä½™çš„æ•°ç»„å…ƒç´ æ•°é‡å¯èƒ½è¶…è¿‡åŒä¸€ç‰©å“çš„ä½¿ç”¨æ¬¡æ•°s
                    //åŒºé—´å†…ä½¿ç”¨æ¬¡æ•°: ((r+k*v)-(r+q.first()[1]*v)) / v = k-q.first()[1]
                    if (!queue.isEmpty() && k - queue.getFirst()[1] > s) {
                        queue.removeFirst();
                    }
                    queue.addLast(new int[]{val, k});
                    dp[i][r+k*v] = queue.getFirst()[0] + k*w;
                }
            }
        }
        System.out.println(dp[N][M]);
    }

    private static int[] read(BufferedReader br) throws IOException {
        return Arrays.stream(br.readLine().split(" ")).mapToInt(Integer::parseInt).toArray();
    }
}
```
è¿˜æ˜¯æœ‰ç‚¹éš¾åº¦å–”ï¼Œè¿™é¢˜è™½ç„¶ææ‡‚äº†ï¼Œä½†æ˜¯ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼çš„é¢˜è¿˜æ˜¯ä¸ä¸€å®šä¼šğŸ˜‚
## [1019. åº†åŠŸä¼š](https://www.acwing.com/problem/content/description/1021/)
ä¸ºäº†åº†è´ºç­çº§åœ¨æ ¡è¿åŠ¨ä¼šä¸Šå–å¾—å…¨æ ¡ç¬¬ä¸€åæˆç»©ï¼Œç­ä¸»ä»»å†³å®šå¼€ä¸€åœºåº†åŠŸä¼šï¼Œä¸ºæ­¤æ‹¨æ¬¾è´­ä¹°å¥–å“çŠ’åŠ³è¿åŠ¨å‘˜ã€‚

æœŸæœ›æ‹¨æ¬¾é‡‘é¢èƒ½è´­ä¹°æœ€å¤§ä»·å€¼çš„å¥–å“ï¼Œå¯ä»¥è¡¥å……ä»–ä»¬çš„ç²¾åŠ›å’Œä½“åŠ›ã€‚

**è¾“å…¥æ ¼å¼**

ç¬¬ä¸€è¡ŒäºŒä¸ªæ•°nï¼Œmï¼Œå…¶ä¸­nä»£è¡¨å¸Œæœ›è´­ä¹°çš„å¥–å“çš„ç§æ•°ï¼Œmè¡¨ç¤ºæ‹¨æ¬¾é‡‘é¢ã€‚

æ¥ä¸‹æ¥nè¡Œï¼Œæ¯è¡Œ3ä¸ªæ•°ï¼Œvã€wã€sï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬Iç§å¥–å“çš„ä»·æ ¼ã€ä»·å€¼ï¼ˆä»·æ ¼ä¸ä»·å€¼æ˜¯ä¸åŒçš„æ¦‚å¿µï¼‰å’Œèƒ½è´­ä¹°çš„æœ€å¤§æ•°é‡ï¼ˆä¹°0ä»¶åˆ°sä»¶å‡å¯ï¼‰ã€‚

**è¾“å‡ºæ ¼å¼**

ä¸€è¡Œï¼šä¸€ä¸ªæ•°ï¼Œè¡¨ç¤ºæ­¤æ¬¡è´­ä¹°èƒ½è·å¾—çš„æœ€å¤§çš„ä»·å€¼ï¼ˆæ³¨æ„ï¼ä¸æ˜¯ä»·æ ¼ï¼‰ã€‚

**æ•°æ®èŒƒå›´** ï¼šnâ‰¤500, mâ‰¤6000, vâ‰¤100, wâ‰¤1000, sâ‰¤10

**è¾“å…¥æ ·ä¾‹ï¼š**
```c
5 1000
80 20 4
40 50 9
30 50 7
40 30 6
20 20 1
```
**è¾“å‡ºæ ·ä¾‹ï¼š**
```c
1040
```
### è§£æ³•ä¸€

æš´åŠ›è§£æ³•ï¼Œè¿™é¢˜æ•°æ®è¾ƒå°3e7å¯ä»¥è¿‡
```java
//æ¯ä¸ªç‰©å“æœ‰kä¸ªæ•°é‡çš„é™åˆ¶åï¼Œé—®é¢˜å°±å˜æˆäº†01èƒŒåŒ…
//dp[i][j] = Max(dp[i-1][j], dp[i-1][j-v[i]]+w[i], dp[i-1][j-2*v[i]]+2*w[i], ... dp[i-1][j-s[i]*v[i]] + s[i]*w[i]) 
public static int solve (int m, int[] v, int[] w, int[] s) {
    int n = v.length;
    int[] dp = new int[m+1];
    for (int i = 0; i < n; i++) {
        //é€†åºé¿å…è¦†ç›–
        for (int j = m; j >= v[i]; j--) {
            for (int k = s[i]; k >= 0; k--) {
                if (j-k*v[i] < 0) continue;
                dp[j] = Math.max(dp[j], dp[j-k*v[i]] + k*w[i]);
            }
        }
    }
    return dp[m];
}
```
å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–å’Œä¸Šé¢ä¸€æ‘¸ä¸€æ ·ï¼Œä¸å†™äº†

## [7. æ··åˆèƒŒåŒ…é—®é¢˜](https://www.acwing.com/problem/content/7/)

æœ‰ N ç§ç‰©å“å’Œä¸€ä¸ªå®¹é‡æ˜¯ V çš„èƒŒåŒ…ã€‚

ç‰©å“ä¸€å…±æœ‰ä¸‰ç±»ï¼š

ç¬¬ä¸€ç±»ç‰©å“åªèƒ½ç”¨1æ¬¡ï¼ˆ01èƒŒåŒ…ï¼‰ï¼›
ç¬¬äºŒç±»ç‰©å“å¯ä»¥ç”¨æ— é™æ¬¡ï¼ˆå®Œå…¨èƒŒåŒ…ï¼‰ï¼›
ç¬¬ä¸‰ç±»ç‰©å“æœ€å¤šåªèƒ½ç”¨ si æ¬¡ï¼ˆå¤šé‡èƒŒåŒ…ï¼‰ï¼›
æ¯ç§ä½“ç§¯æ˜¯ viï¼Œä»·å€¼æ˜¯ wiã€‚

æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä½¿ç‰©å“ä½“ç§¯æ€»å’Œä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”ä»·å€¼æ€»å’Œæœ€å¤§ã€‚
è¾“å‡ºæœ€å¤§ä»·å€¼ã€‚

**è¾“å…¥æ ¼å¼**

ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°ï¼ŒNï¼ŒVï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç‰©å“ç§æ•°å’ŒèƒŒåŒ…å®¹ç§¯ã€‚

æ¥ä¸‹æ¥æœ‰ N è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•° vi,wi,siï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬ i ç§ç‰©å“çš„ä½“ç§¯ã€ä»·å€¼å’Œæ•°é‡ã€‚

- si=âˆ’1 è¡¨ç¤ºç¬¬ i ç§ç‰©å“åªèƒ½ç”¨1æ¬¡ï¼›
- si=0 è¡¨ç¤ºç¬¬ i ç§ç‰©å“å¯ä»¥ç”¨æ— é™æ¬¡ï¼›
- si>0 è¡¨ç¤ºç¬¬ i ç§ç‰©å“å¯ä»¥ä½¿ç”¨ si æ¬¡ï¼›

**è¾“å‡ºæ ¼å¼**

è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§ä»·å€¼ã€‚

**æ•°æ®èŒƒå›´**ï¼š0<N,Vâ‰¤1000ï¼Œ0<vi,wiâ‰¤1000 ï¼Œâˆ’1â‰¤siâ‰¤1000

**è¾“å…¥æ ·ä¾‹**
```c
4 5
1 2 -1
2 4 1
3 4 0
4 5 2
```
**è¾“å‡ºæ ·ä¾‹ï¼š**
```czuo1
8
```

### è§£æ³•ä¸€

å®é™…ä¸Šå°±æ˜¯æŠŠä¸‰ç§èƒŒåŒ…æ··åˆ°ä¸€èµ·ï¼Œæˆ‘ä»¬å¯¹ä¸åŒçš„ç‰©å“åšä¸åŒçš„å¤„ç†å°±è¡Œäº†ï¼Œæ¯ä¸ªç‰©å“çš„så¹¶ä¸ä¼šå½±å“åé¢çš„ç‰©å“å­˜å–
```java
import java.util.*;
import java.io.*;

class Main {
    public static void main(String[] args) throws Exception {
        BufferedReader bf = new BufferedReader(new InputStreamReader(System.in));
        int[] in = read(bf);
        int N = in[0];
        int V = in[1];
        int[] dp = new int[V+1];
        for (int i = 1; i <= N; i++) {
            int[] vws = read(bf);
            int v = vws[0], w = vws[1], s = vws[2];
            if (s == -1) s=1;
            if (s == 0) {
                for (int j = v; j <= V; j++) {
                    dp[j] = Math.max(dp[j], dp[j-v]+w);
                }
            } else {
                for (int j = V; j >= 0; j--) {
                    for (int k = 1; k <= s && j-k*v >= 0; k++) {
                        dp[j] = Math.max(dp[j], dp[j-k*v]+k*w);
                    }
                }
            }
        }
        System.out.println(dp[V]);
    }

    public static int[] read(BufferedReader br) throws Exception{
        return Arrays.stream(br.readLine().split(" ")).mapToInt(Integer::parseInt).toArray();
    }
}
```
å¤šé‡èƒŒåŒ…çš„æƒ…å†µæš‚æ—¶è¿˜æ²¡æœ‰åšä¼˜åŒ–ï¼Œç­‰åé¢çœ‹äº†äºŒè¿›åˆ¶ä¼˜åŒ–çš„æ–¹æ³•çª„æ¥è¡¥ä¸€å‘ï¼Œå•è°ƒé˜Ÿåˆ—ä¼˜åŒ–çš„ä¸å¤ªæƒ³å†™

## [1013. æœºå™¨åˆ†é…](https://www.acwing.com/problem/content/1015/)

æ€»å…¬å¸æ‹¥æœ‰Må° ç›¸åŒ çš„é«˜æ•ˆè®¾å¤‡ï¼Œå‡†å¤‡åˆ†ç»™ä¸‹å±çš„Nä¸ªåˆ†å…¬å¸ã€‚

å„åˆ†å…¬å¸è‹¥è·å¾—è¿™äº›è®¾å¤‡ï¼Œå¯ä»¥ä¸ºå›½å®¶æä¾›ä¸€å®šçš„ç›ˆåˆ©ã€‚ç›ˆåˆ©ä¸åˆ†é…çš„è®¾å¤‡æ•°é‡æœ‰å…³ã€‚

é—®ï¼šå¦‚ä½•åˆ†é…è¿™Må°è®¾å¤‡æ‰èƒ½ä½¿å›½å®¶å¾—åˆ°çš„ç›ˆåˆ©æœ€å¤§ï¼Ÿ

æ±‚å‡ºæœ€å¤§ç›ˆåˆ©å€¼ã€‚

åˆ†é…åŸåˆ™ï¼šæ¯ä¸ªå…¬å¸æœ‰æƒè·å¾—ä»»æ„æ•°ç›®çš„è®¾å¤‡ï¼Œä½†æ€»å°æ•°ä¸è¶…è¿‡è®¾å¤‡æ•°Mã€‚

**è¾“å…¥æ ¼å¼**

ç¬¬ä¸€è¡Œæœ‰ä¸¤ä¸ªæ•°ï¼Œç¬¬ä¸€ä¸ªæ•°æ˜¯åˆ†å…¬å¸æ•°Nï¼Œç¬¬äºŒä¸ªæ•°æ˜¯è®¾å¤‡å°æ•°Mï¼›

æ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªN*Mçš„çŸ©é˜µï¼ŒçŸ©é˜µä¸­çš„ç¬¬ i è¡Œç¬¬ j åˆ—çš„æ•´æ•°è¡¨ç¤ºç¬¬ i ä¸ªå…¬å¸åˆ†é… j å°æœºå™¨æ—¶çš„ç›ˆåˆ©ã€‚

**è¾“å‡ºæ ¼å¼**

ç¬¬ä¸€è¡Œè¾“å‡ºæœ€å¤§ç›ˆåˆ©å€¼ï¼›

æ¥ä¸‹Nè¡Œï¼Œæ¯è¡Œæœ‰2ä¸ªæ•°ï¼Œå³åˆ†å…¬å¸ç¼–å·å’Œè¯¥åˆ†å…¬å¸è·å¾—è®¾å¤‡å°æ•°ã€‚

ç­”æ¡ˆä¸å”¯ä¸€ï¼Œè¾“å…¥ä»»æ„åˆæ³•æ–¹æ¡ˆå³å¯ã€‚

**æ•°æ®èŒƒå›´**ï¼š1â‰¤Nâ‰¤10, 1â‰¤Mâ‰¤15

**è¾“å…¥æ ·ä¾‹ï¼š**
```c
3 3
30 40 50
20 30 50
20 25 30
```
**è¾“å‡ºæ ·ä¾‹ï¼š**
```c
70
1 1
2 1
3 1
```
### è§£æ³•ä¸€
å…¶å®ä¾ç„¶æ˜¯ä¸€ä¸ª01èƒŒåŒ…çš„é—®é¢˜ã€‚Mä»¶å•†å“åˆ†é…ç»™Nä¸ªå…¬å¸ï¼Œåè¿‡æ¥å°±æ˜¯ä»Nä¸ªå…¬å¸ä¸­é€‰æ‹©å‡ ä¸ªå…¬å¸ï¼Œç„¶åå†é€‰æ‹©æ¯ä¸ªå…¬å¸åˆ†é…å¤šå°‘ä¸ªï¼Œç›´æ¥æ¨å°±è¡Œäº†ï¼Œä¸è¿‡ä¸€å¼€å§‹å†™äºŒç»´çš„æ–¹ç¨‹æ—¶å†™å‡ºäº†bugï¼Œå†…å¾ªç¯ä¸­é€’æ¨å†™æˆäº†$dp[i][j] = \max(dp[i-1][j], dp[i-1][j-k]+w[k-1])$ã€‚

è¿™é‡Œæœ€å†…å±‚çš„å¾ªç¯æ˜¯æšä¸¾çš„ä¸ªæ•°ï¼Œåº”è¯¥å’Œä¸Šä¸€è½®ä¸ªæ•°çš„ç»“æœæ¯”è¾ƒï¼Œæ±‚ä¸€ä¸ªæœ€å¤§çš„$dp[i][j]$è€Œä¸æ˜¯å’Œ$dp[i-1][j]$æ¯”è¾ƒï¼Œæ‰€ä»¥åº”è¯¥æ˜¯$dp[i][j] = \max(dp[i-1][j], \max(dp[i][j], dp[i-1][j-k]+w[k-1]))$ï¼Œå½“ç„¶å¦‚æœå†™ä¸€ç»´çš„èƒŒåŒ…è¿™é‡Œå°±æ²¡é—®é¢˜ï¼Œ$dp[j]$ç›´æ¥å°±æ˜¯ä¸Šä¸€è½®ä¸ªæ•°çš„ç»“æœ

```java
//é™ç»´ & ç®€åŒ–åçš„ä»£ç 
import java.util.*;
import java.io.*;

class Main {

    public static void main(String... args) throws Exception {
        // BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("./input.txt")));
        int[] in = read(br);
        int N = in[0], M = in[1];
        int[] dp = new int[M+1];
        int[][] back = new int[N+1][M+1];
        for (int i = 1; i <= N; i++) {
            int[] w = read(br);
            for (int j = M; j >= 1; j--) {
                for (int k = 1; k <= j; k++) {
                    int temp = dp[j-k]+w[k-1];
                    if (temp > dp[j]) {
                        //è®°å½•å½“å‰å­å…¬å¸æœ€ä¼˜åˆ†é…å¤šå°‘ä¸ªï¼Œç„¶åä»åå¾€å‰æ¨
                        back[i][j] = k;
                        dp[j] = temp;
                    }
                }
            }
        }
        int[] res = new int[N];
        int idx = 0;
        int x = N, y = M;
        while(idx < N) {
            int k = back[x][y];
            res[idx++] = k;
            x--; y-=k;
        }
        System.out.println(dp[M]);
        for (int i = N-1; i >= 0; i--) {
            System.out.println((N-i)+ " " + res[i]);
        }
    }

    public static int[] read(BufferedReader br) throws Exception {
        return Arrays.stream(br.readLine().split(" ")).mapToInt(Integer::parseInt).toArray();
    }
}

public class AcWing1013_æœºå™¨åˆ†é… {
    public static void main(String[] args) throws Exception {
        new Main().main();
    }
}
```
å…¶å®ä¹Ÿå¯ä»¥ä¸ç”¨backæ•°ç»„ï¼Œäº‹åæˆ‘çœ‹yxcçš„åšæ³•å°±æ˜¯ç›´æ¥æ ¹æ®dpå€¼æšä¸¾æ¯ä¸ªå‚åˆ†é…çš„ä¸ªæ•°ï¼Œå€’æ¨çœ‹å‰é¢æ˜¯ä»å“ªä¸ªè½¬ç§»è¿‡æ¥çš„ï¼Œè¿™æ ·å¤æ‚åº¦ä¼šé«˜ä¸€ç‚¹ç‚¹ï¼Œè€Œä¸”ä¸èƒ½åšé™ç»´æ“ä½œï¼Œå…¶å®éƒ½ä¸€æ ·ï¼Œæ ¸å¿ƒå°±æ˜¯ä»åå¾€å‰å€’æ¨çŠ¶æ€è½¬ç§»çš„æ–¹å‘

## [426. å¼€å¿ƒçš„é‡‘æ˜](https://www.acwing.com/problem/content/428/)

é‡‘æ˜ä»Šå¤©å¾ˆå¼€å¿ƒï¼Œå®¶é‡Œè´­ç½®çš„æ–°æˆ¿å°±è¦é¢†é’¥åŒ™äº†ï¼Œæ–°æˆ¿é‡Œæœ‰ä¸€é—´ä»–è‡ªå·±ä¸“ç”¨çš„å¾ˆå®½æ•çš„æˆ¿é—´ã€‚

æ›´è®©ä»–é«˜å…´çš„æ˜¯ï¼Œå¦ˆå¦ˆæ˜¨å¤©å¯¹ä»–è¯´ï¼šâ€œä½ çš„æˆ¿é—´éœ€è¦è´­ä¹°å“ªäº›ç‰©å“ï¼Œæ€ä¹ˆå¸ƒç½®ï¼Œä½ è¯´äº†ç®—ï¼Œåªè¦ä¸è¶…è¿‡Nå…ƒé’±å°±è¡Œâ€ã€‚

ä»Šå¤©ä¸€æ—©é‡‘æ˜å°±å¼€å§‹åšé¢„ç®—ï¼Œä½†æ˜¯ä»–æƒ³ä¹°çš„ä¸œè¥¿å¤ªå¤šäº†ï¼Œè‚¯å®šä¼šè¶…è¿‡å¦ˆå¦ˆé™å®šçš„Nå…ƒã€‚

äºæ˜¯ï¼Œä»–æŠŠæ¯ä»¶ç‰©å“è§„å®šäº†ä¸€ä¸ªé‡è¦åº¦ï¼Œåˆ†ä¸º5ç­‰ï¼šç”¨æ•´æ•°1~5è¡¨ç¤ºï¼Œç¬¬5ç­‰æœ€é‡è¦ã€‚

ä»–è¿˜ä»å› ç‰¹ç½‘ä¸ŠæŸ¥åˆ°äº†æ¯ä»¶ç‰©å“çš„ä»·æ ¼ï¼ˆéƒ½æ˜¯æ•´æ•°å…ƒï¼‰ã€‚

ä»–å¸Œæœ›åœ¨ä¸è¶…è¿‡Nå…ƒï¼ˆå¯ä»¥ç­‰äºNå…ƒï¼‰çš„å‰æä¸‹ï¼Œä½¿æ¯ä»¶ç‰©å“çš„ä»·æ ¼ä¸é‡è¦åº¦çš„ä¹˜ç§¯çš„æ€»å’Œæœ€å¤§ã€‚â€‚

è®¾ç¬¬jä»¶ç‰©å“çš„ä»·æ ¼ä¸ºv[j]ï¼Œé‡è¦åº¦ä¸ºw[j]ï¼Œå…±é€‰ä¸­äº†kä»¶ç‰©å“ï¼Œç¼–å·ä¾æ¬¡ä¸ºj1ï¼Œj2ï¼Œâ€¦ï¼Œjkï¼Œåˆ™æ‰€æ±‚çš„æ€»å’Œä¸ºï¼šâ€‚

v[j1]âˆ—w[j1]+v[j2]âˆ—w[j2]+â€¦+v[jk]âˆ—w[jk]
è¯·ä½ å¸®åŠ©é‡‘æ˜è®¾è®¡ä¸€ä¸ªæ»¡è¶³è¦æ±‚çš„è´­ç‰©å•ã€‚

### è§£æ³•ä¸€

01èƒŒåŒ…
```java
import java.util.*;
import java.io.*;

class Main {

    public static void main(String... args) throws Exception {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        // BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("./input.txt")));
        int[] in = read(br);
        int M = in[0], N = in[1];
        int[] dp = new int[M+1];
        for (int i = 1; i <= N; i++) {
            int[] vp = read(br);
            int v = vp[0], p = vp[1];
            for (int j = M; j >= v; j--) {
                dp[j] = Math.max(dp[j], dp[j-v]+v*p);
            }
        }
        System.out.println(dp[M]);
    }

    public static int[] read(BufferedReader br) throws Exception {
        return Arrays.stream(br.readLine().split(" ")).mapToInt(Integer::parseInt).toArray();
    }
}
```

## [11. èƒŒåŒ…é—®é¢˜æ±‚æ–¹æ¡ˆæ•°](https://www.acwing.com/problem/content/11/)

æœ‰ $N$ ä»¶ç‰©å“å’Œä¸€ä¸ªå®¹é‡æ˜¯ $V$ çš„èƒŒåŒ…ã€‚æ¯ä»¶ç‰©å“åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚

ç¬¬ $i$ ä»¶ç‰©å“çš„ä½“ç§¯æ˜¯ $v_i$ï¼Œä»·å€¼æ˜¯ $w_i$ã€‚

æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä½¿è¿™äº›ç‰©å“çš„æ€»ä½“ç§¯ä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”æ€»ä»·å€¼æœ€å¤§ã€‚

è¾“å‡º æœ€ä¼˜é€‰æ³•çš„æ–¹æ¡ˆæ•°ã€‚æ³¨æ„ç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¯·è¾“å‡ºç­”æ¡ˆæ¨¡ $10^9+7$ çš„ç»“æœã€‚

**è¾“å…¥æ ¼å¼**

ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œ$N$ï¼Œ$V$ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç‰©å“æ•°é‡å’ŒèƒŒåŒ…å®¹ç§¯ã€‚

æ¥ä¸‹æ¥æœ‰ $N$ è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•° $v_i$, $w_i$ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬ $i$ ä»¶ç‰©å“çš„ä½“ç§¯å’Œä»·å€¼ã€‚

**è¾“å‡ºæ ¼å¼**

è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤º æ–¹æ¡ˆæ•° æ¨¡ $10^9+7$ çš„ç»“æœã€‚

**æ•°æ®èŒƒå›´**

- $0<N,Vâ‰¤1000$
- $0<v_i,w_iâ‰¤1000$

**è¾“å…¥æ ·ä¾‹**
```c
4 5
1 2
2 4
3 4
4 6
```

**è¾“å‡ºæ ·ä¾‹ï¼š**
```c
2
```

### è§£æ³•ä¸€
èƒŒåŒ…é—®é¢˜æèµ·æ¥è¿˜æ˜¯æœ‰ç‚¹éº»çƒ¦å–”ï¼Œé€’æ¨æ–¹ç¨‹éƒ½æ˜¯ä¼—æ‰€å‘¨çŸ¥çš„ï¼Œä½†æ˜¯é€’æ¨çš„ç»†èŠ‚æœ‰ç‚¹ä¸å¥½æƒ³ã€‚

ä¸‹é¢çš„è§£æ³•æ˜¯è®¾ç½®çš„çŠ¶æ€æ˜¯: $dp[i][j]$ï¼Œè€ƒè™‘å‰$i$ä¸ªç‰©å“ä½“ç§¯ **æ°å¥½** æ˜¯$j$çš„æ—¶å€™æœ€å¤§ä»·å€¼ï¼ŒåŒæ—¶è¿˜éœ€è¦ä¸€ä¸ª$cnt[i][j]$ï¼Œè€ƒè™‘å‰$i$ä¸ªç‰©å“ä½“ç§¯æ°å¥½æ˜¯$j$çš„æ—¶å€™æœ€å¤§ä»·å€¼çš„æ–¹æ¡ˆæ•°é‡ï¼Œ$cnt$æ ¹æ®$dp$çš„å€¼è¿›è¡Œè½¬ç§»
1. å½“$dp[i-1][j-v_i]+w_i > dp[i-1][j]$çš„æ—¶å€™ï¼Œè¯´æ˜$cnt[i][j]$å½“å‰çš„ä»·å€¼ä¸æ˜¯æœ€å¤§çš„ï¼Œæ‰€ä»¥ä¼šè¢«$cnt[i-1][j-v_i]$æ›¿ä»£
2. å½“$dp[i-1][j-v_i]+w_i = dp[i-1][j]$çš„æ—¶å€™ï¼Œè¯´æ˜$cnt[i][j]$å’Œ$cnt[i-1][j-v_i]$çš„æœ€å¤§ä»·å€¼ç›¸åŒï¼Œå¯ä»¥ç´¯åŠ èµ·æ¥

åˆå§‹çŠ¶æ€ï¼š$cnt[i][0] = 1$ï¼Œ$dp[i][0] = 0\  other\ \inf$ï¼ˆä½“ç§¯æ°å¥½ä¸º0åªæœ‰ä¸€ç§æ–¹æ¡ˆï¼Œä»€ä¹ˆéƒ½ä¸è£…ï¼‰

æœ€åæˆ‘ä»¬éœ€è¦æ±‚å‡ºæœ€å¤§çš„ä»·å€¼`maxV`ï¼Œæ³¨æ„è¿™é‡Œæœ€å¤§ä»·å€¼ä¸ä¸€å®šæ˜¯$dp[N][V]$ï¼Œå› ä¸ºæˆ‘ä»¬è¿™é‡Œæ±‚çš„æ˜¯ä½“ç§¯ **æ°å¥½** $j$çš„æœ€å¤§ä»·å€¼ã€‚ç„¶åå†æ ¹æ®æœ€å¤§ä»·å€¼çš„$dp[i][j]$çŠ¶æ€æ±‚å¯¹åº”$cnt[i][j]$çš„æ–¹æ¡ˆæ•°ä¹‹å’Œå°±è¡Œäº†
```java
import java.util.*;
import java.io.*;

class Main {

    public static void main(String... args) throws Exception {
        PrintWriter out = new PrintWriter(new BufferedOutputStream(System.out));
        // BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("./input.txt")));
        int[] in = read(br);
        int N = in[0], V = in[1];
        int INF = 0x3f3f3f3f;
        int MOD = (int)1e9+7;
        // dp[j]: ä½“ç§¯åˆšå¥½ä¸ºjæ—¶ï¼Œæœ€å¤§çš„ä»·å€¼
        int[] dp = new int[V+1];
        // cnt[j]: ä½“ç§¯åˆšå¥½ä¸ºjæ—¶ï¼Œæœ€å¤§ä»·å€¼æ–¹æ¡ˆæ•°
        int[] cnt = new int[V+1];
        Arrays.fill(dp, -INF);
        dp[0] = 0; cnt[0] = 1;
        for (int i = 1; i <= N; i++) {
            int[] t = read(br);
            int vi = t[0], wi = t[1];
            for (int j = V; j >= vi; j--) {
                int val = dp[j-vi] + wi;
                if (val > dp[j]) { // ä»dp[i-1][j-vi]æ¨è¿‡æ¥ï¼Œvalæ¯”å½“å‰çš„å¤§ï¼Œæ‰€ä»¥cnt[j]è¢«å–ä»£
                    cnt[j] = cnt[j-vi];
                    dp[j] = val;
                } else if (val == dp[j]) { // ä»dp[i-1][j-vi]æ¨è¿‡æ¥ï¼Œvalå’Œå½“å‰ç›¸åŒï¼Œå åŠ èµ·æ¥
                    cnt[j] = (cnt[j] + cnt[j-vi]) % MOD;
                }
            }
        }
        int maxW = 0;
        for (int i = 0; i <= V; i++) maxW = Math.max(maxW, dp[i]);
        long res = 0;
        for (int i = 0; i <= V; i++) {
            if (dp[i] == maxW) {
                res = (res + cnt[i]) % MOD;
            }
        }
        out.println(res);
        out.flush();
        out.close();
    }

    public static int[] read(BufferedReader br) throws Exception {
        return Arrays.stream(br.readLine().split(" ")).mapToInt(Integer::parseInt).toArray();
    }
}
```

### è§£æ³•äºŒ

å…¶å®å’Œä¸Šé¢çš„è§£æ³•å¤§åŒå°å¼‚ï¼Œä½†æ˜¯çŠ¶æ€çš„å®šä¹‰ä¸ä¸€æ ·ï¼Œåˆå§‹å€¼ä¸ä¸€æ ·ï¼Œä½†æ˜¯è½¬ç§»æ–¹ç¨‹æ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡ŒçŠ¶æ€å®šä¹‰ä¸ºï¼š$dp[i][j]$ï¼Œè€ƒè™‘å‰$i$ä¸ªç‰©å“ä½“ç§¯ **æœ€å¤š** æ˜¯$j$çš„æ—¶å€™æœ€å¤§ä»·å€¼ï¼Œ$cnt[i][j]$åŒç†

åˆå§‹çŠ¶æ€ï¼š$cnt[0][j] = 1$ï¼Œæ³¨æ„å’Œä¸Šé¢çš„åŒºåˆ«ï¼Œè¿™é‡Œå®é™…ä¸Šæ²¡æœ‰ç‰©å“å¯ä»¥è£…ï¼Œæ‰€ä»¥æœ€å¤§ä»·å€¼å°±æ˜¯0ï¼Œé‚£ä¹ˆå¯¹äºä»»æ„ä½“ç§¯$j$ï¼Œæˆ‘ä»¬åªèƒ½é€‰æ‹©ä¸è£…ï¼Œæ–¹æ¡ˆæ•°é‡ä¸º1
```java
class Main {

    public static void main(String... args) throws Exception {
        PrintWriter out = new PrintWriter(new BufferedOutputStream(System.out));
        // BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("./input.txt")));
        int[] in = read(br);
        int N = in[0], V = in[1];
        int MOD = (int)1e9+7;
        //dp[j]: ä½“ç§¯å°äºç­‰äºjæ—¶ï¼Œæœ€å¤§çš„ä»·å€¼
        int[] dp = new int[V+1];
        //cnt[j]: ä½“ç§¯å°äºç­‰äºjæ—¶ï¼Œæœ€å¤§ä»·å€¼æ–¹æ¡ˆæ•°
        int[] cnt = new int[V+1];
        //è¿™é‡Œå…¶å®åˆå§‹åŒ–çš„æ˜¯dp[0][i]=1ï¼Œæ­¤æ—¶æœ€å¤§ä»·å€¼å°±æ˜¯0ï¼Œä»€ä¹ˆéƒ½ä¸è£…
        Arrays.fill(cnt, 1);
        for (int i = 0; i < N; i++) {
            int[] t = read(br);
            int vi = t[0], wi = t[1];
            for (int j = V; j >= vi; j--) {
                int val = dp[j-vi] + wi;
                if (val > dp[j]) {
                    dp[j] = val;
                    cnt[j] = cnt[j-vi];
                } else if (val == dp[j]) {
                    cnt[j] = (cnt[j] + cnt[j-vi]) % MOD;
                }
            }
        }
        out.println(cnt[V]);
        out.flush();
        out.close();
    }

    public static int[] read(BufferedReader br) throws Exception {
        return Arrays.stream(br.readLine().split(" ")).mapToInt(Integer::parseInt).toArray();
    }
}
```

> åˆå§‹çŠ¶æ€çš„å®šä¹‰åˆå§‹åŒ–è¿˜æ˜¯è¦å¥½å¥½ç¢ç£¨ä¸‹

## [10. æœ‰ä¾èµ–çš„èƒŒåŒ…é—®é¢˜](https://www.acwing.com/problem/content/description/10/)
æœ‰ N ä¸ªç‰©å“å’Œä¸€ä¸ªå®¹é‡æ˜¯ V çš„èƒŒåŒ…ã€‚

ç‰©å“ä¹‹é—´å…·æœ‰ä¾èµ–å…³ç³»ï¼Œä¸”ä¾èµ–å…³ç³»ç»„æˆä¸€æ£µæ ‘çš„å½¢çŠ¶ã€‚å¦‚æœé€‰æ‹©ä¸€ä¸ªç‰©å“ï¼Œåˆ™å¿…é¡»é€‰æ‹©å®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://i.loli.net/2021/02/22/aEhD4KInUcObAMk.png)

å¦‚æœé€‰æ‹©ç‰©å“5ï¼Œåˆ™å¿…é¡»é€‰æ‹©ç‰©å“1å’Œ2ã€‚è¿™æ˜¯å› ä¸º2æ˜¯5çš„çˆ¶èŠ‚ç‚¹ï¼Œ1æ˜¯2çš„çˆ¶èŠ‚ç‚¹ã€‚

æ¯ä»¶ç‰©å“çš„ç¼–å·æ˜¯ iï¼Œä½“ç§¯æ˜¯ viï¼Œä»·å€¼æ˜¯ wiï¼Œä¾èµ–çš„çˆ¶èŠ‚ç‚¹ç¼–å·æ˜¯ piã€‚ç‰©å“çš„ä¸‹æ ‡èŒƒå›´æ˜¯ 1â€¦Nã€‚

æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä½¿ç‰©å“æ€»ä½“ç§¯ä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”æ€»ä»·å€¼æœ€å¤§ã€‚

è¾“å‡ºæœ€å¤§ä»·å€¼ã€‚

**è¾“å…¥æ ¼å¼**

ç¬¬ä¸€è¡Œæœ‰ä¸¤ä¸ªæ•´æ•° Nï¼ŒVï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç‰©å“ä¸ªæ•°å’ŒèƒŒåŒ…å®¹é‡ã€‚

æ¥ä¸‹æ¥æœ‰ N è¡Œæ•°æ®ï¼Œæ¯è¡Œæ•°æ®è¡¨ç¤ºä¸€ä¸ªç‰©å“ã€‚
ç¬¬ i è¡Œæœ‰ä¸‰ä¸ªæ•´æ•° vi,wi,piï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç‰©å“çš„ä½“ç§¯ã€ä»·å€¼å’Œä¾èµ–çš„ç‰©å“ç¼–å·ã€‚
å¦‚æœ pi=âˆ’1ï¼Œè¡¨ç¤ºæ ¹èŠ‚ç‚¹ã€‚ æ•°æ®ä¿è¯æ‰€æœ‰ç‰©å“æ„æˆä¸€æ£µæ ‘ã€‚

**è¾“å‡ºæ ¼å¼**

è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§ä»·å€¼ã€‚

**æ•°æ®èŒƒå›´**ï¼š1â‰¤N,Vâ‰¤100ï¼Œ1â‰¤vi,wiâ‰¤100

**çˆ¶èŠ‚ç‚¹ç¼–å·èŒƒå›´ï¼š**
- å†…éƒ¨ç»“ç‚¹ï¼š1â‰¤piâ‰¤N;
- æ ¹èŠ‚ç‚¹ pi=âˆ’1;

**è¾“å…¥æ ·ä¾‹**
```c
5 7
2 3 -1
2 2 1
3 5 1
4 7 2
3 6 2
```
**è¾“å‡ºæ ·ä¾‹**
```c
11
```
### è§£æ³•ä¸€
å‚è€ƒå¤§ä½¬çš„[è§£æ³•](https://www.acwing.com/solution/content/5780/)ï¼Œå¤šå‰æ ‘è½¬äºŒå‰æ ‘ + è®°å¿†åŒ–é€’å½’çš„åšæ³•ï¼Œæ„Ÿè§‰ç›¸æ¯”yxcçš„åˆ†ç»„èƒŒåŒ…æ›´å¥½ç†è§£ï¼Œä¹Ÿæ˜¯èƒ½æƒ³åˆ°çš„èŒƒå›´ã€‚é™¤æ­¤ä¹‹å¤–å¤§ä½¬è¿˜å†™äº†ä¸€ç§dfsåºçš„æ–¹æ³•ï¼Œä½†æ˜¯dfsåºæˆ‘è¿˜ä¸å¤ªäº†è§£ï¼Œå…ˆåŸ‹ä¸ªå‘ï¼Œç­‰ä»¥åé‡åˆ°å†æ¥å¡«ä¸€ä¸‹
```java
import java.util.*;
import java.io.*;

/*
å¤šå‰æ ‘çš„å­˜å‚¨ï¼ˆå·¦å­©å­ï¼Œå³å…„å¼Ÿï¼‰+ è®°å¿†åŒ–é€’å½’
 */
class Main {

    static int N, M;
    static int[][] dp;
    //äºŒå‰æ ‘èŠ‚ç‚¹
    static int[] left, right;
    static int[] son;
    static int[] v, w;

    public static void main(String... args) throws Exception {
        PrintWriter out = new PrintWriter(new BufferedOutputStream(System.out));
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        // BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("./input.txt")));
        int[] in = read(br);
        N = in[0]; M = in[1];
        left = new int[N+1]; right = new int[N+1];
        v = new int[N+1]; w = new int[N+1];
        son = new int[N+1];
        dp = new int[N+1][M+1];
        for (int i = 0; i <= N; i++) {
            Arrays.fill(dp[i], -1);
        }
        int root = 0;
        for (int i = 1; i <= N; i++) {
            int[] t = read(br);
            v[i] = t[0]; w[i] = t[1];
            if (t[2] == -1) {
                root = i;
            } else {
                if (son[t[2]] == 0) {
                    left[t[2]] = i;
                } else {
                    right[son[t[2]]] = i;
                }
                son[t[2]] = i;
            }
        }
        out.println(dfs(root, M));
        out.flush();
    }

    //åœ¨iå­æ ‘ä¸‹ï¼Œä½“ç§¯ä¸è¶…è¿‡jçš„æƒ…å†µä¸‹ï¼Œèƒ½å¾—åˆ°çš„æœ€å¤§æ”¶ç›Š
    //å­æ ‘çš„é€‰å–ä¸æ˜¯å­¤ç«‹çš„ï¼Œæ˜¯å¯ä»¥ä¸€èµ·é€‰çš„ï¼Œæ‰€ä»¥åº”è¯¥æŒ‰ç…§ä½“ç§¯åˆ†é…åˆ’åˆ†å­æ ‘
    public static int dfs(int i, int j) {
        // i=0å­æ ‘ä¸å­˜åœ¨
        if (i==0 || j < 0) return 0;
        if (dp[i][j] != -1) {
            return dp[i][j];
        }
        //ä¸é€‰å½“å‰èŠ‚ç‚¹ï¼Œä½“ç§¯jå…¨éƒ¨åˆ†é…ç»™å…„å¼ŸèŠ‚ç‚¹
        dp[i][j] = dfs(right[i], j);
        //å½“å‰èŠ‚ç‚¹å¿…é€‰ï¼Œåˆ†ç»™å­èŠ‚ç‚¹kï¼Œå…„å¼ŸèŠ‚ç‚¹j-v[i]-k
        for (int k = 0; k <= j-v[i]; k++) {
            dp[i][j] = Math.max(dp[i][j], dfs(left[i], k) + dfs(right[i], j-v[i]-k) + w[i]);
        }
        return dp[i][j];
    }

    public static int[] read(BufferedReader br) throws Exception {
        return Arrays.stream(br.readLine().split(" ")).mapToInt(Integer::parseInt).toArray();
    }
}
```
### è§£æ³•äºŒ
è¿™ä¸ªæ˜¯ycxè®²çš„æ–¹æ³•ï¼Œåˆ†ç»„èƒŒåŒ…çš„è§£æ³•ï¼Œæˆ‘åæ­£æ˜¯ç†è§£ä¸èƒ½...ä½†æ˜¯è¿™é‡Œç¡®å®ACäº†...ä¸æ˜¯æˆ‘ç­‰å‡¡äººèƒ½æƒ³åˆ°çš„åšæ³•
```java
import java.util.*;
import java.io.*;

class Main {

    static int N, V;
    static int[] vs;
    static int[] ws;
    static int idx;
    static int[] h, ne, e;
    static int[][] dp;
    //æ·»åŠ è¾¹a->b
    public static void add(int a, int b) {
        e[idx] = b; ne[idx] = h[a]; h[a] = idx++;
    }

    public static void main(String... args) throws Exception {
        PrintWriter out = new PrintWriter(new BufferedOutputStream(System.out));
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        // BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("./input.txt")));
        int[] in = read(br);
        N = in[0]; V = in[1];
        vs = new int[N+1]; ws = new int[N+1];
        h = new int[N+1]; ne = new int[N+1]; e = new int[N+1];
        Arrays.fill(h, -1);
        dp = new int[N+1][V+1];
        int root = 0;
        for (int i = 1; i <= N; i++) {
            int[] t = read(br);
            vs[i] = t[0]; ws[i] = t[1];
            if (t[2] == -1) {
                root = i;
            } else {
                add(t[2], i);
            }
        }
        dfs(root);
        out.println(dp[root][V]);
        out.flush();
    }

    //dp[i][j]: åœ¨iå­æ ‘ä¸‹ï¼Œä½“ç§¯ä¸æ“ä½œjçš„æ—¶å€™æœ€å¤§çš„ä»·å€¼
    public static void dfs(int u) {
        for (int i = h[u]; i != -1; i = ne[i]) {
            dfs(e[i]);
            //å…ˆå°†æ ¹èŠ‚ç‚¹çš„ä½“ç§¯ç©ºå‡ºæ¥ï¼Œæ ¹èŠ‚ç‚¹æ˜¯å¿…é€‰çš„
            for (int j = V-vs[u]; j >= 0; j--) {
                for (int k = 0; k <= j; k++) {
                    //è¿™é‡Œä¸ºä»€ä¹ˆå¯ä»¥ç›´æ¥ç”¨æ ¹èŠ‚ç‚¹+å­èŠ‚ç‚¹ï¼Ÿéš¾é“ä¸ä¼šé‡å¤å—ï¼Ÿ
                    dp[u][j] = Math.max(dp[u][j], dp[u][j-k]+dp[e[i]][k]);
                }
            }
        }
        for (int j = V; j >= 0; j--) {
            if (j < vs[u]) {
                dp[u][j] = 0;
            } else {
                dp[u][j] = dp[u][j-vs[u]] + ws[u];
            }
        }
    }

    public static int[] read(BufferedReader br) throws Exception {
        return Arrays.stream(br.readLine().split(" ")).mapToInt(Integer::parseInt).toArray();
    }
}
```

## [12. èƒŒåŒ…é—®é¢˜æ±‚å…·ä½“æ–¹æ¡ˆ](https://www.acwing.com/problem/content/12/)

æœ‰$N$ä»¶ç‰©å“å’Œä¸€ä¸ªå®¹é‡æ˜¯$V$çš„èƒŒåŒ…ã€‚æ¯ä»¶ç‰©å“åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚

ç¬¬ $i$ ä»¶ç‰©å“çš„ä½“ç§¯æ˜¯ $v_i$ï¼Œä»·å€¼æ˜¯ $w_i$ã€‚

æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä½¿è¿™äº›ç‰©å“çš„æ€»ä½“ç§¯ä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”æ€»ä»·å€¼æœ€å¤§ã€‚

è¾“å‡º å­—å…¸åºæœ€å°çš„æ–¹æ¡ˆã€‚è¿™é‡Œçš„å­—å…¸åºæ˜¯æŒ‡ï¼šæ‰€é€‰ç‰©å“çš„ç¼–å·æ‰€æ„æˆçš„åºåˆ—ã€‚ç‰©å“çš„ç¼–å·èŒƒå›´æ˜¯ $1â€¦N$ã€‚

è¾“å…¥æ ¼å¼
ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œ$N$ï¼Œ$V$ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç‰©å“æ•°é‡å’ŒèƒŒåŒ…å®¹ç§¯ã€‚

æ¥ä¸‹æ¥æœ‰ $N$ è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•° $v_i$, $w_i$ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬ $i$ ä»¶ç‰©å“çš„ä½“ç§¯å’Œä»·å€¼ã€‚

**è¾“å‡ºæ ¼å¼**

è¾“å‡ºä¸€è¡Œï¼ŒåŒ…å«è‹¥å¹²ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•´æ•°ï¼Œè¡¨ç¤ºæœ€ä¼˜è§£ä¸­æ‰€é€‰ç‰©å“çš„ç¼–å·åºåˆ—ï¼Œä¸”è¯¥ç¼–å·åºåˆ—çš„å­—å…¸åºæœ€å°ã€‚

ç‰©å“ç¼–å·èŒƒå›´æ˜¯ 1â€¦Nã€‚

**æ•°æ®èŒƒå›´**ï¼š $0<N,Vâ‰¤1000$ï¼Œ$0<v_i,w_iâ‰¤1000$

**è¾“å…¥æ ·ä¾‹**
```c
4 5
1 2
2 4
3 4
4 6
```
**è¾“å‡ºæ ·ä¾‹ï¼š**
```c
1 4
```
### è§£æ³•ä¸€
ä¸€å¼€å§‹å†™äº†ä½¿ç”¨backæ•°ç»„çš„æ–¹æ¡ˆï¼Œä½†æ˜¯å‘ç°å¹¶ä¸å¥½æ±‚å­—å…¸åºæœ€å°çš„ï¼Œbackæ•°ç»„æ˜¯é€šè¿‡**å€’æ¨**æ¨å‡ºæ¥çš„ï¼Œæ‰€ä»¥å¾—åˆ°çš„ä¸€å®šä¸æ˜¯å­—å…¸åºæœ€å°çš„ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦æ­£å‘çš„æ¨ï¼Œæ”¹å˜çŠ¶æ€æ–¹ç¨‹å®šä¹‰ï¼Œè®¾ç½®é€’æ¨çŠ¶æ€ä¸ºï¼š$dp[i][j]$ï¼Œä»ç¬¬$i$ä¸ªç‰©å“åˆ°æœ€åä¸€ä¸ªç‰©å“ï¼ˆ$i$ä»0å¼€å§‹ï¼ŒåŒ…æ‹¬$i$ï¼‰ï¼Œä½“ç§¯ä¸è¶…è¿‡$j$çš„æœ€å¤§æ”¶ç›Š
- å…¥å£ï¼š$dp[N][0 \backsim M] = 0$ï¼Œä¸é€‰å–ä»»ä½•ç‰©å“
- è½¬ç§»ï¼š$dp[i][j] = \min(dp[i+1][j], dp[i+1][j-v_i]+w_i)$
- å‡ºå£ï¼š$dp[0][M]$å°±æ˜¯æœ€å¤§æ”¶ç›Š

åœ¨çŠ¶æ€å¡«å……å®Œæ¯•åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ­£å‘çš„æ¨å‡ºä¸€ä¸ªå­—å…¸åºæœ€å°çš„æ–¹æ¡ˆï¼šé¡ºåºéå†ç‰©å“ç¼–å·ï¼Œå½“$dp[i][M] = dp[i+1][M-v_i] + w_i$ï¼Œè¯´æ˜é€‰å–è¯¥ç‰©å“å¯ä»¥è·å¾—æœ€å¤§æ”¶ç›Šï¼Œæˆ‘ä»¬è¦æ±‚çš„æ˜¯å­—å…¸åºæœ€å°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥**ä¼˜å…ˆé€‰å–**é å‰çš„ç‰©å“ï¼Œè€Œæˆ‘ä»¬æ˜¯æ­£å‘éå†çš„ï¼Œæ‰€ä»¥ç›´æ¥é€‰å–è¯¥ç‰©å“è¾“å‡ºï¼Œç„¶åå‡å»å¯¹åº”çš„ä½“ç§¯ï¼Œç»§ç»­å¾ªç¯è¯¥è¿‡ç¨‹ï¼Œæœ€ç»ˆç»“æœå°±ä¸€å®šæ˜¯å­—å…¸åºæœ€å°çš„æ–¹æ¡ˆ
```java
import java.util.*;
import java.io.*;

class Main {

    public static void main(String... args) throws Exception {
        PrintWriter out = new PrintWriter(new BufferedOutputStream(System.out));
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        // BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("./input.txt")));
        int[] in = read(br);
        int N = in[0], M = in[1];
        int[] v = new int[N];
        int[] w = new int[N];
        for (int i = 0; i < N; i++) {
            int[] t = read(br);
            v[i] = t[0]; w[i] = t[1];
        }
        //ç¬¬iä¸ªç‰©å“åˆ°æœ€åï¼ˆåŒ…æ‹¬iï¼‰ï¼Œä½“ç§¯ä¸è¶…è¿‡jçš„æƒ…å†µä¸‹æœ€å¤§æ”¶ç›Šï¼ˆçŠ¶æ€ä¸åŒäºä¹‹å‰çš„çŠ¶æ€ï¼‰
        //dp[i][j] = min(dp[i+1][j], dp[i+1][j-v]+w)
        int[][] dp = new int[N+1][M+1];
        for (int i = N-1; i >= 0; i--) {
            for (int j = M; j >= 0; j--) {
                dp[i][j] = dp[i+1][j];
                if (j >= v[i]) {
                    dp[i][j] = Math.max(dp[i+1][j-v[i]] + w[i], dp[i+1][j]);;
                }
            }
        }
        for (int i = 0; i <= N-1; i++) {
            if (M-v[i] < 0) continue;
            if (dp[i][M] == dp[i+1][M-v[i]] + w[i]) {
                out.print((i+1)+" ");
                M -= v[i];
            }
        }
        out.flush();
    }

    public static int[] read(BufferedReader br) throws Exception {
        return Arrays.stream(br.readLine().split(" ")).mapToInt(Integer::parseInt).toArray();
    }
}
```

## [734. èƒ½é‡çŸ³](https://www.acwing.com/problem/content/736/)
å²©çŸ³æ€ªç‰©æœè¾¾ç”Ÿæ´»åœ¨é­”æ³•æ£®æ—ä¸­ï¼Œä»–åœ¨åˆé¤æ—¶æ”¶é›†äº†Nå—èƒ½é‡çŸ³å‡†å¤‡å¼€åƒã€‚

ç”±äºä»–çš„å˜´å¾ˆå°ï¼Œæ‰€ä»¥ä¸€æ¬¡åªèƒ½åƒä¸€å—èƒ½é‡çŸ³ã€‚

èƒ½é‡çŸ³å¾ˆç¡¬ï¼Œåƒå®Œéœ€è¦èŠ±ä¸å°‘æ—¶é—´ã€‚

åƒå®Œç¬¬ $i$ å—èƒ½é‡çŸ³éœ€è¦èŠ±è´¹çš„æ—¶é—´ä¸º$S_i$ç§’ã€‚

æœè¾¾é åƒèƒ½é‡çŸ³æ¥è·å–èƒ½é‡ã€‚ 

ä¸åŒçš„èƒ½é‡çŸ³åŒ…å«çš„èƒ½é‡å¯èƒ½ä¸åŒã€‚

æ­¤å¤–ï¼Œèƒ½é‡çŸ³ä¼šéšç€æ—¶é—´æµé€é€æ¸å¤±å»èƒ½é‡ã€‚

ç¬¬ $i$ å—èƒ½é‡çŸ³æœ€åˆåŒ…å«$E_i$å•ä½çš„èƒ½é‡ï¼Œå¹¶ä¸”æ¯ç§’å°†å¤±å»$L_i$å•ä½çš„èƒ½é‡ã€‚

å½“æœè¾¾å¼€å§‹åƒä¸€å—èƒ½é‡çŸ³æ—¶ï¼Œä»–å°±ä¼šç«‹å³è·å¾—è¯¥èƒ½é‡çŸ³æ‰€å«çš„å…¨éƒ¨èƒ½é‡ï¼ˆæ— è®ºå®é™…åƒå®Œè¯¥çŸ³å¤´éœ€è¦å¤šå°‘æ—¶é—´ï¼‰ã€‚

èƒ½é‡çŸ³ä¸­åŒ…å«çš„èƒ½é‡æœ€å¤šé™ä½è‡³0ã€‚

è¯·é—®æœè¾¾é€šè¿‡åƒèƒ½é‡çŸ³å¯ä»¥è·å¾—çš„æœ€å¤§èƒ½é‡æ˜¯å¤šå°‘ï¼Ÿ

**è¾“å…¥æ ¼å¼**

ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•°Tï¼Œè¡¨ç¤ºå…±æœ‰Tç»„æµ‹è¯•æ•°æ®ã€‚

æ¯ç»„æ•°æ®ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•°Nï¼Œè¡¨ç¤ºèƒ½é‡çŸ³çš„æ•°é‡ã€‚

æ¥ä¸‹æ¥$N$è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸‰ä¸ªæ•´æ•°$S_i,E_i,L_i$ã€‚

**è¾“å‡ºæ ¼å¼**

æ¯ç»„æ•°æ®è¾“å‡ºä¸€ä¸ªç»“æœï¼Œæ¯ä¸ªç»“æœå ä¸€è¡Œã€‚

ç»“æœè¡¨ç¤ºä¸ºâ€œCase #x: yâ€ï¼Œå…¶ä¸­xæ˜¯ç»„åˆ«ç¼–å·ï¼ˆä»1å¼€å§‹ï¼‰ï¼Œyæ˜¯å¯ä»¥è·å¾—çš„æœ€å¤§èƒ½é‡å€¼ã€‚

**æ•°æ®èŒƒå›´**
- $1â‰¤Tâ‰¤10$
- $1â‰¤Nâ‰¤100$
- $1â‰¤Siâ‰¤100$
- $1â‰¤Eiâ‰¤105$
- $0â‰¤Liâ‰¤105$
  
**è¾“å…¥æ ·ä¾‹ï¼š**
```c
3
4
20 10 1
5 30 5
100 30 1
5 80 60
3
10 4 1000
10 3 1000
10 8 1000
2
12 300 50
5 200 0
```
**è¾“å‡ºæ ·ä¾‹ï¼š**
```c
Case #1: 105
Case #2: 8
Case #3: 500
```
**æ ·ä¾‹è§£é‡Š**

åœ¨æ ·ä¾‹ï¼ƒ1ä¸­ï¼Œæœ‰N = 4ä¸ªå®çŸ³ã€‚æœè¾¾å¯ä»¥é€‰æ‹©çš„ä¸€ä¸ªåƒçŸ³å¤´é¡ºåºæ˜¯ï¼š

åƒç¬¬å››å—çŸ³å¤´ã€‚è¿™éœ€è¦5ç§’ï¼Œå¹¶ç»™ä»–80å•ä½çš„èƒ½é‡ã€‚
åƒç¬¬äºŒå—çŸ³å¤´ã€‚è¿™éœ€è¦5ç§’ï¼Œå¹¶ç»™ä»–5å•ä½çš„èƒ½é‡ï¼ˆç¬¬äºŒå—çŸ³å¤´å¼€å§‹æ—¶å…·æœ‰30å•ä½èƒ½é‡ï¼Œ5ç§’åå¤±å»äº†25å•ä½çš„èƒ½é‡ï¼‰ã€‚
åƒç¬¬ä¸‰å—çŸ³å¤´ã€‚è¿™éœ€è¦100ç§’ï¼Œå¹¶ç»™ä»–20å•ä½çš„èƒ½é‡ï¼ˆç¬¬ä¸‰å—çŸ³å¤´å¼€å§‹æ—¶å…·æœ‰30å•ä½èƒ½é‡ï¼Œ10ç§’åå¤±å»äº†10å•ä½çš„èƒ½é‡ï¼‰ã€‚
åƒç¬¬ä¸€å—çŸ³å¤´ã€‚è¿™éœ€è¦20ç§’ï¼Œå¹¶ç»™ä»–0å•ä½çš„èƒ½é‡ï¼ˆç¬¬ä¸€å—çŸ³å¤´ä»¥10å•ä½èƒ½é‡å¼€å§‹ï¼Œ110ç§’åå·²ç»å¤±å»äº†æ‰€æœ‰çš„èƒ½é‡ï¼‰ã€‚
ä»–ä¸€å…±è·å¾—äº†105å•ä½çš„èƒ½é‡ï¼Œè¿™æ˜¯èƒ½è·å¾—çš„æœ€å¤§å€¼ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯105ã€‚

åœ¨æ ·æœ¬æ¡ˆä¾‹ï¼ƒ2ä¸­ï¼Œæœ‰N = 3ä¸ªå®çŸ³ã€‚

æ— è®ºæœè¾¾é€‰æ‹©åƒå“ªå—çŸ³å¤´ï¼Œå‰©ä¸‹çš„ä¸¤ä¸ªçŸ³å¤´çš„èƒ½é‡éƒ½ä¼šè€—å…‰ã€‚

æ‰€ä»¥ä»–åº”è¯¥åƒç¬¬ä¸‰å—çŸ³å¤´ï¼Œç»™ä»–æä¾›8å•ä½çš„èƒ½é‡ã€‚

åœ¨æ ·æœ¬æ¡ˆä¾‹ï¼ƒ3ä¸­ï¼Œæœ‰N = 2ä¸ªå®çŸ³ã€‚æœè¾¾å¯ä»¥ï¼š

åƒç¬¬ä¸€å—çŸ³å¤´ã€‚è¿™éœ€è¦12ç§’ï¼Œå¹¶ç»™ä»–300å•ä½çš„èƒ½é‡ã€‚
åƒç¬¬äºŒå—çŸ³å¤´ã€‚è¿™éœ€è¦5ç§’ï¼Œå¹¶ç»™ä»–200å•ä½çš„èƒ½é‡ï¼ˆç¬¬äºŒå—çŸ³å¤´éšç€æ—¶é—´çš„æ¨ç§»ä¸ä¼šå¤±å»ä»»ä½•èƒ½é‡ï¼ï¼‰ã€‚
æ‰€ä»¥ç­”æ¡ˆæ˜¯500ã€‚

### è§£æ³•ä¸€
è´ªå¿ƒ+èƒŒåŒ…çš„è§£æ³•ã€‚

ä¼ ç»Ÿçš„01èƒŒåŒ…ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯ç›´æ¥éå†ç»™å®šçš„åŸå§‹ç‰©å“é¡ºåºï¼Œç„¶åè¿›è¡Œé€’æ¨ï¼Œè¿™é‡Œå®é™…ä¸Šå°±åŒ…å«äº†æ‹¿å–çš„é¡ºåºï¼Œç‰©å“é å‰çš„ä¼šè¢«ä¼˜å…ˆæ‹¿å–ï¼Œåªä¸è¿‡ä¼ ç»Ÿ01èƒŒåŒ…æ‹¿å–é¡ºåºå¯¹ç»“æœæ²¡æœ‰å½±å“ï¼Œæ‰€ä»¥ç›´æ¥é¡ºåºé€’æ¨æ²¡æœ‰é—®é¢˜ã€‚

è€Œè¿™é¢˜ä¸­åƒçŸ³å¤´çš„é¡ºåºä¼šå¯¹ç»“æœäº§ç”Ÿå½±å“ï¼Œæ‰€ä»¥éœ€è¦ä¿è¯é€šè¿‡æˆ‘ä»¬è®¾å®šçš„æ’åˆ—é¡ºåºè¿›è¡Œæ‹¿å–æœ€ç»ˆä¸€å®šèƒ½æ‹¿åˆ°æœ€ä¼˜è§£ã€‚

å‡è®¾æœ€ä¼˜çš„åƒçŸ³å¤´çš„é¡ºåºæ˜¯$a_0, a_1, a_2,...,a_i,a_j,...,a_k$ã€‚$a_i$ä»£è¡¨çŸ³å¤´åœ¨åŸå§‹åºåˆ—ä¸­çš„ä½ç½®ï¼Œ$k$ä¸ºæœ€ç»ˆåƒçš„çŸ³å¤´ä¸ªæ•°ã€‚é‚£ä¹ˆæˆ‘ä»¬äº¤æ¢ä»»æ„çš„**ç›¸é‚»**ä¸¤ä¸ªçŸ³å¤´$a_i$å’Œ$a_j$å¯¹å…¶ä»–çš„çŸ³å¤´æ˜¯æ²¡æœ‰ä»»ä½•å½±å“çš„ï¼Œå¹¶ä¸”è¿™ç§äº¤æ¢æœ€ç»ˆè·å¾—çš„èƒ½é‡ä¸€å®šæ˜¯**å°äºç­‰äº**å½“å‰çš„æœ€ä¼˜è§£è·å¾—çš„èƒ½é‡çš„ï¼Œå³ï¼ˆ$t$ä¸ºä¹‹å‰æ¶ˆè€—çš„æ—¶é—´ï¼‰
$$
E_i-(t*l_i)+E_j-(t+S_i)*l_j \geq E_j-(t*l_j)+E_i-(t+S_j)*l_i
$$
åŒ–ç®€åä¸ºï¼š$S_i*l_j \leq S_j*l_i$ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦æŒ‰ç…§è¿™ä¸€æ¡ä»¶æ’åˆ—çŸ³å¤´ï¼Œç„¶åè¿›è¡Œé€’æ¨å°±èƒ½ä¿è¯è·å¾—æœ€å¤§æ”¶ç›Š

æ’åˆ—å¥½ä¹‹åæˆ‘ä»¬ä»¥æ—¶é—´$S$ä½œä¸ºèƒŒåŒ…çš„ä½“ç§¯
- çŠ¶æ€ï¼š$dp[i][j]$ä¸ºå‰$i$ä¸ªçŸ³å¤´ï¼Œæ¶ˆè€—æ—¶é—´**åˆšå¥½**ä¸º$j$æ—¶æœ€å¤§çš„æ”¶ç›Š
- è½¬ç§»æ–¹ç¨‹ï¼š$dp[i][j] = \max(dp[i-1][j], dp[i-1][j-s_i]+\max(0, E_i-(j-s_i)*l_i))$
- å‡ºå£ï¼š$\max(dp[i][j])$
  
æ³¨æ„è¿™é‡Œå¿…é¡»è¦è®¾ç½®ä¸ºæ—¶é—´**æ°å¥½ä¸º**$j$çš„æœ€å¤§æ”¶ç›Šï¼Œå¦‚æœè®¾ç½®æˆ**ä¸è¶…è¿‡**ï¼Œè¿™é‡Œ$E_i-(j-s_i)*l_i$çš„è®¡ç®—å°±æœ‰é—®é¢˜ï¼Œ$j-s_i$å°±ä¸æ˜¯å‡†ç¡®çš„æ¶ˆè€—æ—¶é—´ï¼Œå¯¼è‡´æœ€ç»ˆç»“æœä¸å¯¹
```java
import java.util.*;
import java.io.*;

class Main {

    public static void main(String... args) throws Exception {
        PrintWriter out = new PrintWriter(new BufferedOutputStream(System.out));
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        // BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("./input.txt")));
        int T = read(br)[0];
        int idx = 0;
        while (T-- > 0) {
            idx++;
            int N = read(br)[0];
            int[] s = new int[N], e = new int[N], l = new int[N];
            for (int i = 0; i < N; i++) {
                int[] t = read(br);
                s[i] = t[0]; e[i] = t[1]; l[i] = t[2];
            }
            out.printf("Case #%d: %d\n", idx, solve(N, s, e, l));
        }
        out.flush();
    }

    //æŒ‰ç…§Si/Liæ’åº
    public static int solve(int N, int[] s, int[] e, int[] lo) {
        int MAX = 10005;
        Integer[] id = new Integer[N];
        for (int i = 0; i < N; i++) id[i]=i;
        Arrays.sort(id, (i1, i2)->s[i1]*lo[i2]-s[i2]*lo[i1]);
        int[] dp = new int[MAX];
        int res = 0;
        for (int k = 0; k < N; k++) {
            int i = id[k];
            for (int j = MAX-1; j >= s[i]; j--) {
                dp[j] = Math.max(dp[j], dp[j-s[i]] + Math.max(0, e[i]-(j-s[i])*lo[i]));
                res = Math.max(res, dp[j]);
            }
        }
        return res;
    }

    public static int[] read(BufferedReader br) throws Exception {
        return Arrays.stream(br.readLine().split(" ")).mapToInt(Integer::parseInt).toArray();
    }
}
```

## [487. é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ](https://www.acwing.com/problem/content/description/489/)

é‡‘æ˜ä»Šå¤©å¾ˆå¼€å¿ƒï¼Œå®¶é‡Œè´­ç½®çš„æ–°æˆ¿å°±è¦é¢†é’¥åŒ™äº†ï¼Œæ–°æˆ¿é‡Œæœ‰ä¸€é—´é‡‘æ˜è‡ªå·±ä¸“ç”¨çš„å¾ˆå®½æ•çš„æˆ¿é—´ã€‚

æ›´è®©ä»–é«˜å…´çš„æ˜¯ï¼Œå¦ˆå¦ˆæ˜¨å¤©å¯¹ä»–è¯´ï¼šâ€œä½ çš„æˆ¿é—´éœ€è¦è´­ä¹°å“ªäº›ç‰©å“ï¼Œæ€ä¹ˆå¸ƒç½®ï¼Œä½ è¯´äº†ç®—ï¼Œåªè¦ä¸è¶…è¿‡Nå…ƒé’±å°±è¡Œâ€ã€‚

ä»Šå¤©ä¸€æ—©ï¼Œé‡‘æ˜å°±å¼€å§‹åšé¢„ç®—äº†ï¼Œä»–æŠŠæƒ³ä¹°çš„ç‰©å“åˆ†ä¸ºä¸¤ç±»ï¼šä¸»ä»¶ä¸é™„ä»¶ï¼Œé™„ä»¶æ˜¯ä»å±äºæŸä¸ªä¸»ä»¶çš„ï¼Œä¸‹è¡¨å°±æ˜¯ä¸€äº›ä¸»ä»¶ä¸é™„ä»¶çš„ä¾‹å­ï¼š

![](https://i.loli.net/2021/03/02/HGepaVgL4Emdfhr.png)

å¦‚æœè¦ä¹°å½’ç±»ä¸ºé™„ä»¶çš„ç‰©å“ï¼Œå¿…é¡»å…ˆä¹°è¯¥é™„ä»¶æ‰€å±çš„ä¸»ä»¶ã€‚

æ¯ä¸ªä¸»ä»¶å¯ä»¥æœ‰0ä¸ªã€1ä¸ªæˆ–2ä¸ªé™„ä»¶ã€‚

é™„ä»¶ä¸å†æœ‰ä»å±äºè‡ªå·±çš„é™„ä»¶ã€‚

é‡‘æ˜æƒ³ä¹°çš„ä¸œè¥¿å¾ˆå¤šï¼Œè‚¯å®šä¼šè¶…è¿‡å¦ˆå¦ˆé™å®šçš„Nå…ƒã€‚

äºæ˜¯ï¼Œä»–æŠŠæ¯ä»¶ç‰©å“è§„å®šäº†ä¸€ä¸ªé‡è¦åº¦ï¼Œåˆ†ä¸º5ç­‰ï¼šç”¨æ•´æ•°1~5è¡¨ç¤ºï¼Œç¬¬5ç­‰æœ€é‡è¦ã€‚

ä»–è¿˜ä»å› ç‰¹ç½‘ä¸ŠæŸ¥åˆ°äº†æ¯ä»¶ç‰©å“çš„ä»·æ ¼ï¼ˆéƒ½æ˜¯10å…ƒçš„æ•´æ•°å€ï¼‰ã€‚

ä»–å¸Œæœ›åœ¨ä¸è¶…è¿‡Nå…ƒï¼ˆå¯ä»¥ç­‰äºNå…ƒï¼‰çš„å‰æä¸‹ï¼Œä½¿æ¯ä»¶ç‰©å“çš„ä»·æ ¼ä¸é‡è¦åº¦çš„ä¹˜ç§¯çš„æ€»å’Œæœ€å¤§ã€‚

è®¾ç¬¬jä»¶ç‰©å“çš„ä»·æ ¼ä¸º$v[j]$ï¼Œé‡è¦åº¦ä¸º$w[j]$ï¼Œå…±é€‰ä¸­äº†$k$ä»¶ç‰©å“ï¼Œç¼–å·ä¾æ¬¡ä¸º$j_1$ï¼Œ$j_2$ï¼Œâ€¦ï¼Œ$j_k$ï¼Œåˆ™æ‰€æ±‚çš„æ€»å’Œä¸ºï¼š

$v[j_1]âˆ—w[j_1]+v[j_2]âˆ—w[j_2]+â€¦+v[j_k]âˆ—w[j_k]$ï¼ˆå…¶ä¸­*ä¸ºä¹˜å·ï¼‰

è¯·ä½ å¸®åŠ©é‡‘æ˜è®¾è®¡ä¸€ä¸ªæ»¡è¶³è¦æ±‚çš„è´­ç‰©å•ã€‚

**è¾“å…¥æ ¼å¼**

è¾“å…¥æ–‡ä»¶çš„ç¬¬1è¡Œï¼Œä¸ºä¸¤ä¸ªæ­£æ•´æ•°ï¼Œç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼šN mï¼Œå…¶ä¸­Nè¡¨ç¤ºæ€»é’±æ•°ï¼Œmä¸ºå¸Œæœ›è´­ä¹°ç‰©å“çš„ä¸ªæ•°ã€‚

ä»ç¬¬2è¡Œåˆ°ç¬¬m+1è¡Œï¼Œç¬¬jè¡Œç»™å‡ºäº†ç¼–å·ä¸ºj-1çš„ç‰©å“çš„åŸºæœ¬æ•°æ®ï¼Œæ¯è¡Œæœ‰3ä¸ªéè´Ÿæ•´æ•°v p qï¼Œå…¶ä¸­vè¡¨ç¤ºè¯¥ç‰©å“çš„ä»·æ ¼ï¼Œpè¡¨ç¤ºè¯¥ç‰©å“çš„é‡è¦åº¦ï¼ˆ1~5ï¼‰ï¼Œqè¡¨ç¤ºè¯¥ç‰©å“æ˜¯ä¸»ä»¶è¿˜æ˜¯é™„ä»¶ã€‚

å¦‚æœq=0ï¼Œè¡¨ç¤ºè¯¥ç‰©å“ä¸ºä¸»ä»¶ï¼Œå¦‚æœq>0ï¼Œè¡¨ç¤ºè¯¥ç‰©å“ä¸ºé™„ä»¶ï¼Œqæ˜¯æ‰€å±ä¸»ä»¶çš„ç¼–å·ã€‚

**è¾“å‡ºæ ¼å¼**

è¾“å‡ºæ–‡ä»¶åªæœ‰ä¸€ä¸ªæ­£æ•´æ•°ï¼Œä¸ºä¸è¶…è¿‡æ€»é’±æ•°çš„ç‰©å“çš„ä»·æ ¼ä¸é‡è¦åº¦ä¹˜ç§¯çš„æ€»å’Œçš„æœ€å¤§å€¼ï¼ˆ<200000ï¼‰ã€‚

**æ•°æ®èŒƒå›´**ï¼š N<32000,m<60,v<10000

**è¾“å…¥æ ·ä¾‹ï¼š**
```c
1000 5
800 2 0
400 5 1
300 5 1
400 3 0
500 2 0
```
**è¾“å‡ºæ ·ä¾‹ï¼š**
```c
2200
```

### è§£æ³•ä¸€
è¿™é¢˜å¼€å§‹ç£¨äº†å¥½ä¹…ï¼Œä¸€å¼€å§‹æ²¡çœ‹åˆ°é¢˜ç›®è¯´çš„é™„ä»¶æœ€å¤šä¸¤ä¸ªï¼Œåé¢çœ‹é¢˜è§£çœ‹è§é™„ä»¶åªæœ‰æœ€å¤šä¸¤ä¸ªçš„æ—¶å€™é©¬ä¸Šæ»šå›å»å†™äº†ä¸‹é¢çš„è§£æ³•

å› ä¸ºé™„ä»¶æœ€å¤šä¸¤ä¸ªï¼Œæ‰€ä»¥æˆ‘ä»¬å®Œå…¨å¯ä»¥ç›´æ¥æšä¸¾æ‰€æœ‰çš„**ä¸»ä»¶+é™„ä»¶**çš„æƒ…å†µï¼Œç„¶åå°±æ˜¯ä¸€ä¸ªç®€å•çš„åˆ†ç»„èƒŒåŒ…å°±å®Œäº‹äº†ã€‚ä¸‹é¢çš„è§£æ³•æ˜¯äºŒç»´çš„ï¼Œä¸€ç»´çš„æœ‰æ—¶å€™ä¼šéšè—ä¸€äº›ä¿¡æ¯ï¼Œè®©äººå¿½ç•¥ä¸€äº›ç»†èŠ‚ï¼Œè¿™é‡Œå°±ä¸æ”¾ä¸€ç»´çš„å†™æ³•äº†ï¼Œåæ­£ä¹Ÿå°±æ”¹å‡ è¡Œä»£ç çš„äº‹æƒ…
```java
import java.util.*;
import java.io.*;

class Main {

    static int[] v, w, p;

    public static void main(String... args) throws Exception {
        PrintWriter out = new PrintWriter(new BufferedOutputStream(System.out));
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        // BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("./input.txt")));
        int[] in = read(br);
        int N = in[0], M = in[1];
        v = new int[M+1]; w = new int[M+1]; p = new int[M+1];
        //ä¾èµ–å…³ç³»
        List<Integer>[] adj = new ArrayList[M+1];
        for (int i = 1; i <= M; i++) {
            int[] t = read(br);
            v[i] = t[0]; w[i] = t[1]; p[i] = t[2];
            if (adj[p[i]] == null) {
                adj[p[i]] = new ArrayList<>();
            }
            adj[p[i]].add(i);
        }
        int Z = adj[0].size();
        int[][] dp = new int[Z+1][N+1];
        //å°†ä¾èµ–å…³ç³»è¿›è¡Œåˆ†ç»„æšä¸¾æ‰€æœ‰æƒ…å†µï¼Œé¢˜ç›®ä¸­æœ‰ä¸€æ¡å…³é”®ä¿¡æ¯å°±æ˜¯é™„ä»¶æœ€å¤šåªæœ‰ä¸¤ä»¶
        //adj[0]å°±æ˜¯æ‰€æœ‰çš„ä¸»ä»¶
        for (int i = 1; i <= Z; i++) {
            int pi = adj[0].get(i-1); //piä¸æ˜¯å¿…é€‰ï¼Œä½†æ˜¯è¦é€‰piçš„é™„ä»¶ï¼Œpiå°±å¿…é€‰äº†
            for (int j = N; j >= 0; j--) {
                dp[i][j] = dp[i-1][j]; //ä¸é€‰å½“å‰ä¸»ä»¶
                int s = adj[pi] == null ? 0 : adj[pi].size(); //é™„ä»¶ä¸ªæ•°,0,1,2
                //æšä¸¾å½“å‰ç»„å†…çš„æ‰€æœ‰æƒ…å†µ
                for (int k = 0; k < (1<<s); k++) {
                    //å½“å‰ç»„æŸé¡¹çš„ä½“ç§¯å’Œä»·å€¼å’Œ
                    int t = v[pi]*w[pi];
                    int sv = v[pi];
                    for (int c = 0; c < s; c++) {
                        if (((k>>>c)&1)==1) {
                            int d = adj[pi].get(c);
                            t += v[d]*w[d];
                            sv += v[d];
                        }
                    }
                    if (j >= sv) {
                        //æ³¨æ„è¿™é‡Œåº”è¯¥å’Œdp[i][j]æ¯”è¾ƒ
                        dp[i][j] = Math.max(dp[i][j], dp[i-1][j-sv] + t);
                    }
                }
            }
        }
        out.println(dp[Z][N]);
        out.flush();
    }

    public static int[] read(BufferedReader br) throws Exception {
        return Arrays.stream(br.readLine().split(" ")).mapToInt(Integer::parseInt).toArray();
    }
}
```
