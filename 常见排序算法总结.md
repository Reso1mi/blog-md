---
title: å¸¸è§çš„æ’åºç®—æ³•æ€»ç»“
tags:
  - æ’åº
  - æ•°æ®ç»“æ„
categories:
  - ç®—æ³•
author: lgw
date: 2018/12/11
cover: 'http://static.imlgw.top///20190407/zq6WrSBA0602.png?imageslim'
abbrlink: '83535e94'
---

## å¸¸è§æ’åºç®—æ³•æ€»ç»“
å…³äºæ’åºçš„éƒ¨åˆ†ä¸€ç›´æƒ³æ€»ç»“ä¸‹ä¸€ç›´æ²¡æ—¶é—´ï¼Œç°åœ¨æ¥æ€»ç»“ä¸‹å§ã€‚gifå›¾æ¥è‡ªå¾®ä¿¡ä¸Šçš„æ–‡ç«  (**äº”åˆ†é’Ÿå­¦ç®—æ³•**çš„å…¬ä¼—å·ï¼ŒæŒºä¸é”™å¹²è´§æŒºå¤šçš„)ï¼ŒåŸç†æ€§çš„ä¸œè¥¿å°±ä¸è®²äº†ï¼Œå›¾è®²çš„æ¯”æˆ‘å¥½ã€‚å¦‚æœè¿˜æ˜¯ä¸æ‡‚å¯ä»¥çœ‹çœ‹ã€Šç®—æ³•ã€‹é‡Œé¢çš„è½¨è¿¹å›¾ï¼Œé‚£ä¸ªä¹Ÿå¾ˆç›´è§‚ 

### å†’æ³¡æ’åº 

  ![weixin](http://static.imlgw.top/f02ace7b7fb9b810274e683c2be54a02_640_wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1.gif)

```java
//å†’æ³¡æ’åº
private static void MaoPaoSort(int []nums){
    for (int i=nums.length-1;i>=0;i--){
        for (int j=0;j<i;j++){
            if(nums[j]>nums[j+1]){
                swap(nums,j,j+1);
            }
        }
    }
}
```
### é€‰æ‹©æ’åº

![weixin](http://static.imlgw.top/640.gif)

```java
//é€‰æ‹©æ’åº
private static void SelectSort(int []nums){
    for (int i=0;i<nums.length;i++){
        int min=nums[i];
        for (int j=i+1;j<nums.length;j++){
            if(nums[j]<min){
                min=nums[j];
                swap(nums,j,i);
            }
        }
    }
}
```

### ç›´æ¥æ’å…¥æ’åº

![weixin](http://static.imlgw.top/640%20%281%29.gif)

```java
//ç›´æ¥æ’å…¥æ’åº
private static void InsertSort(int []nums){
    for (int i=1;i<nums.length;i++){
        for (int j=i;j>0&&nums[j]<nums[j-1];j--){
            swap(nums,j,j-1);
        }
    }
}
```

### å½’å¹¶æ’åº

![weixin](http://static.imlgw.top/640%20%282%29.gif)

#### å›¾ä¸Šé¢çš„æ˜¯é€’å½’ç‰ˆæœ¬çš„å½’å¹¶ï¼Œå®ç°å¦‚ä¸‹

```java
//å½’å¹¶æ’åº
private static void MergerSort(int []nums){
    help=new int[nums.length];
    MergerSort(nums,0,nums.length-1);
}

private static void MergerSort(int []nums,int left,int right){
    if(left>=right){
        return;
    }
    //ä¸èƒ½ç›´æ¥åœ¨è¿™é‡Œåˆ›å»ºæ•°ç»„ï¼Œä¸¥é‡å½±å“æ€§èƒ½ï¼Œå¯ä»¥åœ¨ä¸Šé¢å†å¥—ä¸€å±‚æ–¹æ³•ï¼Œæˆ–è€…é‡‡ç”¨merger2çš„æ–¹å¼(ä¹Ÿä¸å¥½ï¼Œåº”è¯¥ä¿è¯è¾…åŠ©æ•°ç»„åªåˆå§‹åŒ–ä¸€æ¬¡)
    //help=new int[nums.length];
    int mid=left+((right-left)>>1);
    MergerSort(nums,left,mid);
    MergerSort(nums,mid+1,right);
    merger(nums,left,mid,right);
}

//è¾…åŠ©æ•°ç»„
private static int []help;

//å½’å¹¶æ“ä½œ
private static void merger(int []nums ,int left,int mid,int right){
    int i=left,j=mid+1;
    //å…¶å®æ²¡åŒºåˆ«ç©ºé—´å¤æ‚åº¦ï¼Œéƒ½æ˜¯O(N) åé¢è¿™ä¸ªä¼šæ›´åŠ è€—è´¹æ—¶é—´
    //int []help=new int[right-left+1];
    for (int k=left;k<=right;k++){
        //ä¸€è¾¹çš„åˆ°è¾¾å°½å¤´,å…ˆåˆ¤æ–­ä¸¤ä¸ªè¾¹ç•Œ,ä¸ç„¶å°±è¦æƒ³ä¸‹é¢é‚£æ ·å†™
        if(i>mid){
            help[k]=nums[j++];
        } else if(j>right){
            help[k]=nums[i++];
        } else if(nums[i]>nums[j]){
            help[k]=nums[j++];
        } else{
            //ç›¸ç­‰çš„æ—¶å€™å·¦è¾¹å…ˆè¿›æ ˆä¿è¯ç¨³å®šæ€§
            help[k]=nums[i++];
        }
        /*// 2 
            if( i<=mid &&j<=right && nums[i]>nums[j]){
                help[k]=nums[j++];
            }else if( i<=mid &&j<=right && nums[i]<=nums[j]){
                //ç›¸ç­‰çš„æ—¶å€™å·¦è¾¹å…ˆè¿›æ ˆä¿è¯ç¨³å®šæ€§
                help[k]=nums[i++];
            }else if(i>mid){
                help[k]=nums[j++];
            }else if(j>right){ 
                help[k]=nums[i++];
            }*/
    }
    //å¤åˆ¶
    for (int k=left;k<=right;k++){
        nums[k]=help[k];
    }

    /*while (p1 <= m && p2 <= r) {
            help[i++] = arr[p1] < arr[p2] ? arr[p1++] : arr[p2++];
        }
        while (p1 <= m) {
            help[i++] = arr[p1++];
        }
        while (p2 <= r) {
            help[i++] = arr[p2++];
        }
        for (i = 0; i < help.length; i++) {
            arr[l + i] = help[i];
        }*/
}
```

#### éé€’å½’ç‰ˆæœ¬

```java
//å½’å¹¶æ’åºï¼ˆéé€’å½’ï¼Œæ–¹å‘ä¸ä¸€æ ·ï¼Œæ—¶é—´å¤æ‚åº¦ä¸€æ ·éƒ½ä¸ºO(NlogN)
private static void MergerSortNoRecurse(int []nums){
    help=new int[nums.length];
    //æ§åˆ¶åˆå¹¶çš„é•¿åº¦ 
    for (int sz=1;sz<nums.length;sz*=2){
        //æ§åˆ¶åˆå¹¶çš„å‘åç§»åŠ¨
        for (int i=0;i<nums.length-sz;i+=2*sz){
            int r=i+2*sz-1<nums.length-1?i+2*sz-1:nums.length-1;
            merger(nums,i,i+sz-1,r);
        }
    }
}
```

### ä¸‰å‘åˆ‡åˆ†çš„å¿«æ’(è·å…°å›½æ——é—®é¢˜)

![weixin](http://static.imlgw.top/640%20%283%29.gif)

```java
//å¿«æ’ (ä¸å…·æœ‰ç¨³å®šæ€§æˆ–è€…éš¾ä»¥å®ç°)
private static void QuickSort(int []nums,int l,int r){
    if(l>r){
        return;
    }
    //éšæœºä¸€ä¸ªæ•°å’Œräº¤æ¢ ---éšæœºå¿«æ’
    swap(nums, l + (int) (Math.random() * (r - l + 1)), r);
    int []index=partition2(nums,l,r);
    QuickSort(nums,l,index[0]-1);
    QuickSort(nums,index[1]+1,r);
}

public static int partition1(int []nums ,int l,int r){
    int base = l;
    //åŒæŒ‡é’ˆ
    int lo = l, hi = r;
    //è¿™ç§partitionçš„å®ç°ç»†èŠ‚æœ‰ç‚¹ä¸å¥½ç†è§£
    //è¿™ç§partitionä¸èƒ½éšæœºåŸºå‡†å…ƒç´ ã€‚ã€‚ã€‚ã€‚
    //å‚ç…§äº†å·¦ç¥çš„ä»£ç å‘ç°å…¶å®å¯ä»¥åœ¨partitionä¹‹å‰éšæœºä¸€ä¸ªå˜é‡å’Œloäº¤æ¢ï¼Œä¹Ÿæœ‰åŒæ ·çš„æ•ˆæœä¹Ÿæ¶ˆé™¤äº†è¾“å…¥çš„å½±å“
    while (lo < hi) {
        //å¿…é¡»å…ˆä»å³å¾€å·¦,ä¸»è¦æ˜¯ä¸ºäº†å½’ä½çš„æ—¶å€™ä¸å‡ºç°é—®é¢˜
        //æ¯”å¦‚è¿™é‡Œé€‰å–çš„åŸºå‡†å…ƒç´ æ˜¯ lo ä¹Ÿå°±æ˜¯å­æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœå…ˆä»å·¦å¾€å³æœ€åäº¤æ¢çš„å°±æ˜¯loå’Œä¸€ä¸ªæ¯”loå¤§çš„æ•°ç„¶è€Œæ¯”loå¤§çš„æ•°åº”è¯¥æ”¾åœ¨å³è¾¹
        //åä¹‹å¦‚æœé€‰çš„æ˜¯hiä¸ºåŸºå‡†å°±è¦å…ˆä»å·¦å¾€å³
        // 7  0  1  2    10  11  22
        while (nums[hi] >= nums[base] && lo < hi) {
            hi--;
        }
        while (nums[lo] <= nums[base] && lo < hi) {
            lo++;
        }
        if (lo < hi) {
            swap(nums, lo, hi);
        }
    }
    //å½’ä½ lo==hi
    swap(nums, hi, base);
    return lo;
}

//è·å…°å›½æ——ä¼˜åŒ–çš„å¿«æ’
public static int[] partition2(int []arr ,int l,int r){
    // 7  0  1  2    10  11  22        
    //å°äºåŒºä¸ºç©º
    int less=l-1;
    //l ----> more ä¸ºå¾…å®šåŒº
    int more=r;
    while(l<more){
        if(arr[l]<arr[r]){
            swap(arr,++less,l++);
        } else if(arr[l]>arr[r]){
            //å¤§äºåŸºå‡†æ—¶ , å¤§äºåŒºæ‰©å¤§(å¤§äºåŒºçš„å‰ä¸€ä¸ªå…ƒç´ å’Œå½“å‰å…ƒç´ äº¤æ¢ï¼Œä½†æ˜¯ä¸çŸ¥é“å¤§äºåŒºçš„å‰ä¸€ä¸ªå…ƒç´ æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œæ‰€ä»¥ä¸èƒ½l++)
            swap(arr,--more,l);
        } else{
            l++;
        }
    }
    //å’Œå¤§äºåŒºé—´çš„ç¬¬ä¸€ä¸ªäº¤æ¢ ä¿è¯å½’ä½æ­£ç¡®,å¦‚æœé€‰å–çš„æ˜¯ä»¥æœ€å·¦è¾¹ä¸ºåŸºå‡†å…ƒç´  è¿™é‡Œå°±åº”è¯¥å’Œlessäº¤æ¢
    //åˆ°è¿™é‡Œ  [less+1,more-1]ä¹‹é—´éƒ½æ˜¯ç­‰äº åŸºå‡†å…ƒç´  arrã€rã€‘ çš„
    swap(arr,more,r);
    //åˆ°è¿™  [less+1,more]ä¹‹é—´éƒ½æ˜¯ç­‰äº åŸºå‡†å…ƒç´  arrã€rã€‘ çš„
    return new int[]{less+1,more};
}
```

### å †æ’åº

![weixin](http://static.imlgw.top/640%20%284%29.gif)

```java
//å †æ’åº
private static void HeapSort(int []nums){
    if(nums.length<2){
        return;
    }
    //æ„å»ºå¤§æ ¹å †
    for (int i=0; i<nums.length; i++) {
        heapInsert(nums,i);
    }
    //äº¤æ¢å †é¡¶å’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹
    int size= nums.length;
    swap(nums,size-1,0);
    size--;
    while(size>1){
        //è°ƒæ•´
        heapIfy(nums,0,size);
        //æ¯æ¬¡éƒ½å’Œæœ€åä¸€ä¸ªå­©å­èŠ‚ç‚¹äº¤æ¢ï¼Œç„¶åsize--
        swap(nums,--size,0);
    }
}

//å‘ä¸Šçˆ¬
private static void heapInsert(int []nums, int index){
    //è¿­ä»£æ¯”è¾ƒå½“å‰èŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹çš„å€¼çš„å¤§å°
    while(nums[index]>nums[(index-1)/2]){
        swap(nums,index,(index-1)/2);
        index=(index-1)/2;
    }
}

//å‘ä¸‹çˆ¬
//indexä½ç½®çš„å€¼å˜å°åç»§ç»­è°ƒæ•´ä¸ºå¤§æ ¹å †
private static void heapIfy(int []nums,int index,int size){
    //å·¦å­©å­
    int left=index*2+1;
    //èŠ‚ç‚¹æœ‰å·¦å­©å­
    while(left<size){
        //åˆ¤æ–­æ˜¯å¦æœ‰å³å­©å­.....
        //å·¦å³å­©å­é‡Œçš„æœ€å¤§å€¼ æœ‰å³å­©å­ä¸”å³å­©å­å¤§äºå·¦å­©å­
        int largest=left+1<size && nums[left]<nums[left+1] ?left+1:left;
        largest=nums[largest]>nums[index]?largest:index;
        //æœ€å¤§å€¼ç­‰äºè‡ªå·±
        if(largest==index){
            break;
        }
        //äº¤æ¢å¤§å­©å­èŠ‚ç‚¹å’Œè‡ªå·±
        swap(nums,largest,index);
        //è®¾ç½®å¤§å­©å­çš„indexå’Œå·¦å­©å­
        index=largest;
        left=index*2+1;
    }
}
```

### å †æ’åºæ›´ä¼˜çš„åšæ³•

ä¸Šé¢çš„åšæ³•å¹¶ä¸æ˜¯æœ€ä¼˜çš„å †æ’åº

```java
public static void heapSort(int []nums){
    int last=nums.length-1;
    //Næ„å»ºå¤§æ ¹å †
    //ä»å€’æ•°ç¬¬äºŒå±‚å¼€å§‹
    for (int i=nums.length/2-1 ;i>=0;i--){
        heapIfy(nums,i,last);
    }
    //printArray(nums);
    while(last>=1){
        swap(nums,0,last--);
        heapIfy(nums,0,last);
    }
}

//i å¤§æ ¹å †è°ƒæ•´
public static void heapIfy(int[] nums,int i,int last){
    //åˆ¤æ–­æœ‰æ²¡æœ‰å­èŠ‚ç‚¹ï¼ˆå·¦å­©å­ï¼‰
    int left=i*2+1;
    while(left<=last){
        int right=left+1;
        //å·¦å³èŠ‚ç‚¹æœ€å¤§å€¼
        int larger=right<=last && nums[right] > nums[left]?right:left;
        if(nums[larger]>nums[i]){
            swap(nums,larger,i);
            i=larger;
            left=larger*2+1;
        } else{
            break;
        }
    }
}

public static  void  swap(int []nums,int a,int b){
    int temp=nums[a];
    nums[a]=nums[b];
    nums[b]=temp;
}
```

å¯¹æ¯”ä¹‹å‰çš„æ–¹æ³•ï¼Œæ„é€ å †çš„æ–¹å¼å‘ç”Ÿäº†å˜åŒ–ï¼Œä¸Šé¢é‚£ç§é€šè¿‡è‡ªä¸Šè€Œä¸‹çš„`insert`æ–¹å¼æ—¶é—´å¤æ‚åº¦æ˜¯`O(NlogN)`ï¼Œå…¶å®ä»”ç»†æƒ³æƒ³ï¼Œè¿™ä¸¤ç§æ–¹å¼æ˜¯å®Œå…¨ç›¸åçš„ï¼Œinsertçš„æ–¹å¼ï¼Œæœ€åä¸€å±‚æ¯ä¸ªå…ƒç´ æœ€åéƒ½å¯èƒ½è°ƒæ•´`logN`æ¬¡ï¼Œè€Œæœ€åä¸€å±‚ä¹Ÿæ˜¯å…ƒç´ æœ€å¤šçš„ä¸€å±‚ï¼Œè¿™æ ·ä¸€æ¥å¤æ‚åº¦å°±ä¼šå¤§å¤§å¢åŠ ï¼Œç›¸åå¦‚æœé‡‡ç”¨ä»åº•å‘ä¸Šçš„`heapIfy`æ–¹å¼æœ€åä¸€å±‚éƒ½åªéœ€è¦è°ƒæ•´`1`æ¬¡ï¼Œè€Œæ ¹èŠ‚ç‚¹éœ€è¦è°ƒæ•´`logN`æ¬¡ï¼Œè€Œæ ¹èŠ‚ç‚¹**åªæœ‰ä¸€ä¸ª**æ—¶é—´å¤æ‚åº¦å°±ä¼šå¤§å¤§é™ä½ï¼Œæœ€ç»ˆçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(N)ï¼Œ[å…·ä½“æ¨ç®—è¿‡ç¨‹å¯ä»¥çœ‹è¿™äº›å›ç­”](https://www.zhihu.com/question/20729324) 

**æ‰‹æ¨è¿‡ç¨‹**

![img](http://static.imlgw.top/image/20190617/kVuvnMfjuSns.png?imageslim)

æœ€åæ¨å¾—åˆ°å¾—å¤æ‚åº¦æ˜¯å°äº`O(2N)`ï¼Œä¹Ÿå°±æ˜¯`O(N)`çš„æ—¶é—´å¤æ‚åº¦ï¼Œå¦‚æœä¸æ˜¯åˆ·`leetCode` çœ‹åˆ°äº†ç±»ä¼¼çš„é¢˜å¯èƒ½ä¼šä¸€ç›´è¢«é‚£æ ·å»å†™ğŸ˜‚

**å†å›é¦–**

æ—¶éš”å¤šå¹´ï¼Œåˆå›å¤´å†™äº†ä¸€ä¸ªï¼Œå†™äº†å¤§æ¦‚åŠä¸ªå°æ—¶å·¦å³ï¼Œè¾¹å†™è¾¹å›å¿†ï¼Œæ„Ÿè§‰è¿™ä¸ªå†™æ³•æ¯”ä¸Šé¢å¥½ä¸€ç‚¹ç‚¹ï¼Œæ‰€ä»¥è®°å½•ä¸€ä¸‹

```java
import java.io.*;
import java.util.*;
public class Main{
    public static void main(String[] args){
        Scanner sc=new Scanner(System.in);
        int N=sc.nextInt();
        int[] nums=new int[N];
        for(int i=0;i<N;i++)nums[i]=sc.nextInt();
        heapSort(nums);
        for(int i=0;i<N;i++)System.out.print(nums[i]+" ");
    }

    public static void heapSort(int[] nums){
        //æ±‚å·¦å³å­©å­
        //       0 
        //   1       2
        // 3   4   5   6 
        //7                 7/2=3  4/2=1 8/2=4
        //O(N)æ„å»ºå †
        for(int i=nums.length/2;i>=0;i--){ //ä»2/nå¼€å§‹downæ„å»ºäºŒå‰æ ‘,ä¸ä¸€å®šè¦ç²¾ç¡®,å¤šä¸€ä¸¤ä¸ªæ— æ‰€è°“
            down(nums,i,nums.length);
        }

        int index=0,tail=nums.length;
        //å †æ’,å°†å †å¤´æ”¾åˆ°å°¾éƒ¨
        while(tail>0){
            swap(nums,index,--tail);
            down(nums,index,tail);
        }
    }

    public static void down(int[] nums,int index,int size){
        //æ±‚å·¦å³å­©å­
        //      0 
        //  1       2
        //3   4   5   6
        while(index*2+1 < size){ //è¿˜æœ‰å­©å­
            int left=index*2+1,right=left+1;
            //å·¦å³å­æ ‘ä¸­çš„è¾ƒå¤§
            int largeIndex = right<size && nums[left]<nums[right] ? right:left;
            if(nums[index] >= nums[largeIndex]){
                return;
            }
            swap(nums,index,largeIndex);
            index=largeIndex;
        }
    }

    public static void swap(int[] nums,int a,int b){
        int temp=nums[a];
        nums[a]=nums[b];
        nums[b]=temp;
    }
}
```



### å¸Œå°”æ’åº

å®é™…ä¸Šå†™æ’åºå°±æ˜¯åŸºäºæ’å…¥æ’åºçš„ï¼Œåœ¨å®ƒä¹‹ä¸Šè¿›è¡Œäº†æ•°å­¦ä¸Šçš„ä¼˜åŒ–ã€‚

![image](http://static.imlgw.top/640%20%285%29.gif)
	å®é™…ä¸Šä»é€†åºå¯¹çš„è§’åº¦æ¥çœ‹ï¼ŒåŸºäºæ¯”è¾ƒçš„æ’åºå°±æ˜¯ä¸ºäº†æ¶ˆé™¤é€†åºå¯¹çš„ä¸ªæ•°ï¼Œè€Œè¯¸å¦‚å†’æ³¡é€‰æ‹©æ¯æ¬¡éƒ½åªæ˜¯äº¤æ¢ç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ï¼Œæ¯æ¬¡äº¤æ¢æœ€å¤šåªå‡å°‘ä¸€ä¸ªé€†åºå¯¹ï¼Œè€Œå¸Œå°”æ’åºæ‰©å¤§äº†è¿™ä¸ªé—´è·ï¼Œå°±å¢å¤§äº†å‡å°‘é€†åºå¯¹çš„å¯èƒ½ã€‚ä¸è¿‡è¦ç ”ç©¶ä»–çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯æ•°å­¦ä¸Šçš„ç ”ç©¶çš„é—®é¢˜äº†ï¼Œè‡³äºæ¯æ¬¡é—´è·éƒ½å‡åŠè¿™ä¸ªä¹Ÿæ˜¯æ ¹æ®å¤§æ ·æœ¬æµ‹è¯•ä¸‹è¿™ç§é€’å¢åºåˆ—æ€§èƒ½ä¼šæ›´å¥½ O(âˆ©_âˆ©)O

```java
//æ’å…¥æ’åºçš„æ”¹è¿›
private static void ShellSort(int [] nums){
    int h=nums.length>>1;
    while(h>0){
        for (int i=h;i<nums.length;i++){
            //å®é™…ä¸Šæ˜¯å¢å¤§äº†æ’å…¥æ’åºçš„é—´éš™ï¼Œæœ€åè¿˜æ˜¯å¯¹è¿›è¡Œä¸€æ¬¡æ’å…¥æ’åº,ä¸è¿‡é‚£ä¸ªæ—¶å€™çš„æ•°æ®å·²ç»æ˜¯é«˜åº¦æœ‰åºäº†
            for (int j=i;j-h>=0&&nums[j]<nums[j-h];j-=h) {
                swap(nums,j,j-h);
            }
        }
        h=h>>1;
    }
}
```

---
### BUG
æ’ä¸ªåºè¿˜èƒ½æ’å‡ºBugï¼Ÿå¯¹çš„æ²¡é”™å°±æ˜¯æ’å‡ºäº†BugğŸ¤£ çœ‹çœ‹æˆ‘æœ€å¼€å§‹å†™çš„äº¤æ¢å‡½æ•°

```java
private static void swap(int []nums,int a,int b){
    nums[a]=nums[a]^nums[b];
    nums[b]=nums[a]^nums[b];
    nums[a]=nums[a]^nums[b];
}
```
ä¸ºäº†æŠ–è¿™ä¸ªæœºçµä»˜å‡ºäº†æƒ¨ç—›çš„ä»£ä»·ï¼Œä¹‹å‰ç”¨ >> æ‹¿æ¥å½“é™¤2æ“ä½œçš„æ—¶å€™å°±å¿½ç•¥äº†`ä¼˜å…ˆçº§`çš„é—®é¢˜ã€‚ã€‚ã€‚é‚£è¿™é‡Œçš„æœºçµæœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿä¸€ä¸ªæ•°å¼‚æˆ–åŒä¸€ä¸ªæ•°ä¸¤æ¬¡å°±è¿˜åŸæ²¡æ¯›ç—…å•Šï¼ŸButå¦‚æœäº¤æ¢çš„ä¸¤ä¸ªæ•°æ˜¯åŒä¸€ä¸ªå…ƒç´ æ¯”å¦‚ä¸Šé¢åœ¨æ•°ç»„ä¸­ a==bæ—¶ nums[a]å¼‚æˆ–äº†3æ¬¡è‡ªå·±ç›¸å½“äº`nums[a]^nums[a]^nums[a]^nums[a]=0^0=0`ï¼Œæœ€åå°±ä¼šå‡ºé—®é¢˜,å…¶å®å¼€å§‹å‰é¢çš„æ’åºéƒ½æ²¡æœ‰å‡ºç°é—®é¢˜ï¼Œä¸»è¦æ˜¯åé¢çš„å¿«æ’æ—¶å‘ç°äº†è¿™ä¸ªBugå› ä¸ºå¿«æ’ä¸ºäº†é¿å…æ•°æ®åˆ†å¸ƒçš„å½±å“éšæœºé€‰å–åŸºå‡†å€¼ï¼Œå¯èƒ½éšæœºçš„æ˜¯æœ€åä¸€ä¸ªï¼Œè€Œä¸”å¿«æ’çš„partitionè¿‡ç¨‹ä¸­ä¹Ÿä¼šæœ‰æ—¶ä¹Ÿä¼šè‡ªå·±å’Œè‡ªå·±äº¤æ¢ï¼Œæœ€å¼€å§‹çš„ç¬¬ä¸€æ­¥å°±æ˜¯è‡ªå·±å’Œç›´æ¥äº¤æ¢ï¼Œè®©å°äºåŒºæ‰©å¤§ã€‚æ‰€ä»¥è¿™ä¸ªæ–¹æ³•ä»…ä»…åªèƒ½ç”¨æ¥æŠ–ä¸€æŠ–æœºçµï¼Œæ²¡å•¥å®é™…æ„ä¹‰ï¼Œä»¥åè¿˜æ˜¯è¦è€è€å®å®å†™ï¼Œä¸ç„¶å’‹æ­»çš„éƒ½ä¸çŸ¥é“ğŸ˜

>  æœªå®Œå¾…ç»­......è¿˜æœ‰ä¸€ç±»éåŸºäºæ¯”è¾ƒçš„æ’åº æ¡¶æ’åºä¹‹ç±»çš„ç­‰åé¢å†æ¥æ€»ç»“åŠ ä¸Šå».

### å¯¹æ•°å™¨
ç›´æ¥æ‹¿çš„å·¦ç¥çš„å¯¹æ•°å™¨ğŸ˜„ï¼Œæ‰€æœ‰æ’åºéƒ½æ˜¯ç»è¿‡å¯¹æ•°å™¨æµ‹è¯•çš„ã€‚ *talk is cheap show me the code*


```java
import java.util.Arrays;
import java.util.Random;
public class Sorts{
    public static void main(String[] args) {
        /*int []nums={1,0,-1,-22,213,4,535,-112,99999};
        //ShellSort(nums);
        //MaoPaoSort(nums);
        //SelectSort(nums);
        //MergerSort(nums,0,nums.length-1);
        QuickSort(nums,0,nums.length-1);
        printArray(nums);*/
        int testTime = 10000;
        int maxSize = 10000;
        int maxValue = 100;
        Boolean succeed = true;
        for (int i = 0; i < testTime; i++) {
            int[] arr1 = generateRandomArray(maxSize, maxValue);
            int[] arr2 = copyArray(arr1);
            long time=System.currentTimeMillis();
            //å†’æ³¡
            //MaoPaoSort(arr1);
            //é€‰æ‹©
            //SelectSort(arr1);
            //æ’å…¥
            //InsertSort(arr1);
            //å½’å¹¶
            //MergerSort(arr1);
            //éé€’å½’å½’å¹¶
            //MergerSortNoRecurse(arr1);
            //å¸Œå°”
            //ShellSort(arr1);
            //å¿«æ’
            //QuickSort(arr1,0,arr1.length-1);
            //å †æ’åº
            HeapSort(arr1);
            long time2=System.currentTimeMillis();
            if(i==0){
                System.out.println(time2-time);
            }
            //ç³»ç»Ÿæ’åº
            comparator(arr2);
            if(i==0){
                System.out.println(System.currentTimeMillis()-time2);
            }
            if (!isEqual(arr1, arr2)) {
                succeed = false;
                printArray(arr1);
                printArray(arr2);
                break;
            }
        }
        System.out.println(succeed ? "Nice!" : "Fucking fucked!");
    }
    //åˆçº§æ’åºç®—æ³•
    //************************************************************************
    //å†’æ³¡æ’åº
    private static void MaoPaoSort(int []nums){
        for (int i=nums.length-1;i>=0;i--){
            for (int j=0;j<i;j++){
                if(nums[j]>nums[j+1]){
                    swap(nums,j,j+1);
                }
            }
        }
    }
    //************************************************************************
    //é€‰æ‹©æ’åº
    private static void SelectSort(int []nums){
        for (int i=0;i<nums.length;i++){
            int min=nums[i];
            for (int j=i+1;j<nums.length;j++){
                if(nums[j]<min){
                    min=nums[j];
                    swap(nums,j,i);
                }
            }
        }
    }
    //************************************************************************
    //ç›´æ¥æ’å…¥æ’åº
    private static void InsertSort(int []nums){
        for (int i=1;i<nums.length;i++){
            for (int j=i;j>0&&nums[j]<nums[j-1];j--){
                swap(nums,j,j-1);
            }
        }
    }
    //************************************************************************
    //æ’å…¥æ’åºçš„æ”¹è¿›
    private static void ShellSort(int [] nums){
        int h=nums.length>>1;
        while(h>0){
            for (int i=h;i<nums.length;i++){
                //å®é™…ä¸Šæ˜¯å¢å¤§äº†æ’å…¥æ’åºçš„é—´éš™ï¼Œæœ€åè¿˜æ˜¯å¯¹è¿›è¡Œä¸€æ¬¡æ’å…¥æ’åº,ä¸è¿‡é‚£ä¸ªæ—¶å€™çš„æ•°æ®å·²ç»æ˜¯é«˜åº¦æœ‰åºäº†
                for (int j=i;j-h>=0&&nums[j]<nums[j-h];j-=h) {
                    swap(nums,j,j-h);
                }
            }
            h=h>>1;
        }
    }
    //************************************************************************
    //å½’å¹¶æ’åº
    private static void MergerSort(int []nums){
        help=new int[nums.length];
        MergerSort(nums,0,nums.length-1);
    }
    private static void MergerSort(int []nums,int left,int right){
        if(left>=right){
            return;
        }
        //ä¸èƒ½ç›´æ¥åœ¨è¿™é‡Œåˆ›å»ºæ•°ç»„ï¼Œä¸¥é‡å½±å“æ€§èƒ½ï¼Œå¯ä»¥åœ¨ä¸Šé¢å†å¥—ä¸€å±‚æ–¹æ³•ï¼Œæˆ–è€…é‡‡ç”¨merger2çš„æ–¹å¼(ä¹Ÿä¸å¥½ï¼Œåº”è¯¥ä¿è¯è¾…åŠ©æ•°ç»„åªåˆå§‹åŒ–ä¸€æ¬¡)
        //help=new int[nums.length];
        int mid=left+((right-left)>>1);
        MergerSort(nums,left,mid);
        MergerSort(nums,mid+1,right);
        merger(nums,left,mid,right);
    }
    //è¾…åŠ©æ•°ç»„
    private static int []help;
    //å½’å¹¶æ“ä½œ
    private static void merger(int []nums ,int left,int mid,int right){
        int i=left,j=mid+1;
        //å…¶å®æ²¡åŒºåˆ«ç©ºé—´å¤æ‚åº¦ï¼Œéƒ½æ˜¯O(N) åé¢è¿™ä¸ªä¼šæ›´åŠ è€—è´¹æ—¶é—´
        //int []help=new int[right-left+1];
        for (int k=left;k<=right;k++){
            //ä¸€è¾¹çš„åˆ°è¾¾å°½å¤´,å…ˆåˆ¤æ–­ä¸¤ä¸ªè¾¹ç•Œ,ä¸ç„¶å°±è¦æƒ³ä¸‹é¢é‚£æ ·å†™
            if(i>mid){
                help[k]=nums[j++];
            } else if(j>right){
                help[k]=nums[i++];
            } else if(nums[i]>nums[j]){
                help[k]=nums[j++];
            } else{
                //ç›¸ç­‰çš„æ—¶å€™å·¦è¾¹å…ˆè¿›æ ˆä¿è¯ç¨³å®šæ€§
                help[k]=nums[i++];
            }
            /*// 2 
            if( i<=mid &&j<=right && nums[i]>nums[j]){
                help[k]=nums[j++];
            }else if( i<=mid &&j<=right && nums[i]<=nums[j]){
                //ç›¸ç­‰çš„æ—¶å€™å·¦è¾¹å…ˆè¿›æ ˆä¿è¯ç¨³å®šæ€§
                help[k]=nums[i++];
            }else if(i>mid){
                help[k]=nums[j++];
            }else if(j>right){ 
                help[k]=nums[i++];
            }*/
        }
        //å¤åˆ¶
        for (int k=left;k<=right;k++){
            nums[k]=help[k];
        }
        //asddsdasdasdasd
        /*while (p1 <= m && p2 <= r) {
            help[i++] = arr[p1] < arr[p2] ? arr[p1++] : arr[p2++];
        }
        while (p1 <= m) {
            help[i++] = arr[p1++];
        }
        while (p2 <= r) {
            help[i++] = arr[p2++];
        }
        for (i = 0; i < help.length; i++) {
            arr[l + i] = help[i];
        }*/
    }
    //å½’å¹¶æ’åºï¼ˆéé€’å½’ï¼Œæ–¹å‘ä¸ä¸€æ ·ï¼Œæ—¶é—´å¤æ‚åº¦ä¸€æ ·éƒ½ä¸ºO(NlogN)
    private static void MergerSortNoRecurse(int []nums){
        help=new int[nums.length];
        //æ§åˆ¶åˆå¹¶çš„é•¿åº¦ 
        for (int sz=1;sz<nums.length;sz*=2){
            //æ§åˆ¶åˆå¹¶çš„å‘åç§»åŠ¨
            for (int i=0;i<nums.length-sz;i+=2*sz){
                int r=i+2*sz-1<nums.length-1?i+2*sz-1:nums.length-1;
                merger(nums,i,i+sz-1,r);
            }
        }
    }
    //************************************************************************
    //å¿«æ’ (ä¸å…·æœ‰ç¨³å®šæ€§æˆ–è€…éš¾ä»¥å®ç°)
    private static void QuickSort(int []nums,int l,int r){
        if(l>r){
            return;
        }
        //éšæœºä¸€ä¸ªæ•°å’Œräº¤æ¢ ---éšæœºå¿«æ’
        swap(nums, l + (int) (Math.random() * (r - l + 1)), r);
        int []index=partition2(nums,l,r);
        QuickSort(nums,l,index[0]-1);
        QuickSort(nums,index[1]+1,r);
    }
    public static int partition1(int []nums ,int l,int r){
        int base = l;
        //åŒæŒ‡é’ˆ
        int lo = l, hi = r;
        //è¿™ç§partitionçš„å®ç°ç»†èŠ‚æœ‰ç‚¹ä¸å¥½ç†è§£
        //è¿™ç§partitionä¸èƒ½éšæœºåŸºå‡†å…ƒç´ ã€‚ã€‚ã€‚ã€‚
        //å‚ç…§äº†å·¦ç¥çš„ä»£ç å‘ç°å…¶å®å¯ä»¥åœ¨partitionä¹‹å‰éšæœºä¸€ä¸ªå˜é‡å’Œloäº¤æ¢ï¼Œä¹Ÿæœ‰åŒæ ·çš„æ•ˆæœä¹Ÿæ¶ˆé™¤äº†è¾“å…¥çš„å½±å“
        while (lo < hi) {
            //å¿…é¡»å…ˆä»å³å¾€å·¦,ä¸»è¦æ˜¯ä¸ºäº†å½’ä½çš„æ—¶å€™ä¸å‡ºç°é—®é¢˜
            //æ¯”å¦‚è¿™é‡Œé€‰å–çš„åŸºå‡†å…ƒç´ æ˜¯ lo ä¹Ÿå°±æ˜¯å­æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœå…ˆä»å·¦å¾€å³æœ€åäº¤æ¢çš„å°±æ˜¯loå’Œä¸€ä¸ªæ¯”loå¤§çš„æ•°ç„¶è€Œæ¯”loå¤§çš„æ•°åº”è¯¥æ”¾åœ¨å³è¾¹
            //åä¹‹å¦‚æœé€‰çš„æ˜¯hiä¸ºåŸºå‡†å°±è¦å…ˆä»å·¦å¾€å³
            // 7  0  1  2    10  11  22
            while (nums[hi] >= nums[base] && lo < hi) {
                hi--;
            }
            while (nums[lo] <= nums[base] && lo < hi) {
                lo++;
            }
            if (lo < hi) {
                swap(nums, lo, hi);
            }
        }
        //å½’ä½ lo==hi
        swap(nums, hi, base);
        return lo;
    }
    //è·å…°å›½æ——ä¼˜åŒ–çš„å¿«æ’
    public static int[] partition2(int []arr ,int l,int r){
        // 7  0  1  2    10  11  22        
        //å°äºåŒºä¸ºç©º
        int less=l-1;
        //l ----> more ä¸ºå¾…å®šåŒº
        int more=r;
        while(l<more){
            if(arr[l]<arr[r]){
                swap(arr,++less,l++);
            } else if(arr[l]>arr[r]){
                //å¤§äºåŸºå‡†æ—¶ , å¤§äºåŒºæ‰©å¤§(å¤§äºåŒºçš„å‰ä¸€ä¸ªå…ƒç´ å’Œå½“å‰å…ƒç´ äº¤æ¢ï¼Œä½†æ˜¯ä¸çŸ¥é“å¤§äºåŒºçš„å‰ä¸€ä¸ªå…ƒç´ æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œæ‰€ä»¥ä¸èƒ½l++)
                swap(arr,--more,l);
            } else{
                l++;
            }
        }
        //å’Œå¤§äºåŒºé—´çš„ç¬¬ä¸€ä¸ªäº¤æ¢ ä¿è¯å½’ä½æ­£ç¡®,å¦‚æœé€‰å–çš„æ˜¯ä»¥æœ€å·¦è¾¹ä¸ºåŸºå‡†å…ƒç´  è¿™é‡Œå°±åº”è¯¥å’Œlessäº¤æ¢
        //åˆ°è¿™é‡Œ  [less+1,more-1]ä¹‹é—´éƒ½æ˜¯ç­‰äº åŸºå‡†å…ƒç´  arrã€rã€‘ çš„
        swap(arr,more,r);
        //åˆ°è¿™  [less+1,more]ä¹‹é—´éƒ½æ˜¯ç­‰äº åŸºå‡†å…ƒç´  arrã€rã€‘ çš„
        return new int[]{less+1,more};
    }
    //************************************************************************
    //å †æ’åº
    private static void HeapSort(int []nums){
        if(nums.length<2){
            return;
        }
        //æ„å»ºå¤§æ ¹å †
        for (int i=0; i<nums.length; i++) {
            heapInsert(nums,i);
        }
        //äº¤æ¢å †é¡¶å’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹
        int size= nums.length;
        swap(nums,size-1,0);
        size--;
        while(size>1){
            //è°ƒæ•´
            heapIfy(nums,0,size);
            //æ¯æ¬¡éƒ½å’Œæœ€åä¸€ä¸ªå­©å­èŠ‚ç‚¹äº¤æ¢ï¼Œç„¶åsize--
            swap(nums,--size,0);
        }
    }
    //å‘ä¸Šçˆ¬
    private static void heapInsert(int []nums, int index){
        //è¿­ä»£æ¯”è¾ƒå½“å‰èŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹çš„å€¼çš„å¤§å°
        while(nums[index]>nums[(index-1)/2]){
            swap(nums,index,(index-1)/2);
            index=(index-1)/2;
        }
    }
    //å‘ä¸‹çˆ¬
    //indexä½ç½®çš„å€¼å˜å°åç»§ç»­è°ƒæ•´ä¸ºå¤§æ ¹å †
    private static void heapIfy(int []nums,int index,int size){
        //å·¦å­©å­
        int left=index*2+1;
        //èŠ‚ç‚¹æœ‰å·¦å­©å­
        while(left<size){
            //åˆ¤æ–­æ˜¯å¦æœ‰å³å­©å­.....
            //å·¦å³å­©å­é‡Œçš„æœ€å¤§å€¼ æœ‰å³å­©å­ä¸”å³å­©å­å¤§äºå·¦å­©å­
            int largest=left+1<size && nums[left]<nums[left+1] ?left+1:left;
            largest=nums[largest]>nums[index]?largest:index;
            //æœ€å¤§å€¼ç­‰äºè‡ªå·±
            if(largest==index){
                break;
            }
            //äº¤æ¢å¤§å­©å­èŠ‚ç‚¹å’Œè‡ªå·±
            swap(nums,largest,index);
            //è®¾ç½®å¤§å­©å­çš„indexå’Œå·¦å­©å­
            index=largest;
            left=index*2+1;
        }
    }
    //************************************************************************
    private static void swap(int []nums,int a,int b){
        //ä¸çŸ¥é“ä¸ºå•¥å¿«æ’äº¤æ¢çš„æ—¶å€™è¿™æ ·å†™ä¼šå‡ºç°å¾ˆå¤š0
        //æŸ¥è¯¢çŸ¥é“ï¼Œå½“a==bæ—¶è‡ªå·±å’Œç›´æ¥äº¤æ¢ï¼Œaå¼‚æˆ–è‡ªå·±4æ¬¡åa==0.....
        nums[a]=nums[a]^nums[b];
        nums[b]=nums[a]^nums[b];
        nums[a]=nums[a]^nums[b];
        /*int temp=nums[a];
        nums[a]=nums[b];
        nums[b]=temp;*/
    }
    // for test  å¯¹æ•°å™¨
    public static void comparator(int[] arr) {
        Arrays.sort(arr);
    }
    // for test
    public static int[] generateRandomArray(int maxSize, int maxValue) {
        int[] arr = new int[(int) ((maxSize + 1) * Math.random())];
        for (int i = 0; i < arr.length; i++) {
            arr[i] = (int) ((maxValue + 1) * Math.random()) - (int) (maxValue * Math.random());
        }
        return arr;
    }
    // for test
    public static int[] copyArray(int[] arr) {
        if (arr == null) {
            return null;
        }
        int[] res = new int[arr.length];
        for (int i = 0; i < arr.length; i++) {
            res[i] = arr[i];
        }
        return res;
    }
    // for test
    public static Boolean isEqual(int[] arr1, int[] arr2) {
        if ((arr1 == null && arr2 != null) || (arr1 != null && arr2 == null)) {
            return false;
        }
        if (arr1 == null && arr2 == null) {
            return true;
        }
        if (arr1.length != arr2.length) {
            return false;
        }
        for (int i = 0; i < arr1.length; i++) {
            if (arr1[i] != arr2[i]) {
                return false;
            }
        }
        return true;
    }
    // for test
    public static void printArray(int[] arr) {
        if (arr == null) {
            return;
        }
        for (int i = 0; i < arr.length; i++) {
            System.out.print(arr[i] + " ");
        }
        System.out.println();
    }
}
```



â€‹		


