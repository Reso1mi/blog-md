---
title: 
   äºŒåˆ†æœç´¢æ ‘
tags: 
  [æ•°æ®ç»“æ„,æ ‘]
categories:
	[æ•°æ®ç»“æ„]
date: 2019/11/8
cover: https://i.loli.net/2019/12/01/765lj8UuT4ENqvg.png
---

## äºŒåˆ†æœç´¢æ ‘

**äºŒå‰æŸ¥æ‰¾æ ‘**ï¼ˆè‹±è¯­ï¼šBinary Search Treeï¼‰ï¼Œä¹Ÿç§°ä¸º**äºŒåˆ†æœç´¢æ ‘**ï¼Œ**äºŒå‰æœç´¢æ ‘**ã€**æœ‰åºäºŒå‰æ ‘**ï¼ˆordered binary treeï¼‰æˆ–**æ’åºäºŒå‰æ ‘**ï¼ˆsorted binary treeï¼‰ä¹Ÿå¯ä»¥ç®€å†™ä¸º `BST`ï¼Œæ˜¯æŒ‡ä¸€æ£µç©ºæ ‘æˆ–è€…å…·æœ‰ä¸‹åˆ—æ€§è´¨çš„[äºŒå‰æ ‘](https://zh.wikipedia.org/wiki/%E4%BA%8C%E5%8F%89%E6%A0%91)ï¼š

1. è‹¥ä»»æ„èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸ç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼å‡å°äºå®ƒçš„æ ¹èŠ‚ç‚¹çš„å€¼ï¼›
2. è‹¥ä»»æ„èŠ‚ç‚¹çš„å³å­æ ‘ä¸ç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼å‡å¤§äºå®ƒçš„æ ¹èŠ‚ç‚¹çš„å€¼ï¼›
3. ä»»æ„èŠ‚ç‚¹çš„å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æŸ¥æ‰¾æ ‘ï¼›
4. æ²¡æœ‰é”®å€¼ç›¸ç­‰çš„èŠ‚ç‚¹ã€‚

äºŒå‰æŸ¥æ‰¾æ ‘ç›¸æ¯”äºå…¶ä»–æ•°æ®ç»“æ„çš„ä¼˜åŠ¿åœ¨äºæŸ¥æ‰¾ã€æ’å…¥çš„[æ—¶é—´å¤æ‚åº¦](https://zh.wikipedia.org/wiki/%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6)è¾ƒä½ã€‚ä¸º` O(logN) `ã€‚äºŒå‰æŸ¥æ‰¾æ ‘æ˜¯åŸºç¡€æ€§æ•°æ®ç»“æ„ï¼Œç”¨äºæ„å»ºæ›´ä¸ºæŠ½è±¡çš„æ•°æ®ç»“æ„ï¼Œå¦‚é›†åˆï¼Œæ˜ å°„ç­‰

## åŸºæœ¬ç»“æ„

å…ˆæ­ä¸€ä¸ªåŸºæœ¬çš„æ¶å­å‡ºæ¥ï¼Œåé¢å†æ¥æ…¢æ…¢çš„å®Œå–„åŠŸèƒ½

```java
public class BST<E extends Comparable<E>>{
    //TreeNode
    private class Node{
        public E e;
        public Node left;
        public Node right;
        public Node(E e){
            this.e=e;
            left=null;
            right=null;
        }
    }

    private Node root;

    private int size;

    public BST(){
        root=null;
        size=0;
    }

    public int size(){
        return size;
    }

    public boolean isEmpty(){
        return size==0;
    }

    public void add(E e){
        //...
    }

    public boolean contains(E e){
        //...
    }
}
```

## æ·»åŠ 

æ·»åŠ å‡½æ•°ï¼Œæ—¶é—´å¤æ‚åº¦`O(logN)`ï¼Œåªè¦æŠ“ä½äº†å®ƒçš„æ€§è´¨å°±å¾ˆå¥½å†™ï¼Œç”»ä¸ªå›¾æè¿°ä¸‹è¿™ä¸ªè¿‡ç¨‹

![mark](http://static.imlgw.top/blog/20191113/P39b50Ikv4sV.png?imageslim)

â‘  é¦–å…ˆå’ŒrootèŠ‚ç‚¹8æ¯”è¾ƒï¼Œæ¯”8å°ï¼Œæ‰€ä»¥è‚¯å®šå†8çš„å·¦å­æ ‘ä¸­

â‘¡ å†å’Œrootçš„å·¦å­æ ‘æ ¹èŠ‚ç‚¹5æ¯”è¾ƒï¼Œæ¯”5å¤§ï¼Œæ‰€ä»¥æœ€åè‚¯å®šæ’å…¥5çš„å³å­æ ‘ä¸­

â‘¢ å†å’Œ5èŠ‚ç‚¹çš„å³å­æ ‘æ ¹èŠ‚ç‚¹6æ¯”è¾ƒï¼Œæ¯”6å¤§ï¼Œæ‰€ä»¥æœ€åæ’å…¥6çš„å³å­æ ‘ä¸­

â‘£ å³å­æ ‘ä¸ºç©ºï¼Œç›´æ¥æ’å…¥åˆ°6çš„å³è¾¹

æ ¹æ®ä¸Šé¢çš„æµç¨‹æˆ‘ä»¬å¾ˆå®¹æ˜“å†™å‡ºä»£ç 

```java
public void addLoop(E e){
    if (root==null) {
        size++;
        root=new Node(e);
        return;
    }
    Node temp=root;
    while(temp!=null){
        if (e.compareTo(temp.e)>0) {
            if (temp.right==null) {
                temp.right=new Node(e);
                size++;
                return;
            }
            temp=temp.right;
        }else if (e.compareTo(temp.e)<0) {
            if (temp.left==null) {
                temp.left=new Node(e);
                size++;
                return;
            }
            temp=temp.left;
        }else return; //ä¸èƒ½æœ‰ç›¸ç­‰å…ƒç´ 
    }
}
```
è¿™é‡Œæ—¢ç„¶æ˜¯æ ‘ç»“æ„ï¼Œç”¨å¾ªç¯ä¼¼ä¹æœ‰çš„æ˜¾å¾—ä¸å¤Ÿä¼˜é›…ğŸ˜‚

æ‰€ä»¥æˆ‘ä»¬å°è¯•æŠŠè¿™ä¸ªæ”¹æˆé€’å½’

```java
public void add2(E e){
    if(root == null){
        root = new Node(e);
        size ++;
    }else add(root, e);
}

// å‘ä»¥nodeä¸ºæ ¹çš„äºŒåˆ†æœç´¢æ ‘ä¸­æ’å…¥å…ƒç´ e,ç•¥æ˜¾ç¹ç
private void add2(Node node, E e){
    if(e.equals(node.e)) return;
    if(e.compareTo(node.e) < 0 && node.left == null){
        node.left = new Node(e);
        size ++;
        return;
    }
    if(e.compareTo(node.e) > 0 && node.right == null){
        node.right = new Node(e);
        size ++;
        return;
    }
    if(e.compareTo(node.e) < 0)
        add(node.left, e);
    else //e.compareTo(node.e) > 0
    	add(node.right, e);
}
```
è¿™ä¸ªé€’å½’ï¼Ÿï¼Ÿï¼Ÿå’‹æ„Ÿè§‰æ¯”å¾ªç¯è¿˜ç¹çğŸ™„ 

ç¡®å®ï¼Œä¸Šé¢è¿™ä¸ªé€’å½’çš„ç»ˆæ­¢æ¡ä»¶å¤ªç¹çäº†ï¼Œ`compareTo`ä¸€å…±æ¯”è¾ƒäº†4æ¬¡ï¼Œæœ‰å¾ˆå¤šé‡å¤ä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¾—æ”¹æ”¹ğŸ˜‹

æˆ‘ä»¬è®©è¿™ä¸ª`add`å‡½æ•°æœ‰è¿”å›å€¼ï¼Œè¿”å›æ’å…¥åçš„æ ¹èŠ‚ç‚¹ï¼Œè¿™æ ·æˆ‘ä»¬çš„å‡½æ•° `add(Node node,E e)` å®šä¹‰å°±å˜æˆäº† **æ’å…¥å…ƒç´ `e`åˆ° ä»¥ `node` ä¸ºæ ¹èŠ‚ç‚¹çš„BSTä¸­ï¼Œå¹¶ä¸”è¿”å›æ ¹èŠ‚ç‚¹** ï¼Œæ¸…æ¥šäº†é€’å½’å‡½æ•°çš„å®šä¹‰ï¼Œæˆ‘ä»¬å†æ¥å†™æ–¹æ³•å°±ä¼šå®¹æ˜“å¾ˆå¤š

```java
public void add(E e){
    root=add(root,e);
}

//æ’å…¥å…ƒç´ `e`åˆ° ä»¥ `node` ä¸ºæ ¹èŠ‚ç‚¹çš„BSTä¸­ï¼Œå¹¶ä¸”è¿”å›æ ¹èŠ‚ç‚¹
private Node add(Node node, E e){
    if (node == null) {
        size++;
        return new Node(e);
    }
    if(e.compareTo(node.e) < 0){
        //æ’å…¥å·¦å­æ ‘ä¸­ï¼Œå¹¶è¿”å›æ ¹èŠ‚ç‚¹ï¼Œç„¶åæ¥åœ¨node.left
        node.left=add(node.left, e);
    }else if (e.compareTo(node.e) > 0) { //æ³¨æ„ä¸è¦å†™else,å‰é¢æ²¡æœ‰å¯¹ç›¸ç­‰çš„å…ƒç´ åšåˆ¤æ–­
        //æ’å…¥å³å­æ ‘ä¸­ï¼Œå¹¶è¿”å›æ ¹èŠ‚ç‚¹ï¼Œç„¶åæ¥åœ¨node.right
        node.right=add(node.right, e);   
    }
    return node;
}
```
è¿˜æ˜¯é‚£å¥è¯ï¼Œå†™é€’å½’å‡½æ•°ï¼Œä¸è¦çº ç»“äºå‡½æ•°çš„æ¯ä¸€æ­¥æ˜¯å¦‚ä½•å»è¿›è¡Œï¼Œå¦‚ä½•å»å¾—åˆ°ç»“æœçš„ï¼Œä»å…¨å±€å‡ºå‘ï¼Œåªè¦ææ¸…æ¥šé€’å½’å‡½æ•°çš„å®šä¹‰ï¼ŒæŒ‰ç…§å‡½æ•°çš„å®šä¹‰æ¥å†™ä»£ç ï¼Œæœ€åæ€è€ƒä¸€ä¸‹è¾¹ç•Œï¼Œæœ€åçš„ä»£ç å°±ä¸€å®šæ˜¯æ­£ç¡®çš„ï¼

è¿™ä¸ªè¾¹ç•Œçš„æ€è€ƒï¼Œå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ¯”å¦‚ä¸Šé¢çš„è¿™ä¸ªç»“æŸæ¡ä»¶ï¼Œæˆ‘ä»¬ä¸ç”¨å»è€ƒè™‘ä¸€æ­¥æ­¥ç›´åˆ°é€’å½’ç»ˆç»“æ—¶æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œæˆ‘ä»¬æ€è€ƒä¸€ä¸‹æç«¯çš„è¾¹ç•Œæƒ…å†µï¼ˆå…¶å®è¿™å°±æ˜¯ç»ˆç»“çš„æƒ…å†µï¼‰ï¼Œrootä¸ºnullï¼Œè¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼ŒBSTè¿˜æ˜¯ç©ºçš„ï¼Œè¿™ä¸ªæ—¶å€™addå…ƒç´ ï¼Œå…¶å®æƒ³éƒ½ä¸ç”¨æƒ³ï¼Œè‚¯å®šæ˜¯ç›´æ¥æŠŠè¿™ä¸ª eä½œä¸ºæ ¹èŠ‚ç‚¹è¿”å›å°±okäº†ï¼Œæ‰€ä»¥å¾ˆè‡ªç„¶çš„å°±å†™å‡ºäº†ç»ˆæ­¢æ¡ä»¶

## æŸ¥æ‰¾

æŸ¥æ‰¾ç›¸æ¯”äºä¸Šé¢çš„æ·»åŠ ï¼Œä¼šç®€å•å¾ˆå¤šï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„å†™å‡ºä»£ç 

```java
//æŸ¥è¯¢æ“ä½œ
public boolean contains(E e){
    if (e==null) {
        return false;
    }
    return contains(e,root);
}

private boolean contains(E e,Node root){
    if (root==null) {
        return false;
    }
    if (e.compareTo(root.e)==0) {
        return true;
    }
    return e.compareTo(root.e)<0?contains(e,root.left):contains(e,root.right);
}
```
è¿™é‡Œæˆ‘ä¸ºäº†ç®€æ´å†™äº†ä¸‰ç›®ï¼Œä¸ç†Ÿæ‚‰çš„å¯ä»¥æ”¹æˆifï¼Œæ•´ä½“æ—¶é—´å¤æ‚åº¦ä¾ç„¶æ˜¯`O(logN)` ï¼Œæ¯”çº¿æ€§è¡¨çš„æŸ¥æ‰¾ä¼šå¿«å¾ˆå¤šï¼

## éå†

è€ç”Ÿå¸¸è°ˆçš„è¯é¢˜ï¼Œè¿™ä¸ªåœ¨æˆ‘ä¹‹å‰çš„ [LeetCode-äºŒå‰æ ‘](http://imlgw.top/2019/11/06/leetcode-er-cha-shu-di-gui/) é‡Œé¢ä¹Ÿåšè¿‡äº†ï¼Œè¿™é‡Œå†ç¿»å‡ºæ¥çœ‹çœ‹ï¼Œå…¶å®é‡ç‚¹æ˜¯æƒ³æŠŠååºéå†ç»™ææ¸…æ¥šäº†ï¼Œä¹‹å‰ä¸€ç›´æŒºè¿·ç³Šçš„

### å‰åºéå†

#### é€’å½’å†™æ³•

```java
//å‰åºéå†,é€’å½’
public void preorderTravelRecur(){
    preorderTravel(root);
}

private void preorderTravel(Node root){
    if (root==null) {
        return;
    }
    System.out.print(root.e+" ");
    preorderTravel(root.left);
    preorderTravel(root.right);
}
```
#### éé€’å½’å†™æ³•

```java
//å‰åºéå†,éé€’å½’å®ç°
public void preorderTravelNoRecur(){
    Stack<Node> stack=new Stack<>();
    Node cur=root;
    while( cur!=null || !stack.isEmpty()){
        while(cur!=null){
            System.out.print(cur.e+" ");
            stack.push(cur);
            cur=cur.left;
        }
        cur=stack.pop();
        cur=cur.right;
    }
}
```
æ³¨æ„è¿™é‡Œå¹¶ä¸æ˜¯ç»å…¸çš„å‰åºéå†æ–¹å¼ï¼Œæ˜¯æŒ‰ç…§ â€œæ¨¡æ¿â€ æ¥çš„ï¼Œé¦–å…ˆæˆ‘ä»¬è€ƒè™‘æ ˆé‡Œé¢å­˜çš„æ˜¯ä»€ä¹ˆï¼Œè¿™é‡Œçš„æ ˆé‡Œé¢å­˜çš„å®é™…ä¸Šæ˜¯ `å·¦å­æ ‘çš„å·¦è¾¹` çš„é›†åˆï¼Œè¿™é‡Œæˆ‘ä¸çŸ¥é“å’‹æè¿°ï¼Œç”»ä¸ªå›¾å§

![mark](http://static.imlgw.top/blog/20191113/BF0cCcWcy3zP.png?imageslim)

å›¾ä¸­ç»¿è‰²éƒ¨åˆ†å°±æ˜¯æˆ‘æ‰€è¯´çš„**å·¦å­æ ‘çš„å·¦è¾¹çš„é›†åˆ**ï¼Œæ•´ä¸ªæ ˆçš„å…¥æ ˆé¡ºåºå°±æ˜¯ä»å·¦å¾€å³ï¼Œä»ä¸Šåˆ°ä¸‹ï¼Œä¾æ¬¡çš„å°†è¿™äº›â€œå·¦è¾¹â€ å…¥æ ˆï¼Œå¹¶ä¸”åœ¨æ²¡æœ‰å·¦å­æ ‘ï¼Œä¹Ÿå°±æ˜¯éå†åˆ°å¶å­èŠ‚ç‚¹çš„æ—¶å€™å¼€å§‹å‡ºæ ˆï¼Œç„¶ååˆ‡æ¢æˆ`å½“å‰å‡ºæ ˆçš„èŠ‚ç‚¹`çš„å³å­æ ‘ï¼Œå°†å³å­æ ‘çš„`å·¦å­æ ‘çš„å·¦è¾¹`é‡å¤å‰é¢çš„è¿‡ç¨‹ç»§ç»­å…¥æ ˆå‡ºæ ˆï¼Œæˆ‘ä»¬è¦è€ƒè™‘çš„å°±æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è®¿é—®èŠ‚ç‚¹ï¼

ç»†å¿ƒçš„åŒå­¦è‚¯å®šå·²ç»å‘ç°äº†ï¼Œå…¶å®è¿™é‡Œè¿›æ ˆé¡ºåºå’Œå‡ºæ ˆé¡ºåºï¼Œåˆ†åˆ«å¯¹åº”çš„å°±æ˜¯è¿™é¢—æ ‘å‰åºéå†å’Œä¸­åºéå†ï¼ï¼ï¼æ‰€ä»¥æˆ‘ä»¬å°±åªéœ€è¦åœ¨è¿›æ ˆå’Œå‡ºæ ˆçš„æ—¶å€™ï¼Œè¿›è¡Œè®¿é—®èŠ‚ç‚¹çš„æ“ä½œï¼Œå°±å¯ä»¥å®Œæˆå‰åºå’Œååºéå†

### ä¸­åºéå†

#### é€’å½’å†™æ³•

```java
//ä¸­åºéå†,é€’å½’
public void inorderTravelRecur(){
    inorderTravel(root);
}

private void inorderTravel(Node root){
    if (root==null) {
        return;
    }
    inorderTravel(root.left);
    System.out.print(root.e+" ");
    inorderTravel(root.right);
}
```
#### éé€’å½’å†™æ³•

ç»“åˆä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“çš„å¾—å‡ºéé€’å½’çš„ä¸­åºéå†çš„å†™æ³•

```java
//ä¸­åºéå†,éé€’å½’
public void inorderTravelNoRecur(){
    Stack<Node> stack=new Stack<>();
    Node cur=root;
    while( cur!=null || !stack.isEmpty()){
        while(cur!=null){
            stack.push(cur);
            cur=cur.left;
        }
        cur=stack.pop();
        System.out.print(cur.e+" ");
        cur=cur.right;
    }
}
```
### ååºéå†

#### é€’å½’å†™æ³•

```java
//ååºéå†,é€’å½’
public void postorderTravelRecur(){
    postorderTravel(root);
}

private void postorderTravel(Node root){
    if (root==null) {
        return;
    }
    postorderTravel(root.left);
    postorderTravel(root.right);
    System.out.print(root.e+" ");
}
```
#### éé€’å½’å†™æ³•

è¿™é‡Œçš„éé€’å½’å†™æ³•å°±ä¸ä¸€æ ·äº†ï¼Œæ¯”å‰ä¸¤ç§è¦å¤æ‚

```java
//ååºéå†,éé€’å½’
public void postorderTravelNoRecur(){
    Stack<Node> stack=new Stack<>();
    Node cur=root,lastNode=null;
    while(cur!=null || !stack.isEmpty()){
        while(cur!=null){
            stack.push(cur);
            cur=cur.left;
        }
        cur=stack.peek();//æŸ¥çœ‹æ ˆé¡¶å…ƒç´ 
        //å¦‚æœå³å­æ ‘ä¸ºç©ºæˆ–è€…å³èŠ‚ç‚¹å·²ç»è®¿é—®è¿‡ï¼Œåˆ™å½“å‰èŠ‚ç‚¹å‡ºæ ˆï¼Œå¹¶è®°å½•lastNode
        if (cur.right==null || lastNode==cur.right) { 
            System.out.print(cur.e+" ");
            stack.pop();
            lastNode=cur;
            //ä¸ºäº†ä¸‹ä¸€æ¬¡èƒ½ç›´æ¥æŸ¥çœ‹æ ˆé¡¶å…ƒç´ 
            //curçš„ä½¿å‘½å…¶å®å·²ç»ç»“æŸäº†ï¼Œcurå’Œå®ƒçš„å­©å­éƒ½å·²ç»è®¿é—®äº†ï¼Œä¸‹ä¸€æ¬¡ç›´æ¥ä»æ ˆé¡¶å–ï¼Œä¸ç„¶å°±æ­»å¾ªç¯äº†
            cur=null; 
        }else{
            cur=cur.right;
        }
    }
}
```
![mark](http://static.imlgw.top/blog/20191113/zM80igBy0RDX.png?imageslim)

å…¶å®ä¸ç®¡æ˜¯ä»€ä¹ˆéå†ï¼Œå¯¹äºè¿™ä¸ªæ¨¡æ¿æ¥è¯´ï¼Œ**æ ˆçš„è½¨è¿¹éƒ½æ˜¯ä¸€æ ·çš„**ï¼Œåªä¸è¿‡è®¿é—®èŠ‚ç‚¹çš„æ—¶æœºæœ‰æ‰€ä¸åŒï¼Œè“è‰²çº¿æ¡ä»£è¡¨å®¡æŸ¥çš„é¡ºåºï¼Œçº¢è‰²è¾…åŠ©çš„ä»£è¡¨å‡ºæ ˆéƒ¨åˆ†ï¼Œå³è¾¹å¯¹åº”çš„å°±æ˜¯éå†è¿‡ç¨‹ä¸­æ ˆçš„å˜åŒ–ï¼Œå’Œå¯¹åº”ç»“æœçš„å˜åŒ–ï¼Œå¯¹ç…§è¿™ä¸ªå›¾å†åˆ†æä¸‹å°±å¾ˆæ¸…æ¥šäº†ã€‚

å¦‚æœè§‰å¾—å®åœ¨æ˜¯ä¸å¥½ç†è§£ä¹Ÿå¯ä»¥æ¢ç”¨ä¸‹é¢çš„æ–¹å¼

```java
public void postorderTravelNoRecur2() {
    Stack<Node> stack=new Stack<>();
    stack.push(root);
    Node lastNode=null;
    while(!stack.isEmpty()){
        //å–æ ˆé¡¶å…ƒç´ 
        Node cur=stack.peek();
        //å·¦å³å­æ ‘éƒ½ä¸ºç©ºï¼Œæˆ–è€…ä¸Šä¸€ä¸ªè®¿é—®çš„èŠ‚ç‚¹æ˜¯å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å°±è¾“å‡ºè¯¥èŠ‚ç‚¹
        if ( (cur.left==null && cur.right ==null) || 
             (lastNode!=null &&(cur.left==lastNode || cur.right==lastNode))){
            stack.pop();
            System.out.print(cur.e+" ");
            lastNode=cur;
        }else{
            if (cur.right!=null) {
                stack.push(cur.right);
            } if (cur.left!=null) {
                stack.push(cur.left);
            }  
        } 
    }
}
```
è¿™ç§æ–¹å¼ç›¸æ¯”ä¸Šé¢å°±å¥½ç†è§£å¤šäº†ï¼Œå·¦å³å­æ ‘éƒ½ä¸ºç©ºï¼Œæˆ–è€…ä¸Šä¸€ä¸ªè®¿é—®çš„èŠ‚ç‚¹æ˜¯å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œå°±å¯ä»¥è¾“å‡ºè¯¥èŠ‚ç‚¹äº†ï¼Œæ³¨æ„æ·»åŠ çš„æ—¶å€™æ˜¯é€†åºæ·»åŠ çš„ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯å…ˆè®¿é—®å·¦èŠ‚ç‚¹ï¼Œå†è®¿é—®å³èŠ‚ç‚¹ï¼Œæœ€åè®¿é—®æ ¹èŠ‚ç‚¹

### å±‚æ¬¡éå†

#### é€’å½’å†™æ³•

```java
public List<List<Integer>> levelOrder(TreeNode root) {
    List<List<Integer>> res = new ArrayList<>();
    helper(res, root, 0);
    return res;
}

private void helper(List<List<Integer>> res, TreeNode root, int depth) {
    if (root == null) return;
    //éœ€è¦å¢åŠ ä¸€å±‚
    if (res.size() == depth) res.add(new LinkedList<>());
    res.get(depth).add(root.val);
    helper(res, root.left, depth + 1);
    helper(res, root.right, depth + 1);
}
```

#### éé€’å½’å†™æ³•

ç»å…¸çš„BFS

```java
//å±‚æ¬¡éå†
public void levelorderTravel(){
    Queue<Node> queue=new LinkedList<>();
    queue.add(root);
    while(!queue.isEmpty()){
        int count=queue.size();
        while(count>0){
            Node node=queue.poll();
            System.out.print(node.e+" ");
            if (node.left!=null) {
                queue.add(node.left);
            }
            if (node.right!=null) {
                queue.add(node.right);
            }
            count--;
        }
    }
}
```

> å…¶å®å…³äºå‰ä¸­ååºçš„éå†æ–¹å¼ï¼Œè¿˜æœ‰å¾ˆå¤šï¼Œæˆ‘è¿™é‡Œä¸»è¦è®°å½•çš„æ˜¯` æ¨¡æ¿ `çš„æ€è·¯ï¼Œå…¶å®è¿˜æœ‰ä¸€ç§å¾ˆğŸ‚ğŸºçš„åšæ³•ï¼Œæ¨¡æ‹Ÿç³»ç»Ÿæ ˆçš„æ–¹å¼ï¼Œå…·ä½“å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„  [LeetCodeäºŒå‰æ ‘](http://imlgw.top/2019/11/06/leetcode-er-cha-shu-di-gui/#144-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%89%8D%E5%BA%8F%E9%81%8D%E5%8E%86) è¿™é‡Œå°±ä¸å¤šè§£é‡Šäº†

## å–æ•´

### å‘ä¸‹å–æ•´ï¼ˆfloorï¼‰

```java
public E floor(E e){
    Node node=floor(root,e);
    return node!=null?node.e:null;
}

public Node floor(Node root,E e){
    if (root==null) {
        return null;
    }
    int temp=e.compareTo(root.e);
    if (temp==0) {
        return root;
    }
    if (temp<0) { //root.e > e,æ±‚å°äºeçš„å€¼,ä¸€å®šåœ¨å·¦è¾¹
        return floor(root.left,e);
    }
    //tmep>0 e>root.e
    Node node=floor(root.right,e);
    return node!=null?node:root;
}
```
### å‘ä¸Šå–æ•´ï¼ˆceilingï¼‰

```java
public E ceiling(E e){
    Node node=ceiling(root,e);
    return node!=null?node.e:null;
}

public Node ceiling(Node root,E e){
    if (root==null) {
        return null;
    }
    int temp=e.compareTo(root.e);
    if (temp==0) {
        return root;
    }
    if (temp>0) { //root.e<e,æ±‚çš„æ˜¯æœ€åå¤§äºroot.eçš„å…ƒç´ ,ä¸€å®šåœ¨å³è¾¹
        return ceiling(root.right,e);
    }
    //tmep<0 e<root.e
    Node node=ceiling(root.left,e);
    return node!=null?node:root;
}
```
è¿™ä¸¤ä¸ªå‡½æ•°è¿˜æ˜¯æŒºæœ‰ç”¨çš„ï¼Œæ¯”å¦‚è¿™ä¸ªé¢˜ [220-å­˜åœ¨é‡å¤å…ƒç´ -III ](http://imlgw.top/2019/09/15/leetcode-cha-zhao/#220-%E5%AD%98%E5%9C%A8%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A0-III) é€šè¿‡ç‡åªæœ‰25%çš„midé¢˜ã€‚ã€‚ã€‚ã€‚

## è·å–ç¬¬Kå¤§

è·å–ç¬¬kå¤§ï¼ˆä»0å¼€å§‹ï¼‰çš„å…ƒç´ ï¼Œå¦‚æœå·¦å­æ ‘èŠ‚ç‚¹æ•°å°äº`k`ï¼Œåˆ™ç¬¬kå¤§çš„å…ƒç´ è‚¯å®šåœ¨å³å­æ ‘ï¼ŒåŒæ—¶æˆ‘ä»¬å¯ä»¥ç›´æ¥æ’é™¤`size(left)+1` ä¸ªå…ƒç´ ï¼ˆåŠ ä¸Šæ ¹èŠ‚ç‚¹ï¼‰ ã€‚

ç„¶åç›´æ¥åœ¨ å³å­æ ‘ä¸­ç»§ç»­æœç´¢ `getKth(root.right,k-size(left)-1)`  ï¼Œåªæœ‰å½“å·¦å­æ ‘åˆšå¥½kä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œæ ¹èŠ‚ç‚¹å°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„`Kth`

```java
public E getKth(int k){
    if (k>=size || k<0) {
        return null;
    }
    return getKth(root,k).e;
}

public Node getKth(Node root,int k){
    if (root==null) {
        return root;
    }
    int temp = childSize(root.left);
    if (temp>k) {
        return getKth(root.left,k);
    }
    if (temp<k) {
        return getKth(root.right,k-temp-1);
    }
    return root;
}
```
> è¿™é‡Œå…¶å®æˆ‘çš„å®ç°æ˜¯æœ‰é—®é¢˜çš„ï¼Œæˆ‘çš„æ—¶é—´å¤æ‚åº¦æ˜¯`O(NlogN)`ï¼ï¼ï¼ï¼ä¸»è¦æ˜¯`childSize()`æ—¶é—´å¤æ‚åº¦æ˜¯O(N)ä¸æ˜¯O(1)ï¼Œåœ¨ã€Šç®—æ³•4ã€‹ä¸­è¿™ä¸ªå®ç°çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(1)ï¼Œä¹¦ä¸Šåœ¨å®šä¹‰çš„Nodeçš„æ—¶å€™ç»™NodeåŠ äº†ä¸€ä¸ªcountå±æ€§ï¼Œç”¨æ¥è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°ï¼ˆåŒ…æ‹¬è‡ªå·±ï¼‰ï¼Œåœ¨æ¯æ¬¡addå’Œdeleteçš„æ—¶å€™åŠ¨æ€çš„ç»´æŠ¤è¿™ä¸ªcountï¼Œè¿™æ ·æœ€åæ±‚å­èŠ‚ç‚¹æ•°çš„æ“ä½œæ—¶é—´å¤æ‚åº¦å°±æ˜¯O(1)çš„äº†ï¼Œé‚£ä¸ªç‰ˆæœ¬çš„æˆ‘ä¹Ÿå®ç°äº†ä¸€ä¸‹ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰åœ¨è¿™ç¯‡æ–‡ç« ä¸­è¿™æ ·å†™ï¼ˆä¸»è¦æ˜¯æ‡’å¾—æ”¹ï¼‰ï¼Œè€Œä¸”è¿™ä¹Ÿä¸æ˜¯é‡ç‚¹ï¼Œæ„Ÿå…´è¶£å¯ä»¥å»çœ‹çœ‹ [BSTWithCount](https://github.com/imlgw/LeetCode/blob/master/tree/BSTWithCount.java) ä¸»è¦å°±æ˜¯è¦**æ³¨æ„æ“ä½œcountçš„æ—¶æœº**
>
è¿™é‡Œæ—¢ç„¶æ²¡æœ‰countæ•°ç»„ï¼Œé‚£ä¹ˆå…¶å®å°±ä¸åº”è¯¥è¿™æ ·æ±‚ï¼Œåº”è¯¥ç›´æ¥ä¸­åºéå†ï¼Œæ±‚ç¬¬Kå¤§ï¼Œæ—¶é—´å¤æ‚åº¦O(N)

## Rank()

å…¶å®æ˜¯ä¸Šé¢çš„é€†è¿‡ç¨‹ï¼Œå¦‚æœæ ¹èŠ‚ç‚¹ç­‰äºkeyï¼Œé‚£ä¹ˆç›´æ¥è¿”å›å·¦å­æ ‘çš„é”®æ€»æ•°ï¼›å¦‚æœkeyå°äºæ ¹èŠ‚ç‚¹ï¼Œå°±ç»§ç»­å»å·¦å­æ ‘ä¸­é€’å½’æ‰¾ï¼Œå¦‚æœå¤§äºæ ¹èŠ‚ç‚¹ï¼Œè¿”å›`size(left)+1`åŠ ä¸Šå®ƒåœ¨å³å­æ ‘ä¸­çš„`rank()`

```java
public int getRank(E e){
    return getRank(root,e);
}

public int getRank(Node root,E e){
    if (e.compareTo(root.e)<0) { //e<root.e
        return getRank(root.left,e);
    }
    if (e.compareTo(root.e)>0) {
        return getRank(root.right,e)+childSize(root.left)+1;
    }
    return childSize(root.left);
}
```
## Max&Min

æ²¡å•¥å¥½è¯´çš„

```java
//æ±‚æœ€å¤§å€¼,é€’å½’æ¯”è¾ƒä¼˜é›…
public E getMax(){
    return getMax(root).e;
}

public Node getMax(Node root){
    if (root.right==null) {
        return root;
    }
    return getMax(root.right);
}

//æ±‚æœ€å°å€¼
public E getMin(){
    return getMin(root).e;
}

public Node getMin(Node root){
    if (root.left==null) {
        return root;
    }
    return getMin(root.left);
}
```
## åˆ é™¤

åˆ é™¤åº”è¯¥æ¥è¯´æ˜¯BSTä¸­é‡Œé¢æ¯”è¾ƒå¤æ‚çš„ä¸€ä¸ªæ“ä½œäº†ï¼Œæˆ‘ä»¬å…ˆä»ç®€å•çš„å¼€å§‹

### åˆ é™¤æœ€å€¼

```java
//åˆ é™¤æœ€å°çš„é”®
public void deleteMin(){
    root=deleteMin(root);
}
//åˆ é™¤nodeä¸ºå¤´èŠ‚ç‚¹çš„æ ‘ä¸­çš„æœ€å°å€¼ï¼Œå¹¶è¿”å›å¤´èŠ‚ç‚¹
private Node deleteMin(Node node){
    if (node.left==null) {
        return node.right;
    }
    node.left=deleteMin(node.left);
    return node;
}

//åˆ é™¤æœ€å¤§çš„é”®
public void deleteMax(){
    root=deleteMax(root);
}

private Node deleteMax(Node node){
    if (node.right==null) {
        return node.left;
    }
    node.right=deleteMax(node.right);
    return node;
}
```
é€’å½’å‡½æ•°å®šä¹‰ä¸º**åˆ é™¤nodeä¸ºå¤´èŠ‚ç‚¹çš„æ ‘ä¸­çš„æœ€å°å€¼ï¼Œå¹¶è¿”å›å¤´èŠ‚ç‚¹**ï¼Œåˆ é™¤æœ€å°å€¼å®é™…ä¸Šå°±æ˜¯åˆ é™¤äºŒå‰æ ‘æœ€å·¦è¾¹çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬é€’å½’çš„åˆ é™¤node.leftå°±okï¼Œå½“node.leftä¸ºç©ºçš„æ—¶å€™è¿”å›node.rightï¼Œè¿™æ ·å‰é¢èŠ‚ç‚¹çš„leftå°±æ¥åœ¨äº†node.rightä¸Šï¼Œå°±è¾¾åˆ°äº†åˆ é™¤çš„ä½œç”¨

### åˆ é™¤ä»»æ„å€¼

```java
//åˆ é™¤ä»»æ„çš„é”®
public void delete(E e){
    root=delete(root,e);
}

//åˆ é™¤ä»¥nodeä¸ºé¦–çš„BSTä¸­,å€¼ä¸ºeçš„èŠ‚ç‚¹å¹¶ä¸”è¿”å›æ ¹èŠ‚ç‚¹
private Node delete(Node node,E e){
    if (node==null) {
        return null;
    }
    if (e.compareTo(node.e)>0) { //e>root.e
        node.right=delete(node.right,e);
    }else if (e.compareTo(node.e)<0) {
        node.left=delete(node.left,e);
    }else{ //e==root.e
        if (node.left==null) { //å¦‚æœæ²¡æœ‰å·¦å­æ ‘å°±è¿”å›å³å­æ ‘
            return node.right;
        }
        if (node.right==null) { //å¦‚æœæ²¡æœ‰å³å­æ ‘å°±è¿”å›å·¦å­æ ‘
            return node.left;
        }
        Node delNode=node;
        //æœ‰å·¦å³å­èŠ‚ç‚¹éƒ½æœ‰
        node=getMin(node.right); //ç”¨å³å­æ ‘çš„æœ€å°å€¼å¡«è¡¥åˆ é™¤çš„å…ƒç´ çš„ç©ºä½
        //åˆ é™¤å¯¹åº”çš„å³å­æ ‘çš„æœ€å°å€¼,ç„¶åè¿æ¥èµ·æ¥
        node.right=deleteMin(delNode.right);
        node.left=delNode.left;
    }
    return node;
}
```
è¿™é‡Œæ–‡å­—çš„æè¿°æ¯”è¾ƒæ— åŠ›ï¼Œç”»ä¸ªå›¾å°±æ¸…æ™°æ˜ç™½äº†ï¼Œæ ¸å¿ƒçš„æ€æƒ³å°±æ˜¯åˆ©ç”¨å³å­æ ‘ä¸­çš„æœ€å°å€¼å¡«è¡¥å¾…åˆ é™¤èŠ‚ç‚¹

![mark](http://static.imlgw.top/blog/20191113/yyI0q2yftm0X.png?imageslim)

å½“ç„¶è¿™é‡Œå…¶å®ä¹Ÿæ˜¯æœ‰å‘çš„ï¼Œä¸»è¦å°±æ˜¯è¿æœ€åä¸¤å¥

```java
//åˆ é™¤å¯¹åº”çš„å³å­æ ‘çš„æœ€å°å€¼,ç„¶åè¿æ¥èµ·æ¥
node.right=deleteMin(delNode.right);
node.left=delNode.left;
```
è¿™é‡Œçš„ä¸¤å¥è¯æ˜¯ä¸èƒ½äº¤æ¢çš„ï¼Œå¦‚æœæˆ‘ä»¬äº¤æ¢äº†ä¸¤å¥è¯çš„ä½ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸‹ä¸€æ­¥åˆ é™¤æœ€å°å€¼å°±ä¼šå‡ºç°é—®é¢˜ï¼Œæˆ‘ä»¬å¸Œæœ›çš„æ˜¯åˆ é™¤å³å­æ ‘ä¸­æœ€å°çš„nodeèŠ‚ç‚¹ï¼Œç»“æœä½ å…ˆæŠŠå¾…åˆ é™¤èŠ‚ç‚¹çš„leftæ¥åˆ°äº†nodeçš„å·¦è¾¹ï¼Œè¿™æ ·çš„è¯nodeå°±ä¸å†æ˜¯delNode.rightä¸­çš„æœ€å°å€¼ï¼Œæœ€åç»“æœå¯èƒ½å°±ä¼šæˆè¿™ä¸ªæ ·å­ï¼Œæˆäº†ä¸€ä¸ªé—­ç¯ï¼ï¼ï¼

![mark](http://static.imlgw.top/blog/20191113/qc5kHljj03uq.png?imageslim)

æ‰€ä»¥æœ€åçš„ç»“æœè‚¯å®šæ˜¯ä¸å¯¹çš„ï¼Œå…¶å®è¿™ä¸€ç‚¹ä¹¦ä¸Šå¹¶æ²¡æœ‰æåˆ°ï¼Œæˆ‘ä¹Ÿæ˜¯åœ¨åšè¿™é“é¢˜[åˆ é™¤èŠ‚ç‚¹](https://leetcode-cn.com/problems/delete-node-in-a-bst/) çš„æ—¶å€™å†™åäº†ï¼Œæ‰å‘ç°è¿™ä¸ªé—®é¢˜ï¼Œæ„Ÿå…´è¶£å¯ä»¥å»è¯•è¯•

> å…¶å®è¿™æ ·çš„åˆ é™¤æ—¶ä¸€ç§å¾ˆéšæœºçš„åšæ³•ï¼Œè™½ç„¶èƒ½æ­£ç¡®çš„åˆ é™¤å…ƒç´ ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è€ƒè™‘æ ‘çš„å¯¹ç§°æ€§ï¼Œå…³äºæ ‘çš„å¯¹ç§°æ€§ï¼Œæˆ‘ä»¬åé¢å†æ¥ç ”ç©¶

## ä»£ç åœ°å€

[BST.java](https://github.com/imlgw/LeetCode/blob/master/tree/BST.java)

[BSTTest.java](https://github.com/imlgw/LeetCode/blob/master/tree/BSTTest.java)

[BSTWithCount.java](https://github.com/imlgw/LeetCode/blob/master/tree/BSTWithCount.java)

