---
title: 
  åŠ›æ‰£220thå‘¨èµ›
tags: 
  [LeetCode,åŠ¨æ€è§„åˆ’]
categories:
  [ç®—æ³•]
date: 2020/12/29
---

> å¥½ä¹…æ²¡å†™LeetCodeçš„é¢˜äº†ï¼Œæ¥è¡¥ä¸€ä¸‹[220å‘¨èµ›](https://leetcode-cn.com/contest/weekly-contest-220/)çš„T3å’ŒT4
## [1696. è·³è·ƒæ¸¸æˆ VI](https://leetcode-cn.com/problems/jump-game-vi/)

Difficulty: **ä¸­ç­‰**


ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» **0** å¼€å§‹çš„æ•´æ•°æ•°ç»„ `nums`Â å’Œä¸€ä¸ªæ•´æ•° `k`Â ã€‚

ä¸€å¼€å§‹ä½ åœ¨ä¸‹æ ‡Â `0`Â å¤„ã€‚æ¯ä¸€æ­¥ï¼Œä½ æœ€å¤šå¯ä»¥å¾€å‰è·³Â `k`Â æ­¥ï¼Œä½†ä½ ä¸èƒ½è·³å‡ºæ•°ç»„çš„è¾¹ç•Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥ä»ä¸‹æ ‡Â `i`Â è·³åˆ°Â `[i + 1ï¼Œ min(n - 1, i + k)]`Â **åŒ…å«** ä¸¤ä¸ªç«¯ç‚¹çš„ä»»æ„ä½ç½®ã€‚

ä½ çš„ç›®æ ‡æ˜¯åˆ°è¾¾æ•°ç»„æœ€åä¸€ä¸ªä½ç½®ï¼ˆä¸‹æ ‡ä¸º `n - 1`Â ï¼‰ï¼Œä½ çš„ **å¾—åˆ†**Â ä¸ºç»è¿‡çš„æ‰€æœ‰æ•°å­—ä¹‹å’Œã€‚

è¯·ä½ è¿”å›ä½ èƒ½å¾—åˆ°çš„ **æœ€å¤§å¾—åˆ†**Â ã€‚

**ç¤ºä¾‹ 1ï¼š**

```c
è¾“å…¥ï¼šnums = [1,-1,-2,4,-7,3], k = 2
è¾“å‡ºï¼š7
è§£é‡Šï¼šä½ å¯ä»¥é€‰æ‹©å­åºåˆ— [1,-1,4,3] ï¼ˆä¸Šé¢åŠ ç²—çš„æ•°å­—ï¼‰ï¼Œå’Œä¸º 7 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```c
è¾“å…¥ï¼šnums = [10,-5,-2,4,0,3], k = 3
è¾“å‡ºï¼š17
è§£é‡Šï¼šä½ å¯ä»¥é€‰æ‹©å­åºåˆ— [10,4,3] ï¼ˆä¸Šé¢åŠ ç²—æ•°å­—ï¼‰ï¼Œå’Œä¸º 17 ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```c
è¾“å…¥ï¼šnums = [1,-5,-20,4,-1,3,-6,-3], k = 2
è¾“å‡ºï¼š0
```

**æç¤ºï¼š**

*   1 <= nums.length, k <= 10<sup>5</sup>
*   -10<sup>4</sup>Â <= nums[i]Â <= 10<sup>4</sup>


### è§£æ³•ä¸€
é€’æ¨å…¬å¼å¾ˆå®¹æ˜“å¾—åˆ°ï¼Œå…ˆæ¥ä¸€å‘æš´åŠ›è§£æ³•ï¼Œä¸å‡ºæ„æ–™çš„Täº†
```java
//1 2 3 4 5 k=2
public int maxResult(int[] nums, int k) {
    int n = nums.length;
    int[] dp = new int[n];
    dp[0] = nums[0];
    for (int i = 1; i < n; i++) {
        dp[i] = -0x3f3f3f3f;
        for (int j = i-1; i-j <= k && j >= 0; j--) {
            dp[i] = Math.max(dp[j]+nums[i], dp[i]);
        }
    }
    return dp[n-1];
}
```

### è§£æ³•äºŒ
å…¶å®è¿™é¢˜æƒ³äº†æŒºä¹…çš„ï¼Œä¸»è¦æ˜¯æ²¡æƒ³åˆ°T3ä¼šç”¨åˆ°å•è°ƒé˜Ÿåˆ—å»ä¼˜åŒ–dpï¼Œå¾ˆå·§çš„æ˜¯è¿™ä¸ªå•è°ƒé˜Ÿåˆ—ä¼˜åŒ–è¿™ä¸ªçŸ¥è¯†ç‚¹æˆ‘åˆšåˆšåœ¨yxcé‚£è¾¹å­¦äº†ä¸€ç‚¹ï¼Œé‚£ä¸ªé¢˜ç›®ç›¸å¯¹è¿™é¢˜ä¼šå¤æ‚å¾ˆå¤šï¼Œæ˜¯å¤šé‡èƒŒåŒ…çš„é—®é¢˜ã€‚ç„¶åæˆ‘å°±æ„Ÿè§‰è¿™ä¸ªé¢˜å¥½åƒä¹Ÿå¯ä»¥ç”¨å•è°ƒé˜Ÿåˆ—æ¥ä¼˜åŒ–ï¼Œç„¶åå°±è¯•äº†ä¸€å‘ï¼Œç„¶åå°±ACäº†ğŸ˜
> è¿™é‡Œä¹Ÿå¯ä»¥å€ŸåŠ©å…¶ä»–çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚çº¿æ®µæ ‘ï¼Œstè¡¨ï¼Œä¼˜å…ˆé˜Ÿåˆ—ä»€ä¹ˆçš„å»ç»´æŠ¤è¿ç»­çš„å¤§å°ä¸ºkçš„åŒºé—´çš„æœ€å¤§å€¼ï¼Œè¿™é‡Œæˆ‘å°±ä¸å†™äº†
```java
//1 2 3 4 5 k=2
public int maxResult(int[] nums, int k) {
    int n = nums.length;
    int[] dp = new int[n];
    dp[0] = nums[0];
    //dp[i]   = Max(       dp[i-1], dp[i-2], dp[i-3],... dp[i-k+1], dp[i-k])
    //dp[i+1] = Max(dp[i], dp[i-1], dp[i-2], dp[i-3],... dp[i-k+1])
    //dp[i] --> dp[i+1] æ»‘åŠ¨çª—å£æœ€å¤§å€¼
    LinkedList<int[]> queue = new LinkedList<>();
    for (int i = 1; i < n; i++) {
        while (!queue.isEmpty() && dp[i-1] > queue.getLast()[0]) {
            queue.removeLast();
        }
        if (!queue.isEmpty() && i-queue.getFirst()[1] >= k) {
            queue.removeFirst();
        }
        //è¿™é‡Œä¹Ÿå¯ä»¥åœ¨é˜Ÿåˆ—ä¸­åªå­˜dpå€¼çš„åæ ‡ï¼Œç®€åŒ–ä»£ç 
        queue.addLast(new int[]{dp[i-1], i});
        dp[i] = queue.getFirst()[0]+nums[i];
    }
    return dp[n-1];
}
```

## [1697. æ£€æŸ¥è¾¹é•¿åº¦é™åˆ¶çš„è·¯å¾„æ˜¯å¦å­˜åœ¨](https://leetcode-cn.com/problems/checking-existence-of-edge-length-limited-paths/)

Difficulty: **å›°éš¾**


ç»™ä½ ä¸€ä¸ª `n`Â ä¸ªç‚¹ç»„æˆçš„æ— å‘å›¾è¾¹é›†Â `edgeList`Â ï¼Œå…¶ä¸­edgeList[i] = [u<sub style="display: inline;">i</sub>, v<sub style="display: inline;">i</sub>, dis<sub style="display: inline;">i</sub>]Â è¡¨ç¤ºç‚¹Â u<sub style="display: inline;">i</sub>` å’Œç‚¹Â `v<sub style="display: inline;">i</sub>Â ä¹‹é—´æœ‰ä¸€æ¡é•¿åº¦ä¸ºÂ dis<sub style="display: inline;">i</sub>Â çš„è¾¹ã€‚è¯·æ³¨æ„ï¼Œä¸¤ä¸ªç‚¹ä¹‹é—´å¯èƒ½æœ‰è¶…è¿‡ä¸€æ¡è¾¹ã€‚

ç»™ä½ ä¸€ä¸ªæŸ¥è¯¢æ•°ç»„`queries`Â ï¼Œå…¶ä¸­Â queries[j] = [p<sub style="display: inline;">j</sub>, q<sub style="display: inline;">j</sub>, limit<sub style="display: inline;">j</sub>]Â ï¼Œä½ çš„ä»»åŠ¡æ˜¯å¯¹äºæ¯ä¸ªæŸ¥è¯¢Â queries[j]Â ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä»Â p<sub style="display: inline;">j</sub>Â åˆ°Â q<sub style="display: inline;">j</sub>çš„è·¯å¾„ï¼Œä¸”è¿™æ¡è·¯å¾„ä¸Šçš„æ¯ä¸€æ¡è¾¹éƒ½ **ä¸¥æ ¼å°äº** limit<sub style="display: inline;">j</sub>ã€‚

è¯·ä½ è¿”å›ä¸€ä¸ª **å¸ƒå°”æ•°ç»„**`answer`ï¼Œå…¶ä¸­`answer.length == queries.length`Â ï¼Œå½“Â `queries[j]`Â çš„æŸ¥è¯¢ç»“æœä¸ºÂ `true`Â æ—¶ï¼ŒÂ `answer` ç¬¬`j`Â ä¸ªå€¼ä¸º`true`ï¼Œå¦åˆ™ä¸ºÂ `false`Â ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://i.loli.net/2020/12/30/WiZjdPCsFca4JlE.png)

```c
è¾“å…¥ï¼šn = 3, edgeList = [[0,1,2],[1,2,4],[2,0,8],[1,0,16]], queries = [[0,1,2],[0,2,5]]
è¾“å‡ºï¼š[false,true]
è§£é‡Šï¼šä¸Šå›¾ä¸ºç»™å®šçš„è¾“å…¥æ•°æ®ã€‚æ³¨æ„åˆ° 0 å’Œ 1 ä¹‹é—´æœ‰ä¸¤æ¡é‡è¾¹ï¼Œåˆ†åˆ«ä¸º 2 å’Œ 16 ã€‚
å¯¹äºç¬¬ä¸€ä¸ªæŸ¥è¯¢ï¼Œ0 å’Œ 1 ä¹‹é—´æ²¡æœ‰å°äº 2 çš„è¾¹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› false ã€‚
å¯¹äºç¬¬äºŒä¸ªæŸ¥è¯¢ï¼Œæœ‰ä¸€æ¡è·¯å¾„ï¼ˆ0 -> 1 -> 2ï¼‰ä¸¤æ¡è¾¹éƒ½å°äº 5 ï¼Œæ‰€ä»¥è¿™ä¸ªæŸ¥è¯¢æˆ‘ä»¬è¿”å› true ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

![](https://i.loli.net/2020/12/30/TRQdGcei1S8UX9k.png)

```c
è¾“å…¥ï¼šn = 5, edgeList = [[0,1,10],[1,2,5],[2,3,9],[3,4,13]], queries = [[0,4,14],[1,4,13]]
è¾“å‡ºï¼š[true,false]
è§£é‡Šï¼šä¸Šå›¾ä¸ºç»™å®šæ•°æ®ã€‚
```

**æç¤ºï¼š**

*   2 <= n <= 10<sup>5</sup>
*   1 <= edgeList.length, queries.length <= 10<sup>5</sup>
*   edgeList[i].length == 3
*   queries[j].length == 3
*   0 <= u<sub style="display: inline;">i</sub>, v<sub style="display: inline;">i</sub>, p<sub style="display: inline;">j</sub>, q<sub style="display: inline;">j</sub> <= n - 1
*   u<sub style="display: inline;">i</sub> != v<sub style="display: inline;">i</sub>
*   p<sub style="display: inline;">j</sub> != q<sub style="display: inline;">j</sub>
*   1 <= dis<sub style="display: inline;">i</sub>, limit<sub style="display: inline;">j</sub> <= 10<sup>9</sup>
*   ä¸¤ä¸ªç‚¹ä¹‹é—´å¯èƒ½æœ‰ **å¤šæ¡**Â è¾¹ã€‚


### è§£æ³•ä¸€

çœ‹åˆ°äº†è¯„è®ºåŒºçš„ä¸€å¥æç¤ºç„¶åå†™å‡ºäº†ä¸‹é¢çš„è§£æ³•ï¼Œåæ¥çœ‹é¢˜è§£åŒºå¤§ä½¬ç§‘æ™®è¿™ç§ç±»å‹çš„é¢˜ç›®å±äº[ç¦»çº¿ç®—æ³•](https://leetcode-cn.com/problems/checking-existence-of-edge-length-limited-paths/solution/jie-zhe-ge-wen-ti-ke-pu-yi-xia-shi-yao-j-pn1b/)ï¼Œå…¶å®æ ¸å¿ƒçš„æ€æƒ³å°±æ˜¯ï¼Œå¯¹æŸ¥è¯¢çš„limitå’Œè¾¹æƒå€¼è¿›è¡Œæ’åºï¼Œç„¶åä»å°queryçš„limitå¼€å§‹ï¼Œå°†edgeæƒå€¼ä¸å¤§äºlimitçš„éƒ½ä¸¢åˆ°å¹¶æŸ¥é›†é‡Œé¢ï¼Œç„¶åæŸ¥è¯¢ä¸€ä¸‹å°±è¡Œäº†
```java
int[] parent;

public int find(int a) {
    if (parent[a] == a) {
        return a;
    }
    return parent[a] = find(parent[a]);
}

public void union(int a,int b) {
    int pa = find(a);
    int pb = find(b);
    if (pa == pb) return;
    parent[pa] = pb; 
}

class Pair {
    int p, q;
    int limit;
    int idx;
    public Pair(int p, int q, int limit, int idx) {
        this.p = p;
        this.q = q;
        this.limit = limit;
        this.idx = idx;
    }
}

public boolean[] distanceLimitedPathsExist(int n, int[][] edge, int[][] q) {
    parent = new int[n];
    for (int i = 0; i < n; i++) parent[i] = i;
    boolean[] res = new boolean[q.length];
    Pair[] query = new Pair[q.length];
    for (int i = 0; i < q.length; i++) {
        query[i] = new Pair(q[i][0], q[i][1], q[i][2], i);
    }
    Arrays.sort(edge, (e1, e2)->e1[2]-e2[2]);
    Arrays.sort(query, (q1, q2)->q1.limit-q2.limit);
    int j = 0;
    for (int i = 0; i < query.length; i++) {
        while (j < edge.length && edge[j][2] < query[i].limit) {
            union(edge[j][0], edge[j][1]);
            j++;
        }
        res[query[i].idx] = find(query[i].p) == find(query[i].q);
    }
    return res;
}
```
çœ‹äº†å¤§ä½¬ä»¬çš„ä»£ç åç¨å¾®åšäº†ä¸‹ç‚¹ç®€åŒ–
```java
int[] parent;

public int find(int a) {
    if (parent[a] == a) return a;
    return parent[a] = find(parent[a]);
}

public void union(int a,int b) {
    int pa = find(a);
    int pb = find(b);
    if (pa == pb) return;
    parent[pa] = pb; 
}

public boolean[] distanceLimitedPathsExist(int n, int[][] edge, int[][] q) {
    parent = new int[n];
    int qlen = q.length;
    for (int i = 0; i < n; i++) parent[i] = i;
    boolean[] res = new boolean[qlen];
    //è®°å½•queryæ’åºåçš„id
    Integer[] qid = new Integer[qlen];
    for (int i = 0; i < qlen; i++) qid[i] = i;
    Arrays.sort(edge, (e1, e2)->e1[2]-e2[2]);
    Arrays.sort(qid, (i1, i2)->q[i1][2]-q[i2][2]);
    int j = 0;
    for (int i = 0; i < qlen; i++) {
        while (j < edge.length && edge[j][2] < q[qid[i]][2]) {
            union(edge[j][0], edge[j][1]);
            j++;
        }
        res[qid[i]] = find(q[qid[i]][0]) == find(q[qid[i]][1]);
    }
    return res;
}
```